var MI_TYPE_ENUM={YB_SHENZHEN:"yb0001",YB_XIAMEN:"yb0002",YB_CHONGQING:"yb0003",YB_CHENGDU:"yb0004",YB_SHENZHEN_NEW:"yb0005"};var ybSessionCache=Class.create({getCache:function(a){return JSON.parse(sessionStorage.getItem(a))},setCache:function(a,b){sessionStorage.setItem(a,JSON.stringify(b))},removeCache:function(a){sessionStorage.removeItem(a)},clearCache:function(a){sessionStorage.removeItem(a)},checkCache:function(a){var b=sessionStorage.getItem(a);if(b!=null&&b!=""){return true}return false}});var MI_COMMON=Class.create({LOAD_TEXT:"医保系统处理中...",getYBData:function(d){var b=this;var a={method:"POST",url:ContextClinc_Server+"ybReimburse/getYBBaseInfo",data:null,dataType:"json",async:true,showMask:false};var c=Utils.myAjaxHandler(a);c.done(function(e){if(e!=null&&e.errorCode==SUCCESSCODE){ybSessionCache.setCache("ybData",e.data);return}else{return}})},getYBBaseInfo:function(){var a=ybSessionCache.getCache("ybData");var d={ybClinicId:null,ybOperatorId:null,ybOperatorName:null,miIpAddr:null};if(a&&a.clinicInfo){var b=a.clinicInfo;var c=a.curEmployeeInfo;d.ybClinicId=b.orgCode;d.hospitalCode=b.orgCode;d.miOpenFlag=b.miOpenFlag;d.miIpAddr=b.miIpAddr;if(c){d.ybOperatorId=c.miEmployeeCode;d.ybOperatorName=c.miEmployeeName}}return d},getIpAddress:function(b,a){var d=this;var c="";var f=d.getYBBaseInfo();switch(b){case MI_TYPE_ENUM.YB_SHENZHEN:var e="/pinganwj-mip-web-server/i/clientEntrance/dispatchClient";c="https://"+f.miIpAddr+e;break;case MI_TYPE_ENUM.YB_SHENZHEN_NEW:var e="/pinganwj-mip-sz-web-server/i/clientEntrance/dispatchClient";c="https://"+f.miIpAddr+e;break;case MI_TYPE_ENUM.YB_XIAMEN:var e="/pinganwj-mip-xm-web-server/i/clientEntrance/dispatchClient";c="https://"+f.miIpAddr+e;break;case MI_TYPE_ENUM.YB_CHONGQING:var e="/pinganwj-mip-cq-web-server/i/clientEntrance/dispatchClient";c="https://"+f.miIpAddr+e;break;case MI_TYPE_ENUM.YB_CHENGDU:var e="/pinganwj-mip-cd-web-server/i/clientEntrance/";c="https://"+f.miIpAddr+e;if(a==null||a==""){a="1"}else{a=a+""}switch(a){case"1":c=c+"interfaceCall";break;case"2":c=c+"interfaceConfirm";break;case"3":c=c+"interfaceCancel";break;case"4":c=c+"getUncertaintyTrade";break;default:break}}return c},checkYBPermission:function(a){var b=$this.getYBBaseInfo();if(b==null){$.paAlert("医保参数设置有误");return false}switch(a){case MI_TYPE_ENUM.YB_SHENZHEN:if(Utils.isBlank(b.ybClinicId)||Utils.isBlank(b.ybOperatorId)||Utils.isBlank(b.miIpAddr)){$.paAlert("医保参数设置有误");return false}break;case MI_TYPE_ENUM.YB_XIAMEN:if(Utils.isBlank(b.miIpAddr)){$.paAlert("医保参数设置有误");return false}break}return true},ErrorHintPop:function(a){var b=$('<div id="error-hintPop"><div class="error-hintBox"><div class="error-hint-text" style="word-break: break-all;">'+a+'</div><div class="foot-btn"><span class="btn normal-btn" id="error-hintBtn">确定</span></div></div></div>');b.find("#error-hintBtn").on("click",function(){$(this).parents("#error-hintPop").remove()});$(window.top.document.body).append(b)},});$(function(){var a=$("meta[property=mi]");if(a!=null&&a.attr("content")=="1"){var b=$("meta[property=miCode]").attr("content");MI_COMMON.getYBData(b)}});var WJ_APP_PLUGIN_URL="https://download.pinganwj.com/download/wanjia_box_install.zip";