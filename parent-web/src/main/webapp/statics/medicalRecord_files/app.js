/** 
 * cdss-api - v0.1.0 
 * Create Date -2017-09-29 19:51:29
 * Copyright (c) 2017 jerry; Licensed GPLv2 
 */
"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function this_value(){return this.valueOf()}function quote(a){return rx_escapable.lastIndex=0,rx_escapable.test(a)?'"'+a.replace(rx_escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),!function(){function a(a){return a.replace(t,"").replace(u,",").replace(v,"").replace(w,"").replace(x,"").split(y)}function b(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function c(c,d){function e(a){return m+=a.split(/\n/).length-1,k&&(a=a.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),a&&(a=s[1]+b(a)+s[2]+"\n"),a}function f(b){var c=m;if(j?b=j(b,d):g&&(b=b.replace(/\n/g,function(){return m++,"$line="+m+";"})),0===b.indexOf("=")){var e=l&&!/^=[=#]/.test(b);if(b=b.replace(/^=[=#]?|[\s;]*$/g,""),e){var f=b.replace(/\s*\([^\)]+\)/,"");n[f]||/^(include|print)$/.test(f)||(b="$escape("+b+")")}else b="$string("+b+")";b=s[1]+b+s[2]}return g&&(b="$line="+c+";"+b),r(a(b),function(a){if(a&&!p[a]){var b;b="print"===a?u:"include"===a?v:n[a]?"$utils."+a:o[a]?"$helpers."+a:"$data."+a,w+=a+"="+b+",",p[a]=!0}}),b+"\n"}var g=d.debug,h=d.openTag,i=d.closeTag,j=d.parser,k=d.compress,l=d.escape,m=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},q="".trim,s=q?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],t=q?"$out+=text;return $out;":"$out.push(text);",u="function(){var text=''.concat.apply('',arguments);"+t+"}",v="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+t+"}",w="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(g?"$line=0,":""),x=s[0],y="return new String("+s[3]+");";r(c.split(h),function(a){a=a.split(i);var b=a[0],c=a[1];1===a.length?x+=e(b):(x+=f(b),c&&(x+=e(c)))});var z=w+x+y;g&&(z="try{"+z+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+b(c)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var A=new Function("$data","$filename",z);return A.prototype=n,A}catch(B){throw B.temp="function anonymous($data,$filename) {"+z+"}",B}}var d=function(a,b){return"string"==typeof b?q(b,{filename:a}):g(a,b)};d.version="3.0.0",d.config=function(a,b){e[a]=b};var e=d.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},f=d.cache={};d.render=function(a,b){return q(a,b)};var g=d.renderFile=function(a,b){var c=d.get(a)||p({filename:a,name:"Render Error",message:"Template not found"});return b?c(b):c};d.get=function(a){var b;if(f[a])b=f[a];else if("object"==typeof document){var c=document.getElementById(a);if(c){var d=(c.value||c.innerHTML).replace(/^\s*|\s*$/g,"");b=q(d,{filename:a})}}return b};var h=function(a,b){return"string"!=typeof a&&(b=typeof a,"number"===b?a+="":a="function"===b?h(a.call(a)):""),a},i={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},j=function(a){return i[a]},k=function(a){return h(a).replace(/&(?![\w#]+;)|[<>"']/g,j)},l=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},m=function(a,b){var c,d;if(l(a))for(c=0,d=a.length;d>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)},n=d.utils={$helpers:{},$include:g,$string:h,$escape:k,$each:m};d.helper=function(a,b){o[a]=b};var o=d.helpers=n.$helpers;d.onerror=function(a){var b="Template Error\n\n";for(var c in a)b+="<"+c+">\n"+a[c]+"\n\n";"object"==typeof console&&console.error(b)};var p=function(a){return d.onerror(a),function(){return"{Template Error}"}},q=d.compile=function(a,b){function d(c){try{return new i(c,h)+""}catch(d){return b.debug?p(d)():(b.debug=!0,q(a,b)(c))}}b=b||{};for(var g in e)void 0===b[g]&&(b[g]=e[g]);var h=b.filename;try{var i=c(a,b)}catch(j){return j.filename=h||"anonymous",j.name="Syntax Error",p(j)}return d.prototype=i.prototype,d.toString=function(){return i.toString()},h&&b.cache&&(f[h]=d),d},r=n.$each,s="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",t=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,u=/[^\w$]+/g,v=new RegExp(["\\b"+s.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),w=/^\d[^,]*|,\d[^,]*/g,x=/^,+|,+$/g,y=/^$|,+/;"function"==typeof define?define(function(){return d}):"undefined"!=typeof exports?module.exports=d:this.template=d}();var iTemplates={};iTemplates["tpl/chronic"]='<div class="cdss-panel-box"><div class="cdss-p-heard"><a href="javascript:void(0)" class="cdss_panel_closed_btn" id="cdss_panel_closed_btn"></a><ul class="head-url"><li class="active" flag="blood"><div>病情评估</div></li><li flag="drug"><div>药物治疗</div></li><li flag="intervene"><div>患者教育</div></li><li flag="relevant"><div>参考指南</div></li></ul></div><div class="cdss-p-body"><div id="cdss_chronic_blood" class="cdss-show-tab"></div><div id="cdss_chronic_drug" class="cdss-show-tab"></div><div id="cdss_chronic_intervene" class="cdss-show-tab"></div><div id="cdss_chronic_relevant" class="cdss-show-tab"></div></div></div>',iTemplates["tpl/chronic_blood"]='<div class="cdss-pde-left"><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><font>患者信息</font> <a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-pan-t"><i style="color:red;line-height: 30px;vertical-align: bottom;margin-right: 5px">*</i> 年龄:</div><div class="cdss-pan-con"><input type="text" id="cdss_blood_age" class="cdss-age-input" value="<%= age?age:\'\' %>"> <span id="cdss_blood_agetype" class="cdss-select"></span><span class="sex_title">性别：</span> <input type="radio" name="cdss_blood_sex" value="1" <%= gender==1?\'checked\':\'\' %> > 男 <input type="radio" name="cdss_blood_sex" value="0" style="margin-left: 40px" <%= gender==0?\'checked\':\'\' %> > 女 <a href="javascript:void(0)" class="cdss-chronic-color cdss-blood-his">查看历史评估记录</a><div id="cdss_bood_his_tab" class="cdss-bood-his-tab"></div></div></div> <% if(prescription && prescription.antihypertensiveList && prescription.antihypertensiveList.length){%> <div class="cdss-item-c"><div class="cdss-pan-t">最近处方:</div><div class="cdss-pan-con"><input type="button" id="cdss_copy_drug_btt" class="cdss-copy-drug" value="复制到本次"><div class="cdss-copy-drug-conent"><span><%=prescription.createDate%></span><ul id="cdss_copy_drug_ul"> <% for(var i =0;i<prescription.antihypertensiveList.length;i++){%> <% var temp =prescription.antihypertensiveList[i] %> <li><%=temp.antihypertensive%> </li> <%}%> </ul></div></div></div> <%}%> <div class="cdss-item-c cdss-personal" style="display: <%= gender==0?\'block\':\'none\' %>"><div class="cdss-pan-t">个人史:</div><div class="cdss-pan-con"> <% for (var i = 0; i < personalHistory.length; i ++) { %> <%var item = personalHistory[i];%> <span class="cdss-sl"><input type="checkbox" class="cdss-check" id="cdss_personal_<%= item.name %>" flag="<%= item.name %>" desc="<%=item.description%>" <%= item.value==1?\'checked\':\'\' %>><label for="cdss_personal_<%= item.name %>"><%=item.description%></label></span> <% } %> <div id="cdss-personal-result" style="display: none"><span class="cdss-result">建议：妊娠和哺乳期妇女建议上转至二级或以上医院就诊</span></div></div></div><div class="cdss-item-c"><div class="cdss-pan-t"><i style="color:red;line-height: 30px;vertical-align: bottom;margin-right: 5px">*</i> 血压:</div><div class="cdss-pan-con"><input type="text" id="cdss_systolicPressure" class="cdss-blood-input" value="<%= bloodPressure?bloodPressure.systolicPressure:\'\' %>" placeholder="收缩压"> / <input type="text" id="cdss_diastolicPressure" class="cdss-blood-input" value="<%= bloodPressure?bloodPressure.diastolicPressure:\'\' %>" placeholder="舒张压"> mmHg<div id="cdss_blood_level_div" style="display: <%= (bloodPressure&&bloodPressure.hbpLevel)?\'block\':\'none\' %>"><span class="cdss-result"><span id="cdss_blood_level_title">血压分级：</span><span id="cdss_blood_level"><%= (bloodPressure&&bloodPressure.hbpLevel)?bloodPressure.hbpLevel.desc:\'\' %></span></span></div></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><font>诊断鉴别</font> <a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-pan-t"></div><div class="cdss-pan-con" style="line-height: 28px"><a href="javascript:void(0)" class="cdss-idtenty-bt">继发性高血压鉴别</a><div id="cdss-identity-result" style="display: none"><span class="cdss-result">建议：怀疑继发性高血压建议上转至二级或以上医院就诊</span></div><div class="cdss-idtenty-div" style="display: none"><span class="cdss-close-x"></span><ul> <% for (var i = 0; i < deeperConfirms.length; i ++) { %> <%var item = deeperConfirms[i];%> <li><input type="checkbox" class="cdss-check" id="cdss_deeper_<%= item.name %>" flag="<%= item.name %>" <%= item.value==1?\'checked\':\'\' %>><label for="cdss_deeper_<%= item.name %>"> <%=item.description%></label></li> <% } %> </ul></div></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><font>心血管预后危险</font> <a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd" id="cdss_pbdl_dd_danger" style="position: relative"><div class="cdss-item-c"><div class="cdss-pan-t">既往史:</div><div class="cdss-pan-con cdss-past-medical-his"> <% for (var i = 0; i < pastMedicalHistory.length; i ++) { %> <%var item = pastMedicalHistory[i];%> <span class="cdss-sl"><input type="checkbox" class="cdss-check" id="cdss_past_<%= item.name %>" flag="<%= item.name %>" desc="<%=item.description%>" <%= item.value==1?\'checked\':\'\' %>><label for="cdss_past_<%= item.name %>" class="cdss-popup-point" comment="<%=item.comment?item.comment:item.comment%>"> <%=item.description%></label></span> <% } %> </div></div><div class="cdss-item-c"><div class="cdss-pan-t">危险因素:</div><div class="cdss-pan-con cdss-danger-factors"> <% for (var i = 0; i < dangerFactors.length; i ++) { %> <%var item = dangerFactors[i];%> <span class="cdss-sl"><input type="checkbox" class="cdss-check" flag="<%= item.name %>" id="cdss_danger_<%= item.name %>" desc="<%=item.description%>" <%= item.value==1?\'checked\':\'\' %>><label for="cdss_danger_<%= item.name %>" class="cdss-popup-point" comment="<%=item.comment?item.comment:item.comment%>"><%=item.description%></label></span> <% } %> </div></div><div class="cdss-item-c"><div class="cdss-pan-t">靶器官损害:</div><div class="cdss-pan-con cdss-target-organ-damage"> <% for (var i = 0; i < targetOrganDamages.length; i ++) { %> <%var item = targetOrganDamages[i];%> <span class="cdss-sl"><input type="checkbox" class="cdss-check" flag="<%= item.name %>" id="cdss_target_<%= item.name %>" desc="<%=item.description%>" <%= item.value==1?\'checked\':\'\' %>><label for="cdss_target_<%= item.name %>" class="cdss-popup-point" comment="<%=item.comment?item.comment:item.comment%>"><%=item.description%></label></span> <% } %> <div id="cdss_factor_layer_div" style="display: <%= bloodPressureRiskLevel?\'block\':\'none\' %>"><span class="cdss-result">心血管预后危险分层：<span id="cdss_factor_layer"><%= bloodPressureRiskLevel?bloodPressureRiskLevel.desc:\'\' %></span></span></div></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><font>控制目标</font> <a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-pan-t">目标血压:</div><div class="cdss-pan-con"><input type="text" class="cdss-blood-input" id="target_blood_systolicPressure" value="<%= targetBloodPressure?targetBloodPressure.systolicPressure:\'\' %>" placeholder="收缩压"> / <input type="text" class="cdss-blood-input" id="target_blood_diastolicPressure" value="<%= targetBloodPressure?targetBloodPressure.diastolicPressure:\'\' %>" placeholder="舒张压"> mmHg <span class="cdss-help"><i></i></span> <span class="cdss-target">推荐目标血压<span class="blood_systolicPressure"><%= bloodPressureThreshhold?bloodPressureThreshhold.systolicPressure:\'\' %></span>/<span class="blood_diastolicPressure"><%= bloodPressureThreshhold?bloodPressureThreshhold.diastolicPressure:\'\' %></span>mmHg <a id="cdss_blood_advice">确定</a></span><div class="cdss-target-div" style="display: none"><span class="cdss-close-x"></span> <span>血压目标参考</span><br><span class="t1">年龄 &lt;65岁</span> <span class="t2">&lt;140/90mmHg</span> <span class="t1">年龄 &gt;=65岁</span> <span class="t2">&lt;150/90mmHg</span> <span class="t1">伴有肾病、糖尿病</span> <span class="t2">&lt;130/80mmHg</span></div></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><font>选择治疗</font> <a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><div class="cdss-bottom-foot"><span class="cdss-bottom-bt cdss-btt-menu" flag="intervene" id="cdss_btt_relvent">生活干预</span> <span class="cdss-bottom-bt cdss-btt-menu" flag="drug" id="cdss_btt_drug">药物治疗</span> <span class="cdss-bottom-bt" id="cdss_btt_transfer">转诊</span></div><div class="cdss-transfer" style="display: none"><span class="cdss-close-x"></span><h2>双向转诊标准</h2><div class="trans-standard">上转至二级及以上医院的标准</div><h5>社区初诊的高血压患者，如有以下情况之一：</h5><ul><li>多次测量血压水平达三级需要进一步评估治疗</li><li>合并靶器官损害需要进一步评估治疗</li><li>高血压急症</li><li>怀疑继发性高血压</li><li>妊娠和哺乳期妇女</li></ul><h5>在社区随访的高血压患者，如有以下情况之一：</h5><ul><li>采用2种以上降压药物规律治疗，血压仍然不达标</li><li>血压控制平稳的患者，再度出现血压升高并难以控制</li><li>血压波动较大，临床处理有困难</li><li>随访过程中出现新的严重临床疾病或原有疾病加重</li><li>患者服用降血压药物后出现不能解释或难以处理的不良反应</li><li>高血压伴有多重危险因素或靶器官损害而处理困难</li></ul><div class="trans-standard">下转至基层医疗卫生机构的标准</div><ul><li>诊断明确，治疗方案确定，病情稳定的患者</li></ul></div><div class="bottom-line"></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><font>更多患者病情记录</font> <a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-pan-t"></div><div class="cdss-pan-con"><textarea id="cdss_blood_remark" class="cdss-blood-remark" placeholder="备注"><%=remark%></textarea></div></div></dd></dl></div>',iTemplates["tpl/chronic_blood_record"]='<div> <%if(recordList.length){ for(var i = 0;i<recordList.length;i++){  %> <% var item =recordList[i]; item.diseaseHistory = item.diseaseHistory ||[];item.hypotensor = item.hypotensor||[]  %> <div class="cdss-blood-his-item"><span class="cdss-chronic-color"><%=item.createDate%></span><div><span class="cdss-his-tit">病史记录</span> <span class="cdss-his-cont"><%=item.diseaseHistory.join(" ")%></span></div><div><span class="cdss-his-tit">检查结果</span> <%if(item.systolicPressure || item.diastolicPressure){%> <span class="cdss-his-cont"><%=item.systolicPressure||""%>/<%=item.diastolicPressure||""%> mmHg</span> <%}%> </div><div><span class="cdss-his-tit">在服药品</span> <span class="cdss-his-cont"><%=item.hypotensor.join(" ")%></span></div></div> <%}}else{%> <div class="cdss-blood-his-item" style="height: 40px;line-height: 40px">暂无历史记录</div> <%}%> </div>',iTemplates["tpl/chronic_drug"]='<div class="cdss-pde-left"><div id="cdss-drug-for-use"><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><font>在服药品</font> <a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con"><div><span class="cdss-sl"><input type="radio" class="cdss-check" id="cdss_drug_use_true" name="cdss_drug_use" value="1"> 有</span> <span class="cdss-sl"><input type="radio" class="cdss-check" name="cdss_drug_use" value="0" checked="true"> 无</span></div><div class="cdss_drug_use_div" style="display: none"> <% for (var i = 0; i < antihypertensiveList.length; i ++) { %> <%var item = antihypertensiveList[i];%> <span class="cdss-sl"><input type="checkbox" class="cdss-check" flag="<%= item.drugId %>" name="<%=item.drugName%>" id="cdss_hypotensor_<%= item.drugId %>" <%= item.checked?\'checked\':\'\' %>><label for="cdss_hypotensor_<%= item.drugId %>"><%=item.drugName%></label></span> <% } %> </div></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><font>合并症</font> <a name="">&nbsp;</a><label class="cdss-drug-show-more">[ 更多 ]</label></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con cdss-drug-indication"> <% for (var i = 0; i < indicationList.length; i ++) { %> <%var temp = indicationList[i];%> <span class="cdss-drug-indic-tit"><%=temp.indicationType%></span><div class="drug cdss_drug_indicat_b" id="cdss_drug_indicat_<%=i+1%>" style="height:<%=(i==0 && temp.indicationList.length>4)?\'61px\':\'31px\'%>"> <% for (var j = 0; j < temp.indicationList.length; j ++) { %> <%var item = temp.indicationList[j];%> <span class="cdss-sl"><input type="checkbox" class="cdss-check" flag="<%= item.indicationId %>" id="cdss_medication_<%= item.indicationId %>" name="<%=item.indicationName%>" <%= item.checked?\'checked\':\'\' %>><label for="cdss_medication_<%= item.indicationId %>"><%=item.indicationName%></label></span> <% } %> </div> <% } %> <div class="cdss-drug-result" style="display: none"><ul id="cdss_drug_result_ul"></ul></div></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><font>智能推荐</font> <a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con"><div class="cdss-intell-result"><ul id="cdss_intell_result_ul"></ul></div></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt cdss-drug-single-title"><font>单药治疗</font> <a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con"><div class="single"> <% for (var i = 0; i < classificationSingleList.length; i ++) { %> <%var item = classificationSingleList[i];%> <span class="cdss-sl"><span class="cdss_antihypertensive" id="drug_single_<%=item.classificationId %>"><span class="cdss_antihypertensive_t" classification="<%=item.classificationId %>" classification_id="<%=item.classificationId %>" flag="single"><%=item.name%></span></span></span> <% } %> </div><div id="cdss-single-window" style="position: relative"><span class="cdss-close-x"></span></div></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt cdss-drug-union-title"><font>联合用药</font> <a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con"><div class="union"> <% for (var i = 0; i < classificationUniteList.length; i ++) { %> <%var item = classificationUniteList[i];%> <span class="cdss-sl"><span class="cdss_antihypertensive" id="drug_single_<%=item.classificationId %>"><span class="cdss_antihypertensive_t" classification="<%=item.name %>" classification_id="<%=item.classificationId %>" flag="union"><%=item.name%> </span></span></span> <% } %> </div><span class="cdss-union-tips">联合两种药物治疗血压仍不达标者，建议增加至3种药物或增加当前用药剂量，更多内容请参考指南原文</span><div id="cdss-union-window" style="position: relative"><span class="cdss-close-x"></span></div><div><div id="cdss_drug_selected_panel" class="cdss-drug-selected" style="display: none">已选药品:<ul id="cdss-drug-selected_ul"></ul></div></div></div></div></dd></dl></div><div id="cdss_drug_none_desc"><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><font>提示</font> <a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con cdss-intell-result"><div class="cdss-intell-result" id="cdss_drug_none_cont"></div></div></div></dd></dl></div><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><font>更多患者病情记录</font> <a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con"><textarea id="cdss_drug_remark" class="cdss-blood-remark" placeholder="备注"></textarea></div></div></dd></dl><div class="bottom-line"></div><div class="cdss-bottom-foot" style="text-align: center"><span class="cdss-bottom-bt cdss-bt-gl" id="cdss_chronic_save">保存</span> <span class="cdss-bottom-bt cdss-bt-gl" id="cdss_chronic_cancel">取消</span></div></div>',iTemplates["tpl/chronic_drug_detail"]='<div class="cdss-drug-detail"><span class="cdss-title-descript"> <%=data.description %> </span><br><table class="outer-table"><thead><tr> <% if(type==\'union\'){%> <td class="wcategory">分类</td> <%}%> <td class="wcheck"></td><td class="wdrug"><span>常用药物</span></td><td class="wdrug-use"><span>常用剂量</span></td><td class="wdrug-use"><span>禁忌</span></td><td><span>不良反应</span></td></tr></thead><tbody> <% for (var i = 0; i < data.drugResponseList.length; i++) { %> <% var catgery = data.drugResponseList[i];%> <tr> <% if(type==\'union\'){%> <td><span><%=catgery.classification %></span></td> <%}%> <td colspan="3" class="cdss-table-content"><table class="inner-table" height="100%"> <% for (var j = 0; j < catgery.antihypertensiveDrugList.length; j++) { %> <% var item = catgery.antihypertensiveDrugList[j];%> <tr class="<%= (j+1)==catgery.antihypertensiveDrugList.length?\'last\':\'\' %>"><td class="first wcheck"><input type="radio" id="cdss_drug_<%=classification %>_<%=item.classificationId %>_<%=item.drugId %>" dosage="<%=item.dosage %>" drugname="<%=item.drugName %>" name="cdss_drug_<%=classification %>_<%=item.classificationId %>" class="cdss_drug_<%=item.drugId %>" flag="<%=item.drugId %>" <%= item.checked?\'checked\':\'\' %>></td><td class="wdrug"><span><label for="cdss_drug_<%=classification %>_<%=item.classificationId %>_<%=item.drugId %>"><%=item.drugName %></label></span></td><td class="wdrug-use"><span><%=item.dosage %></span></td></tr> <% } %> </table></td><td><span><%=catgery.taboo %></span></td><td><span><%=catgery.adverseReactions %></span></td></tr> <% } %> </tbody></table></div>',iTemplates["tpl/chronic_intervene"]='<div class="cdss-pde-left"> <%for(var j = 0; j< content.length; j++){%> <%var item = content[j];%> <dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font><%=item.title%></font><a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><span class="treatment_tab_content" style="font-family: 微软雅黑, \'Microsoft YaHei\'"> <%=item.content%> </span></dd></dl> <%}%> </div>',iTemplates["tpl/chronic_popup"]='<div><div class="cdss-popup-content">是否保存评估内容?</div><div class="cdss-popup-bottom"><span class="cdss-pop-button" id="cdss_chronic_pop_save">保存</span> <span class="cdss-pop-button" id="cdss_chronic_pop_unsave">不保存</span> <span class="cdss-pop-button" id="cdss_chronic_pop_cancel">取消</span></div></div>',iTemplates["tpl/chronic_prescription"]='<div><span><%=createDate%></span><ul id="cdss_copy_drug_ul"> <% if(antihypertensiveList.length){%> <% for(var i =0;i<antihypertensiveList.length;i++){%> <% var temp =antihypertensiveList[i] %> <li><%=temp.antihypertensive%> </li> <%}}else{%> <li>无</li> <%}%> </ul></div>',iTemplates["tpl/chronic_relevant"]='<div class="cdss-pde-left"><div class="reference-content"><div class="reference-li"><lable href="javascript:void(0);" flag="1">中国高血压基层管理指南(2014年修订版)</lable></div><div class="reference-li"><lable href="javascript:void(0);" flag="1">高血压防治指南(2010年)</lable></div><div class="reference-li"><lable href="javascript:void(0);" flag="1">高血压合理用药指南(2015年)</lable></div><div class="reference-li"><lable href="javascript:void(0);" flag="1">高血压分级诊疗服务技术方案(2015年)</lable></div></div></div>',iTemplates["tpl/chronic_relevant_detail"]='<div class="cdss-pde-left"> <% for (var i = 0; i < value.docContentList.length; i ++) { %> <%var item = value.docContentList[i];%> <dl class="cdss-pb-dl <%=\'cdss_dm\'+item.titleId%>" name="<%=item.titleId%>"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font><%=item.title%></font><a class="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"> <%=item.content%> </dd></dl> <% } %> </div>',iTemplates["tpl/detail"]='<div class="cdss-panel-box"><div class="cdss-p-heard"><h1><%=key%></h1><p><%=i18n.contentBy%><font><%=i18n.huimei%></font><%=i18n.provideAndEdit%></p><a href="javascript:void(0)" class="cdss_panel_back" id="cdss_panel_back"></a> <a href="javascript:void(0)" class="cdss_panel_closed_btn" id="cdss_panel_closed_btn"></a><ul class="head-url"></ul></div><div class="cdss-p-body"></div></div>',iTemplates["tpl/detail_tab"]='<div class="cdss-pde-left"><div class="cdss-pl-ll"> <% for (var i = 0; i < value.docContentList.length; i ++) { %> <%var item = value.docContentList[i];%> <dl class="cdss-pb-dl <%=\'cdss_dm\'+item.titleId%>" name="<%=item.titleId%>"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font><%=item.title%></font><a class="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"> <%=item.content%> </dd></dl> <% } %> </div><div class="cdss-pl-lr">&nbsp;</div></div><ul class="cdss-detail-menubar"> <% for (var i = 0; i < value.catalogueList.length; i ++) { %> <%var item = value.catalogueList[i]; n = i+1;%> <li id="<%= item.title ==\'诊断\'?\'cdss_menu_zhenduan\':(item.title == \'鉴别诊断\'?\'cdss_menu_jianbiezhenduan\':\'\') %>"><a id="<%=\'cdss_dm_bar_\'+item.titleId%>" name="<%=\'cdss_dm\'+item.titleId%>" class="<%=\'cdss_dm_bar_\'+item.titleId%> <%= i==0?\'cdss-dem-al active\':\'cdss-dem-al\'%>"><span class="cdss-icon cdss-icon-oo"></span> <font title="<%=n+\'.\'+item.title%>"><%=n+\'.\'+item.title%></font></a></li> <% } %> </ul>',iTemplates["tpl/diabetes"]='<div class="cdss-panel-box"><div class="cdss-p-heard"><a href="javascript:void(0)" class="cdss_panel_closed_btn" id="cdss_panel_closed_btn"></a><ul class="head-url"><li class="active" flag="evaluate"><div>病情评估</div></li><li flag="drug"><div>药物治疗</div></li><li flag="intervene"><div>患者教育</div></li><li flag="relevant"><div>参考指南</div></li></ul></div><div class="cdss-p-body"><div id="cdss_diabetes_evaluate" class="cdss-show-tab"></div><div id="cdss_diabetes_drug" class="cdss-show-tab"></div><div id="cdss_diabetes_intervene" class="cdss-show-tab"></div><div id="cdss_diabetes_relevant" class="cdss-show-tab"></div></div></div>',iTemplates["tpl/diabetes_drug"]='<div class="cdss-pde-left"><div id="cdss_drug_for_use"><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font>在服药品</font></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con"><div><span class="cdss-sl"><input type="radio" class="cdss-check" id="cdss_drug_use_true" name="cdss_drug_use" value="1"> 有</span> <span class="cdss-sl"><input type="radio" class="cdss-check" name="cdss_drug_use" value="0" checked="true"> 无</span></div><div class="cdss_drug_use_div" style="display: none"> <% for (var i = 0; i < currentMedicineList.length; i ++) { %> <%var item = currentMedicineList[i];%> <span class="cdss-sl"><input type="checkbox" class="cdss-check" flag="<%= item.id %>" id="cdss_hypotensor_<%= item.id %>" desc="<%=item.name%>"><label for="cdss_hypotensor_<%= item.id %>"><%=item.name%></label></span> <% } %> </div><div id="cdss_current_medicine_result" class="cdss-drug-adverse"></div></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font>合并症</font></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con cdss-drug-indication"> <% for (var i = 0; i < complicationList.length; i ++) { %> <%var temp = complicationList[i];%> <span class="cdss-sl"><input type="checkbox" class="cdss-check" flag="<%= temp.id %>" id="cdss_complic_<%= temp.id %>" desc="<%=temp.name%>"><label for="cdss_complic_<%= temp.id %>"><%=temp.name%></label></span> <% } %> <div><div class="cdss-drug-result" style="display: none"><ul id="cdss_drug_result_ul"></ul></div></div></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font>智能推荐</font></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con"><div class="cdss-intell-result"><ul id="cdss_intell_result_ul"></ul></div></div></div></dd></dl><dl class="cdss-pb-dl"> <% var hypoglyObj = medicineCategoryGroupingList[0] %> <dt class="cdss-pbdl-tt cdss-drug-single-title"><span>&nbsp;</span> <font>降糖治疗</font></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con"><div><div class="drug cdss-drug-single-title2"><span class="cdss-drug-tit">一线治疗用药</span> <span class="cdss-drug-recomend-tit">推荐2-3种口服药合用</span></div><div class="single"> <% var singList = hypoglyObj.medicineCategoryClassifyList[0].medicineCategoryDescList  %> <% for (var i = 0; i < singList.length; i ++) { %> <%var item = singList[i];%> <span class="cdss-sl"><span class="cdss_antihypertensive" id="cdss_drug_diabetes_<%=item.id %>"><span class="cdss_antihypertensive_t" classification="<%=item.id %>" flag="single"><%=item.name%></span></span></span> <% } %> </div><div id="cdss_panel_single" class="cdss-drug-panel" style="position: relative"><span class="cdss-close-x"></span></div></div><div><div class="drug cdss-drug-union-title"><span class="cdss-drug-tit">二线治疗用药</span></div><div class="single"> <% var unionList = hypoglyObj.medicineCategoryClassifyList[1].medicineCategoryDescList  %> <% for (var i = 0; i < unionList.length; i ++) { %> <%var item = unionList[i];%> <span class="cdss-sl"><span class="cdss_antihypertensive" id="cdss_drug_diabetes_<%=item.id %>"><span class="cdss_antihypertensive_t" classification="<%=item.id %>" flag="union"><%=item.name%></span></span></span> <% } %> </div><div id="cdss_panel_union" class="cdss-drug-panel" style="position: relative"><span class="cdss-close-x"></span></div></div><div><div class="drug cdss-drug-insulin-title"><span class="cdss-drug-tit">三线治疗用药</span></div><div class="single"> <% var insulinList = hypoglyObj.medicineCategoryClassifyList[2].medicineCategoryDescList  %> <% for (var i = 0; i < insulinList.length; i ++) { %> <%var item = insulinList[i];%> <span class="cdss-sl"><span class="cdss_antihypertensive" id="cdss_drug_diabetes_<%=item.id %>"><span class="cdss_antihypertensive_t" classification="<%=item.id %>" flag="insulin"><%=item.name%></span></span></span> <% } %> </div><div id="cdss_panel_insulin" class="cdss-drug-panel" style="position: relative"><span class="cdss-close-x"></span></div></div><div><div class="drug cdss-drug-morinsulin-title"><span class="cdss-drug-tit">四线治疗用药</span></div><div class="single"> <% var morinsulinList = hypoglyObj.medicineCategoryClassifyList[3].medicineCategoryDescList  %> <% for (var i = 0; i < morinsulinList.length; i ++) { %> <% var item = morinsulinList[i];%> <span class="cdss-sl"><span class="cdss_antihypertensive" id="cdss_drug_diabetes_<%=item.id %>"><span class="cdss_antihypertensive_t" classification="<%=item.id %>" flag="morinsulin"><%=item.name%></span></span></span> <% } %> </div><div id="cdss_panel_morinsulin" class="cdss-drug-panel" style="position: relative"><span class="cdss-close-x"></span></div></div></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt cdss-drug-blooddown-title"><span>&nbsp;</span> <font>降压治疗</font></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con"><div class="cdss-drug-tip-cont">糖尿病患者降压优先选择血管紧张素转换酶抑制剂、血管紧张素受体拮抗剂，及在此基础上的联合用药。<br>若患者存在禁忌症或其他不耐受、高血压病情复杂的情况，请参考高血压用药内容</div><div class="blooddown"> <% var blooddownObj= medicineCategoryGroupingList[1] %> <% var blooddownList = blooddownObj.medicineCategoryDescList %> <% for (var i = 0; i < blooddownList.length; i ++) { %> <%var item = blooddownList[i];%> <span class="cdss-sl"><span class="cdss_antihypertensive" id="cdss_drug_diabetes_<%=item.id %>"><span class="cdss_antihypertensive_t" classification="<%=item.id %>" flag="blooddown"><%=item.name%></span></span></span> <% } %> </div><div id="cdss_panel_blooddown" class="cdss-drug-panel" style="position: relative"><span class="cdss-close-x"></span></div></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt cdss-drug-lipid-title"><span>&nbsp;</span> <font>调脂治疗</font> <a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con"><div class="cdss-drug-tip-cont">糖尿病患者优选他汀类降脂治疗，若患者不耐受，请参见指南详细内容</div><div class=""> <% var lipidObj= medicineCategoryGroupingList[2] %> <% var lipidList = lipidObj.medicineCategoryDescList %> <% for (var i = 0; i < lipidList.length; i ++) { %> <%var item = lipidList[i];%> <span class="cdss-sl"><span class="cdss_antihypertensive" id="cdss_drug_diabetes_<%=item.id %>"><span class="cdss_antihypertensive_t" classification="<%=item.id %>" flag="lipid"><%=item.name%></span></span></span> <% } %> </div><div id="cdss_panel_lipid" class="cdss-drug-panel" style="position: relative"><span class="cdss-close-x"></span></div></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt cdss-drug-corelle-title"><span>&nbsp;</span> <font>抗凝治疗</font></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con"><div class="cdss-drug-tip-cont">糖尿病患者优选阿司匹林抗凝，若患者不耐受，请参见指南详细内容</div><div class=""> <% var corelleObj= medicineCategoryGroupingList[3] %> <% var corelleList = corelleObj.medicineCategoryDescList %> <% for (var i = 0; i < corelleList.length; i ++) { %> <%var item = corelleList[i];%> <span class="cdss-sl"><span class="cdss_antihypertensive" id="cdss_drug_diabetes_<%=item.id %>"><span class="cdss_antihypertensive_t" classification="<%=item.id %>" flag="corelle"><%=item.name%></span></span></span> <% } %> </div><div id="cdss_panel_corelle" class="cdss-drug-panel" style="position: relative"><span class="cdss-close-x"></span></div><div><div id="cdss_drug_selected_panel" class="cdss-drug-selected" style="display: none">已选药品:<span class="cdss-select-panel-result">采用预混胰岛素&ge;2次/日或多次胰岛素治疗时应停用胰岛素促泌剂</span><ul id="cdss-drug-selected_ul"></ul></div></div></div></div></dd></dl></div><div id="cdss_drug_none_desc"><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font>提示</font></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con"><div class="cdss-intell-result" id="cdss_drug_none_cont">为了更好的使用高血压用药流程，请先补充患者血压值。</div></div></div></dd></dl></div><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font>更多患者病情记录</font></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-drug-con"><textarea id="cdss_drug_remark" class="cdss-blood-remark" placeholder="备注"></textarea></div></div></dd></dl><div class="bottom-line"></div><div class="cdss-bottom-foot" style="text-align: center"><span class="cdss-bottom-bt cdss-bt-gl" id="cdss_chronic_save">保存</span> <span class="cdss-bottom-bt cdss-bt-gl" id="cdss_chronic_cancel">取消</span></div></div>',
iTemplates["tpl/diabetes_drug_detail"]='<div class="cdss-drug-detail"><span class="cdss-title-descript"> <%=data.desc %> </span><br> <% var hasdias =(flag==\'single\'||flag==\'union\'||flag==\'insulin\'||flag==\'morinsulin\' ) %> <table class="outer-table"><thead><tr> <% if(data.medicineCategoryList.length>1){%> <td class="wcategory">分类</td> <%}%> <td class="wcheck"></td><td class="wdrug"><span>常用药物</span></td><td class="<%=hasdias?\'wdrug-use\':\'wdrug-use-diabetes\' %>"><span>常用剂量</span></td> <%if(hasdias){%> <td class="sugar"><span>低血糖</span></td><td class="weight"><span>体重改变</span></td> <%}%> <%if(!hasdias){%> <td class="wdrug"><span>禁忌症</span></td> <%}%> <td><span>不良反应</span></td></tr></thead><tbody> <% for (var i = 0; i < data.medicineCategoryList.length; i++) { %> <% var catgery = data.medicineCategoryList[i];%> <tr> <% if(data.medicineCategoryList.length>1){%> <td><span><%=catgery.name %></span></td> <%}%> <td colspan="<%=hasdias?4:3 %>" class="cdss-table-content"><table class="inner-table" height="100%"> <% for (var j = 0; j < catgery.medicineList.length; j++) { %> <% var item = catgery.medicineList[j];%> <tr class="<%= (j+1)==catgery.medicineList.length?\'last\':\'\' %>"><td class="first wcheck"><input type="radio" id="cdss_drug_<%=flag %>_<%=catgery.id %>_<%=item.id %>" insulin="<%=catgery.insulin %>" dosage="<%=item.dosage %>" drugname="<%=item.name %>" name="cdss_drug_<%=flag %>_<%=catgery.id %>" class="cdss_drug_<%=item.id %>" drugid="<%=item.id %>"></td><td class="wdrug"><span recflag="<%=item.id %>"><label for="cdss_drug_<%=flag %>_<%=catgery.id %>_<%=item.id %>"><%=item.name %></label></span></td><td class="<%=hasdias?\'wdrug-use\':\'wdrug-use-diabetes\' %>"><span><%=item.dosage %></span></td> <%if(hasdias){%> <td class="sugar"><span><%=curMen[item.hypoglycemia] %></span></td> <%}%> </tr> <% } %> </table></td> <%if(hasdias){%> <td class="weight"><span><%=catgery.weight==1?"增加":"中性" %></span></td> <%}%> <%if(!hasdias){%> <td class=""><span><%=catgery.taboo %></span></td> <%}%> <td class=""><span><%=catgery.untowardEffect %></span></td></tr> <% } %> </tbody></table></div>',iTemplates["tpl/diabetes_evaluate"]='<div class="cdss-pde-left"><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font>患者信息</font></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-pan-t">年龄:</div><div class="cdss-pan-con"><input type="text" id="cdss_evaluate_age" class="cdss-age-input" value="<%= caseHistory.age?caseHistory.age:\'\' %>"> <span id="cdss_evaluate_agetype" class="cdss-select" style="margin-left: 5px"></span><span class="sex_title">性别：</span> <input type="radio" name="cdss_evaluate_sex" value="1" <%= caseHistory.sex==1?\'checked\':\'\' %> > 男 <input type="radio" name="cdss_evaluate_sex" value="0" style="margin-left: 40px" <%= caseHistory.sex==0?\'checked\':\'\' %> > 女 <a href="javascript:void(0)" class="cdss-chronic-color cdss-blood-his">查看历史评估记录</a><div id="cdss-patient-age-result" style="display: none"><span class="cdss-result"></span></div><div id="cdss_bood_his_tab" class="cdss-bood-his-tab"></div></div></div><div class="cdss-item-c"><div class="cdss-pan-t">首次确诊时间:</div><div class="cdss-pan-con"><span id="cdss_confirm_age" class="cdss-select cdss-input-80"></span></div></div> <% if(medicineHistoryList  && medicineHistoryList.length){%> <div class="cdss-item-c"><div class="cdss-pan-t">最近处方:</div><div class="cdss-pan-con"><input type="button" id="cdss_copy_drug_btt" class="cdss-copy-drug" value="复制到本次"><div class="cdss-copy-drug-conent"><span><%=medicineHistoryList[0].createMedicineDate%></span><ul id="cdss_copy_drug_ul"> <% for(var i =0;i< medicineHistoryList.length;i++){%> <% var temp = medicineHistoryList[i] %> <li><%=temp.desc%> </li> <%}%> </ul></div></div></div> <%}%> </dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font>常见症状</font></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-evaluate-con cdss-overhide" id="cdss_evaluate_symptom_div"> <% for(var i =0;i< symptomList.length; i++) { %> <%var item = symptomList[i];%> <span class="cdss-sl"><input type="checkbox" class="cdss-check" id="cdss_symptom_<%=item.id %>" flag="<%=item.id %>" desc="<%=item.name %>"><label for="cdss_symptom_<%=item.id %>" class=""><%=item.name %></label></span> <%}%> </div><div id="cdss_eva_symptom_result" class="cdss-symptom-evalute"></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font>病史评估</font></dt><dd class="cdss-pbdl-dd" id="cdss_pbdl_dd_danger" style="position: relative"> <% var personHistory =riskElementGroupingList[0],presentHistory = riskElementGroupingList[1],previousHistory = riskElementGroupingList[2],familyHistory=riskElementGroupingList[3] %> <div class="cdss-item-c"><div class="cdss-evaluate-con"><div class="cdss-pan-t2">个人史:</div><div class="cdss-pan-t-cont"> <% for (var i = 0; i < personHistory.riskFactorList.length; i ++) { %> <%var item = personHistory.riskFactorList[i];%> <span class="cdss-sl <%=(i<2)?\'cdss-personal\':\'\'%>"><input type="checkbox" class="cdss-check" id="cdss_risk_factor_<%= item.id %>" backtype="personal" desc="<%=item.name%>" flag="<%= item.id %>"><label for="cdss_risk_factor_<%= item.id %>"> <%=item.name%></label></span> <% } %> </div></div></div><div style="clear: both"></div><div class="cdss-item-c"><div class="cdss-evaluate-con"><div class="cdss-pan-t2">现病史:</div><div class="cdss-pan-t-cont"> <% for (var i = 0; i < presentHistory.riskFactorList.length; i ++) { %> <%var item = presentHistory.riskFactorList[i];%> <span class="cdss-sl"><input type="checkbox" class="cdss-check" id="cdss_risk_factor_<%= item.id %>" backtype="danger" desc="<%=item.name%>" flag="<%= item.id %>"><label for="cdss_risk_factor_<%= item.id %>"> <%=item.name%></label></span> <% } %> </div></div></div><div style="clear: both"></div><div class="cdss-item-c"><div class="cdss-evaluate-con"><div class="cdss-pan-t2">既往史:</div><div class="cdss-pan-t-cont" backtype="danger"> <% for (var i = 0; i < previousHistory.riskFactorList.length; i ++) { %> <%var item = previousHistory.riskFactorList[i];%> <span class="cdss-sl"><input type="checkbox" class="cdss-check" id="cdss_risk_factor_<%= item.id %>" backtype="danger" desc="<%=item.name%>" flag="<%= item.id %>"><label for="cdss_risk_factor_<%= item.id %>" class="cdss-popup-point"> <%=item.name%></label></span> <% } %> </div></div></div><div style="clear: both"></div><div class="cdss-item-c"><div class="cdss-evaluate-con"><div class="cdss-pan-t2">家族史:</div><div class="cdss-pan-t-cont" backtype="danger"> <% for (var i = 0; i < familyHistory.riskFactorList.length; i ++) { %> <%var item = familyHistory.riskFactorList[i];%> <span class="cdss-sl"><input type="checkbox" class="cdss-check" flag="<%= item.id %>" backtype="danger" desc="<%=item.name%>" id="cdss_risk_factor_<%= item.id %>"><label for="cdss_risk_factor_<%= item.id %>" class="cdss-popup-point"> <%=item.name%></label></span> <% } %> </div></div><div class="cdss-evaluate-con"><div id="cdss-danger-result" class="cdss-result cdss-result-f" style=""><ul id="cdss_danger_layer"></ul></div></div></div><div style="clear: both"></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font>辅助检查</font><label id="cdss_examine_show_more" class="cdss-drug-show-more">[ 更多 ]</label></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c" style="width: 880px"><div id="cdss_evaluate_examin_cont" class="cdss-evaluate-con"><table id="cdss_inspect_common" class="cdss-evaluate-table"><tr class="cdss-eva-tr"><td class="cdss-t1"><span class="cdss-tab-tit">空腹血糖：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_current_fbg" compare="" value="<%=assistExamineDiabetesPojo.fbg.current %>" flag="current"> mmol/L <span class="cdss-flg-low"></span> <span class="cdss-flg-up"></span></td><td class="cdss-t2"><span>目标：</span> <% var targetFbg =(assistExamineDiabetesPojo.fbg.target||"").split("-") %> <input type="text" id="cdss_target_fbg_fir" class="cdss-input cdss-input-40" value="<%=targetFbg[0]||\'\' %>" flag="target"> - <input type="text" id="cdss_target_fbg_sec" class="cdss-input cdss-input-40" value="<%=targetFbg[1]||\'\' %>" flag="target"> mmol/L</td><td class="cdss-t3"><span class="cdss-target-recomend"><span id="cdss_target_recomend_fbg" recoment=""></span>mmol/L</span></td></tr><tr class="cdss-eva-tr"><td class="cdss-t1"><span class="cdss-tab-tit">餐后血糖：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_current_fbs" value="<%=assistExamineDiabetesPojo.fbs.current||\'\' %>" flag="current"> mmol/L <span class="cdss-flg-low"></span> <span class="cdss-flg-up"></span></td><td class="cdss-t2"><span>目标：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_target_fbs" value="<%=assistExamineDiabetesPojo.fbs.target||\'\' %>" flag="target"></td><td class="cdss-t3"><span class="cdss-target-recomend"><span id="cdss_target_recomend_fbs" recoment="">推荐10.0 </span>mmol/L</span></td></tr><tr class="cdss-eva-tr"><td class="cdss-t1"><span class="cdss-tab-tit">糖化血红蛋白：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_current_glycosylatedHemoglobin" value="<%=assistExamineDiabetesPojo.glycosylatedHemoglobin.current||\'\' %>" flag="current"> % <span class="cdss-flg-low"></span> <span class="cdss-flg-up"></span></td><td class="cdss-t2"><span>目标：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_target_glycosylatedHemoglobin" value="<%=assistExamineDiabetesPojo.glycosylatedHemoglobin.target||\'\' %>" flag="target"> %</td><td class="cdss-t3"><span class="cdss-target-recomend"><span id="cdss_target_recomend_glycosylatedHemoglobin" recoment="">推荐&lt7 </span>%</span></td></tr></table><div id="cdss_inspect_show_more" style="display: none"><table class="cdss-evaluate-table"><tr class="cdss-eva-tr"><td class="cdss-t1"><span class="cdss-tab-tit">血压：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_current_bloodPressure_fir" value="<%=assistExamineDiabetesPojo.bloodPressure.systolicPressure %>" flag="current" placeholder=""> / <input type="text" class="cdss-input cdss-input-40" id="cdss_current_bloodPressure_sec" value="<%=assistExamineDiabetesPojo.bloodPressure.diastolicPressure %>" flag="current" placeholder=""> mmHg <span class="cdss-flg-low"></span> <span class="cdss-flg-up"></span></td><td class="cdss-t2"><span>目标：</span> <% var targetbloodPressure =(assistExamineDiabetesPojo.bloodPressure.target||"").split("-") %> <input type="text" class="cdss-input cdss-input-40" id="cdss_target_bloodPressure_fir" value="<%=targetbloodPressure[0]||\'\' %>" flag="target" placeholder=""> / <input type="text" class="cdss-input cdss-input-40" id="cdss_target_bloodPressure_sec" value="<%=targetbloodPressure[1]||\'\' %>" flag="target" placeholder=""> mmHg</td><td class="cdss-t3"><span class="cdss-target-recomend"><span id="cdss_target_recomend_bloodPressure" recoment="">推荐140/90 </span>mmHg</span></td></tr><tr class="cdss-eva-tr"><td class="cdss-t1"><span class="cdss-tab-tit">总胆固醇：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_current_totalCholesterol" value="<%=assistExamineDiabetesPojo.totalCholesterol.current %>" flag="current"> mmol/L <span class="cdss-flg-low"></span> <span class="cdss-flg-up"></span></td><td class="cdss-t2"><span>目标：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_target_totalCholesterol" value="<%=assistExamineDiabetesPojo.totalCholesterol.target||\'\' %>" flag="target"> mmol/L</td><td class="cdss-t3"><span class="cdss-target-recomend"><span id="cdss_target_recomend_totalCholesterol" recoment="">推荐&lt4.5 </span>mmol/L</span></td></tr><tr class="cdss-eva-tr"><td class="cdss-t1"><span class="cdss-tab-tit">高密度脂蛋白胆固醇：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_current_hdlCh" value="<%=assistExamineDiabetesPojo.hdlCh.current %>" flag="current"> mmol/L <span class="cdss-flg-low"></span> <span class="cdss-flg-up"></span></td><td class="cdss-t2"><span>目标：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_target_hdlCh" value="<%=assistExamineDiabetesPojo.hdlCh.target||\'\' %>" flag="target"> mmol/L</td><td class="cdss-t3"><span class="cdss-target-recomend"><span id="cdss_target_recomend_hdlCh" recoment="">推荐&gt1.0 </span>mmol/L</span></td></tr><tr class="cdss-eva-tr"><td class="cdss-t1"><span class="cdss-tab-tit">低密度脂蛋白胆固醇：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_current_ldlCh" value="<%=assistExamineDiabetesPojo.ldlCh.current %>" flag="current"> mmol/L <span class="cdss-flg-low"></span> <span class="cdss-flg-up"></span></td><td class="cdss-t2"><span>目标：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_target_ldlCh" value="<%=assistExamineDiabetesPojo.ldlCh.target||\'\' %>" flag="target"> mmol/L</td><td class="cdss-t3"><span class="cdss-target-recomend"><span id="cdss_target_recomend_ldlCh" recoment="">推荐&gt1.0 </span>mmol/L</span></td></tr><tr class="cdss-eva-tr"><td class="cdss-t1"><span class="cdss-tab-tit">甘油三酯：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_current_triglyceride" value="<%=assistExamineDiabetesPojo.triglyceride.current %>" flag="current"> mmol/L <span class="cdss-flg-low"></span> <span class="cdss-flg-up"></span></td><td class="cdss-t2"><span>目标：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_target_triglyceride" value="<%=assistExamineDiabetesPojo.triglyceride.target||\'\' %>" flag="target"> mmol/L</td><td class="cdss-t3"><span class="cdss-target-recomend"><span id="cdss_target_recomend_triglyceride" recoment="">推荐&gt1.0 </span>mmol/L</span></td></tr><tr class="cdss-eva-tr"><td class="cdss-t1"><span>身高：</span><input type="text" class="cdss-input cdss-input-40" id="cdss_current_height" value="<%=assistExamineDiabetesPojo.height.current %>" flag="current"> CM <span class="cdss-t1-t">体重：</span><input type="text" class="cdss-input cdss-input-40" id="cdss_current_weight" value="<%=assistExamineDiabetesPojo.weight.current %>" flag="current"> KG <span class="cdss-t1-t" style="padding-left: 20px">BMI：</span><span class="cdss-t1-t" id="cdss_current_bmi" bmi="<%=assistExamineDiabetesPojo.bmi.current %>"><%=assistExamineDiabetesPojo.bmi.current %></span><span class="cdss-flg-low"></span> <span class="cdss-flg-up"></span></td><td class="cdss-t2"><span>目标：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_target_bmi" value="<%=assistExamineDiabetesPojo.bmi.target||\'\' %>" flag="target"></td><td class="cdss-t3"><span class="cdss-target-recomend"><span id="cdss_target_recomend_bmi" recoment="">推荐&gt24</span></span></td></tr><tr class="cdss-eva-tr" style="position: relative;z-index: 8"><td class="cdss-t1"><span class="cdss-tab-tit">尿白蛋白/肌酐：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_current_urinaryAlbumin" value="<%=assistExamineDiabetesPojo.urinaryAlbumin.current||\'\' %>" flag="current"> <span id="cdss_unit_urinaryAlbumin" style="width: 100px;display: inline-block;vertical-align: middle"></span><span class="cdss-flg-low"></span> <span class="cdss-flg-up"></span></td><td class="cdss-t2"><span>目标：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_target_urinaryAlbumin" value="<%=assistExamineDiabetesPojo.urinaryAlbumin.target||\'\' %>" flag="target"> <span class="cdss-target-unit">mg/mmol</span></td><td class="cdss-t3"><span class="cdss-target-recomend"><span id="cdss_target_recomend_urinaryAlbumin" recoment="">推荐&gt24</span></span></td></tr><tr class="cdss-eva-tr" style="position: relative;z-index: 1"><td class="cdss-t1"><span class="cdss-tab-tit">尿白蛋白排泄率：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_current_uaer" value="<%=assistExamineDiabetesPojo.uaer.current||\'\' %>" flag="current"> <span id="cdss_unit_uaer" style="width: 100px;display: inline-block;vertical-align: middle"></span><span class="cdss-flg-low"></span> <span class="cdss-flg-up"></span></td><td class="cdss-t2"><span>目标：</span> <input type="text" class="cdss-input cdss-input-40" id="cdss_target_uaer" value="<%=assistExamineDiabetesPojo.uaer.target %>" flag="target"> <span class="cdss-target-unit">ug/min</span></td><td class="cdss-t3"><span class="cdss-target-recomend"><span id="cdss_target_recomend_uaer" recomend=""></span></span></td></tr></table></div><div id="cdss_factor_layer_div" class="cdss-result" style="display: none"><ul id="cdss_factor_layer"></ul></div></div></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt" id="cdss_select_treatment_tit"><span>&nbsp;</span> <font>选择治疗</font></dt><dd class="cdss-pbdl-dd"><div class="cdss-bottom-foot"><span class="cdss-bottom-bt cdss-btt-menu" flag="intervene" id="cdss_btt_relvent">生活干预</span> <span class="cdss-bottom-bt cdss-btt-menu" flag="drug" id="cdss_btt_drug">药物治疗</span> <span class="cdss-bottom-bt" id="cdss_btt_transfer">转诊</span></div><div class="cdss-transfer" style="display: none"><span class="cdss-close-x"></span><h2>转诊标准</h2><ul><li>初次发现血糖异常,且病因和分型不明确者。</li><li>儿童和年轻(年龄&lt25岁)患者。</li><li>妊娠和哺乳期妇女血糖异常者。</li><li>随机血糖&ge; 16.7mmol/L,伴或不伴有意识障碍(确诊的糖尿病酮症;疑似为DKA、高血糖高渗综合征或乳酸酸中毒),若生命体征不平稳者,应在转运过程中注意开放静脉、积极补液纠正脱水、小剂量胰岛素输注控制血糖及纠正电解质紊乱,具体处理原则参照DKA及高血糖高渗综合征(HHS,又称糖尿病非酮症性高渗性昏迷)相应章节。</li><li>反复发生低血糖或发生过一次严重低血糖。</li><li>血糖、血压和/或血脂不达标者。</li><li>FPG、2hPG或HbA1c控制不达标,调整治疗方案规范治疗3~6个月后HbA1c>8.0%者,或血压控制不达标,调整治疗方案并规范治疗3个月后血压>130/80mmHg,或血脂不达标,调整治疗方案并规范治疗6个月后LDL‐C&gt2.6mmol/L。</li><li>糖尿病慢性并发症(DR、CKD、DPN、糖尿病足或周围血管病变)筛查、治疗方案的制定和疗效评估在社区处理有困难者。</li><li>糖尿病慢性并发症导致严重靶器官损害需要紧急救治者(急性心脑血管病;CKD导致肾功能不全;DR导致的严重视力下降;糖尿病外周血管病变导致的间歇性跛行和缺血性症状;糖尿病足)。</li><li>血糖波动较大,基层处理困难或需要制定胰岛素治疗方案者。</li><li>出现严重药物不良反应难以处理者。</li></ul></div><div class="bottom-line"></div></dd></dl><dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font>更多患者病情记录</font></dt><dd class="cdss-pbdl-dd"><div class="cdss-item-c"><div class="cdss-evaluate-con"><textarea id="cdss_blood_remark" class="cdss-blood-remark" placeholder="备注"><%=remark%></textarea></div></div></dd></dl></div>',iTemplates["tpl/diabetes_evaluate_symptom"]='<% for(var i=0;i< descList.length;i++){%> <% var item =descList[i] %> <div style="padding-top: 7px"><span class="cdss-symptom-t1"> <%=item.name%>： </span><span class="cdss-symptom-cont"> <%=item.desc%> </span></div> <%}%>',iTemplates["tpl/diabetes_his_record"]='<div> <%if(recordList.length){ for(var i = 0;i< recordList.length;i++){  %> <% var item =recordList[i]; item.ample = item.ample ||[];item.current_medicine = item.current_medicine||[]  %> <div class="cdss-blood-his-item"><span class="cdss-chronic-color"><%=item.createDate%></span><div><span class="cdss-his-tit">病史记录</span> <span class="cdss-his-cont"><%=item.ample.join(" ")%></span></div><div><span class="cdss-his-tit">检查结果</span> <span class="cdss-his-cont"> <%if(item.height && item.height.value){%> <span class="cdss-spitem">身高 <%=item.height.value%>cm </span> <%}%> <%if(item.weight && item.weight.value){%> <span class="cdss-spitem">体重 <%=item.weight.value%>kg </span> <%}%> <%if(item.bmi && item.bmi.value){%> <span class="cdss-spitem <%=item.bmi.result>0?\'cdss-high-result\':\'\'%>">BMI <%=item.bmi.value%> <%if(item.bmi.result==2){%> <span class="cdss-result-low"></span> <%}%> <%if(item.bmi.result==1){%> <span class="cdss-result-high"></span> <%}%> </span> <%}%> <%if(item.bloodPressure && item.bloodPressure.value ){%> <span class="cdss-spitem <%=item.bloodPressure.result>0?\'cdss-high-result\':\'\'%>">血压 <%=item.bloodPressure.value%>mmHg <%if(item.bloodPressure.result==2){%> <span class="cdss-result-low"></span> <%}%> <%if(item.bloodPressure.result==1){%> <span class="cdss-result-high"></span> <%}%> </span> <%}%> <%if(item.fbg && item.fbg.value){%> <span class="cdss-spitem <%=item.fbg.result>0?\'cdss-high-result\':\'\'%>">空腹血糖 <%=item.fbg.value%>mmol/L <%if(item.fbg.result==2){%> <span class="cdss-result-low"></span> <%}%> <%if(item.fbg.result==1){%> <span class="cdss-result-high"></span> <%}%> </span> <%}%> </span></div><div><span class="cdss-his-tit">在服药品</span> <span class="cdss-his-cont"><%=item.current_medicine.join(" ")%></span></div></div> <%}}else{%> <div class="cdss-blood-his-item" style="height: 40px;line-height: 40px">暂无历史记录</div> <%}%> </div>',iTemplates["tpl/diabetes_intervene"]='<div class="cdss-pde-left"> <%for(var j = 0; j< content.length; j++){%> <%var item = content[j];%> <dl class="cdss-pb-dl"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font><%=item.title%></font><a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><span class="treatment_tab_content" style="font-family: 微软雅黑, \'Microsoft YaHei\'"> <%=item.content%> </span></dd></dl> <%}%> </div>',iTemplates["tpl/diabetes_medicine_unvalidate"]='<div>主要不良反应</div> <% for(var i = 0; i < currentMedicineList.length;i++){%> <% var item =currentMedicineList[i],untowardEffectList = item.untowardEffectList||[] %> <%if(untowardEffectList.length){%> <div><span><%=item.medicineName%></span><span class="cdss-adverse-treate"><%=item.handling||""%></span><div> <% for(var j = 0; j < untowardEffectList.length;j++){%> <% var temp =untowardEffectList[j]%> <span class="cdss-sl"><input type="checkbox" class="cdss-check" flag="<%= temp.id %>" id="cdss_untoward_<%=temp.id %>" <%= temp.untowardEffectStatus==1?\'checked\':\'\' %> ><label for="cdss_untoward_<%=temp.id %>"><%=temp.untowardEffect %></label></span> <%}%> </div></div> <%}%> <%}%>',iTemplates["tpl/diabetes_relevant"]='<div class="cdss-pde-left"><div class="reference-content"><div class="reference-li"><lable href="javascript:void(0);" flag="1">中国慢性疾病防治基层医生诊疗手册（糖尿病分册）</lable></div><div class="reference-li"><lable href="javascript:void(0);" flag="1">中国2型糖尿病防治指南（2013版）正式版</lable></div></div></div>',iTemplates["tpl/handle"]='<div class="cdss-back-bar"><font><%=key%></font><a class="cdss-sh-btn" id="cdss_back_btn_inner"><%=i18n.back%></a></div><div class="cdss-view-main" id="handle-part-view"> <%var isfirst = true;%> <% for (var i = 0; i < value.length; i++) { %> <%var item = value[i];%> <% if(item.children == null || !item.children.length) continue;%> <dl class="handle-part"><dt class="<%= isfirst?\'h-i-title active\':\'h-i-title active\'%>"><font><%=item.title%></font><i class="cdss-icon cdss-icon-down"></i></dt><dd class="<%= isfirst?\'active\':\'active\'%>"> <%var childs = item.children%> <%for(var j = 0; j< childs.length; j++){%> <%var child = childs[j];%> <div class="cdss-handle-listitem"><h3 name="<%=child.acId%>"><%=child.title%></h3><p><%=child.content%></p></div> <%}%> </dd></dl> <%isfirst = false;%> <% } %> </div>',iTemplates["tpl/history_data"]='<% for (var i = 0; i < historyData.length; i ++) { %> <% var item = historyData[i] %> <span symtype=""><%= item%></span> <% } %>',iTemplates["tpl/home"]='<div class="cdss-header"><label for="cdss_search_input" class="cdss-sh-box"><input type="text" id="cdss_search_input" placeholder="<%=i18n.knowledgeSearch%>"> <i class="cdss-icon cdss-icon-search"></i></label><a class="cdss-sh-btn" id="cdss_know_search_btn"><%=i18n.search%></a></div><div class="cdss-page-part" id="cdss_page_part_box"><div id="cdss-drug-panel-manage"></div><div class="cdss-view-main" id="cdss_view_main"><dl class="assisted-interogation-part assisted-inner-part"><dt id="cdss_fz_t_name" style="position: relative"><%=i18n.auxiliaryInput%> <div class="cdss-choosed-time" id="cdss_open_timepanle">选择时间</div></dt><dd id="cdss_time_box_place"></dd><dd id="cdss_history_data" class="cdss-item-marks"></dd><dd id="cdss_assistedmarks_selected" class="cdss-item-marks"></dd></dl><dl class="common-diagnoses-part"><dt id="cdss_cj_t_name"><%=i18n.commonDiagnosis%></dt><dd id="common_diagnoses_part_dd"></dd></dl></div><div class="fex-hide" id="hide_flex_span"><%=i18n.Shrink%></div></div><div class="cdss-loading-tip-box" id="cdss_loading_part"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div><div class="cdss-footer"><font size="3">©</font><span class="logo"> 2016 <%=i18n.huimei%> - Mayo & <%=i18n.medical%><span class="copy-notice"><%=i18n.copyNotice%></span></span><div class="notice-content cdssanimated cdssfadeInDown"><span class="info"> <%=i18n.noticeTitle1%> </span><span class="info"> <%=i18n.noticeTitle2%> </span><span class="info"> <%=i18n.noticeTitle3%> </span></div></div><img id="cdss_maidian_img" src="" style="display: none">',iTemplates["tpl/home_diseases"]='<ul> <%if(commonDiseases!=null){%>  <% for (var i = 0; i < commonDiseases.length; i ++) { %> <% var item = commonDiseases[i];%> <li><div class="cdss-item-title cdss-item-marks" diseaseid="<%=item.id%>" name="<%=item.uuid%>" title="<%=item.diseaseName%>" mayo="<%=item.hasMayo?\'true\':\'false\'%>" detail="<%=item.hasDetail?\'true\':\'false\'%>" treatment="<%=item.hasTreatment?\'true\':\'false\'%>" reference="<%=item.hasReference?\'true\':\'false\'%>"><label class="cdss-diagnoses-item-add <%=(item.isSelected?\'active\':\'\')%>" diseaseguid="<%=item.diseaseGuid%>" diseasename="<%=item.diseaseName%>" diseasecode="<%=item.diseaseCode%>" diseaseid="<%=item.id%>"><i class="cdss-icon cdss-icon-add"></i> <font><%=item.diseaseName%></font> <%if(item.isSerious){%> <i class="cdss-icon cdss-icon-danger"></i> <%}%> </label> <%if(item.hasDifferential){%> <span class="cdss-diagnoses-identify-btn" flag="detail">[<%=i18n.identify%>]</span> <%}%> <%if(item.hasMayo){%> <span class="cdss-diagnoses-mayo-btn" flag="mayo">[<%=i18n.mayo%>]</span> <%}%> <%if(item.hasTreatment){%> <span class="cdss-diagnoses-disposes-btn" flag="treatment">[<%=i18n.handle%>]</span> <%}%> <%if(item.hasDetail){%> <span class="cdss-diagnoses-details-btn" flag="detail">[<%=i18n.details%>]</span> <%}%> <%if(item.hasMedication){%> <span class="cdss-diagnoses-chronic-btn" flag="medication">[用药]</span> <%}%> <%if(item.hasBasis){%> <span class="cdss-diagnoses-basis-btn" flag="diagnoses-basis">[诊断依据]</span> <%}%> </div><div class="cdss-item-marks"><table cellpadding="0" cellspacing="0" border="0"> <%var types = item.symptomTypes;%> <%for(var j = 0; j<(types&&types.length); j++){%> <% var type = types[j]%> <%var uns = type.unmatchSymptom;%> <%var mas = type.matchSymptom;%> <%if(uns && uns.length || mas && mas.length){%> <tr><td width="35" valign="top"><b><%=type.title%>:</b></td><td> <%if(mas && mas.length){%> <%for(var k = 0; k<mas.length; k++){%> <span class="cdss-im-mk active" symtype="<%= mas[k].symptomType%>"> <%=mas[k].symptomName%> </span> <%}%> <%}%> <%if(uns && uns.length){%> <%for(var k = 0; k<uns.length; k++){%> <span class="cdss-im-mk" symtype="<%= uns[k].symptomType%>"> <%=uns[k].symptomName%> </span> <%}%> <%}%> </td></tr> <%}%> <%}%> </table></div><ul class="cdss-sub-diagnoses-list"></ul></li> <% } %> <% } else{%> <center class="cdss-no-data-tip"><%=i18n.noQueryResult%></center> <%}%> </ul>',iTemplates["tpl/home_symptom"]='<% for (var i = 0; i < commonSymptom.length; i ++) { %> <span symtype=""><%= commonSymptom[i] %></span> <% } %>',iTemplates["tpl/other_diseasetip"]='<ul id="cdss_other_dis_ul"> <%if(!diseases.length){%> <center class="cdss-no-data-tip">无数据</center> <%}%> <%for(var i=0; i<diseases.length; i++){%> <%var disease = diseases[i];%> <li diseaseguid="<%=disease[\'diseaseGuid\']%>" diseasecode="<%=disease[\'diseaseCode\']%>" diseasename="<%=disease[\'diseaseName\']%>"> <%=disease[\'diseaseName\']%> </li> <%}%> </ul><a href="javascript:void(0)" class="cdss-closed-btn"></a>',iTemplates["tpl/reference_tab"]='<div class="cdss-pde-left"><div class="reference-content" style="font-family: 微软雅黑, \'Microsoft YaHei\'"> <% for (var i = 0; i < value.length; i ++) { %> <%var item = value[i];%> <div class="reference-li"><a href="javascript:void(0);" class="<%=item.hasDetail?\'\':\'disabled\'%>" name="<%=item.uuid%>" title="<%=item.diseaseName%>"><%=item.diseaseName%> </a></div> <% } %> </div></div>',iTemplates["tpl/search_panel"]='<div class="cdss-header"><a class="cdss-sh-btn cdss-sh-back-btn" id="cdss_know_back_btn"><%=i18n.back%></a><label for="cdss_search_input2" class="cdss-sh-box cdss-sh-box-label"><input type="text" value="<%=searchValue%>" id="cdss_search_input2" placeholder="<%=i18n.knowledgeSearch%>"> <i class="cdss-icon cdss-icon-search"></i></label><a class="cdss-sh-btn" id="cdss_know_search_btn2"><%=i18n.search%></a></div><div class="cdss-page-part"><div class="cdss-view-main" id="cdss_view_main"><dl id="cdss_chronic_result" style="display: none"><div class="cdss-drug-selected"><span class="cdss-close-x"></span><div>已选药品:<ul id="cdss_chronic_result_content"><li>苯磺酸左旋氨氯地平缓释片 5-10mg qd</li></ul></div></div></dl><dl class="common-diagnoses-part" id="cdss_diagnose_search_part"><dt><%=i18n.queryResult%></dt><dd id="common_diagnoses_part_dd_search"></dd></dl></div></div>',iTemplates["tpl/suggest"]='<%if(diseaseList==null || !diseaseList.length){%> <center class="cdss-no-data-tip"><%=i18n.noQueryResult%></center> <%}else{%> <%for(var i = 0; i<diseaseList.length; i++){%> <%var item = diseaseList[i]%> <div name="<%=item.diseaseGuid%>" title="<%=item.diseaseName%>" iccode="<%=item.diseaseCode||\'\'%>" suindex="<%= i+1%>" class=""><%=item.diseaseName%></div> <%}%> <%}%>',iTemplates["tpl/systip"]='<center class="cdss-no-data-tip"><%=data%></center>',iTemplates["tpl/time"]='<ul class="cdss-time-panel" id="cdss_time_panel"><li>1</li><li>2</li><li>3</li><li>年</li><li>4</li><li>5</li><li>6</li><li>月</li><li>7</li><li>8</li><li>9</li><li>周</li><li>分钟</li><li>0</li><li>小时</li><li>天</li></ul>',iTemplates["tpl/treatement_tab"]='<div class="cdss-pde-left"> <%for(var j = 0; j< content.length; j++){%> <%var item = content[j];%> <dl class="cdss-pb-dl <%=\'cdss_dm\'+item.acId%>" name="<%=item.acId%>"><dt class="cdss-pbdl-tt"><span>&nbsp;</span> <font><%=item.title%></font><a name="">&nbsp;</a></dt><dd class="cdss-pbdl-dd"><span class="treatment_tab_content" style="font-family: 微软雅黑, \'Microsoft YaHei\'"> <%=item.content%> </span></dd></dl> <%}%> <%if(books && books.length){%> <div class="cdss-p-footer">内容来源：<br> <%for(var i = 0; i<books.length; i++){%> <font><%=books[i]%></font><br> <%}%> </div> <%}%> </div><ul class="cdss-detail-menubar"> <% for (var i = 0; i < content.length; i ++) { %> <%var item = content[i]; n = i+1;%> <li><a id="<%=\'cdss_dm_bar_\'+item.acId%>" name="<%=\'cdss_dm\'+item.acId%>" class="<%=\'cdss_dm_bar_\'+item.acId%> <%= i==0?\'cdss-dem-al active\':\'cdss-dem-al\'%>"><span class="cdss-icon cdss-icon-oo"></span> <font title="<%=n+\'.\'+item.title%>"><%=n+\'.\'+item.title%></font></a></li> <% } %> </ul>',iTemplates["tpl/ul"]='<%if(showFlag.hasDetail=="true"){%> <li class="cdssdetail" flag="detail">疾病详情</li> <%}%> <%if(showFlag.hasMayo=="true"){%> <li class="cdssmayo" flag="mayo">梅奥AME</li> <%}%> <%if(showFlag.hasReference=="true"){%> <li class="cdssreference" flag="reference">相关疾病</li> <%}%> <%if(showFlag.hasTreatment=="true"){%> <% for (var i = 0; i < value.length; i++) { %> <%var item = value[i];%> <% if(item.children == null || !item.children.length) continue;%> <li acid="<%=item.acId%>" class="cdsstreatement"><%=item.title%></li> <% } %> <%}%>',function(){template.config("escape",!1),window.Cdss=function(a,b){function c(){var a=navigator.userAgent,b=a.indexOf("Opera")>-1,c=a.indexOf("compatible")>-1&&a.indexOf("MSIE")>-1&&!b;if(c){var d=new RegExp("MSIE (\\d+\\.\\d+);");d.test(a);parseFloat(RegExp.$1)}}function d(){var c="";a?b?b.userGuid?b.doctorGuid?b.serialNumber||(c="serialNumber is empty"):c="doctorGuid is empty":c="userGuid is empty":c="system option entity is empty":c="render id is empty",c||(Cdss.initI18n(b.i18n||"cn"),e.contentId=a,e.authKey=b.authKey,Cdss.___authKey=b.authKey,e.userOptions=encodeURIComponent(JSON.stringify(b)),Cdss.___userOptions=JSON.stringify(b),e.userParam=b,e.HomeController())}var e=this;c(),d(),this.complaintData=[],this.complaintDataObj=[],this.diagnosisData=[],this.assistantInfoData={},this.setAssistantData=function(a,b){this.assistantInfoData=a||{},b&&this.queryAutoData()},this.getAssistantData=function(){return this.assistantInfoData},this.getComplaintData=function(){return this.complaintData;
},this.getDiagnosisData=function(){return this.diagnosisData},this.removeDiagnosisData=function(a){if(a)for(var b=this.diagnosisData,c=0;c<b.length;c++){var d=b[c];d.key===a.key&&this.diagnosisData.splice(c,1)}else this.diagnosisData=[];this.queryAutoData()},this.setComplaintData=function(a,b){var c=a;Cdss.tool.isArray(c)||(c=c.split(" ")),this.complaintData=c,b||this.queryAutoData()},this.setDiagnosisData=function(a,b){Cdss.tool.isArray(a)?this.diagnosisData=a:this.diagnosisData.push(a),b||this.queryAutoData()},this.sendChangeData=function(a){this.setComplaintData(a.complained,!0),this.setDiagnosisData(a.diagnosis,!0),this.queryAutoData()},this.callListenViewChange=function(a){},this.listenViewChange=function(a){this.callListenViewChange=a},this.callListenChronicBack=function(a){},this.listenChronicBack=function(a){this.callListenChronicBack=a},this.cdssOnReadyLoaded=function(){},this.onReady=function(a){this.cdssOnReadyLoaded=a},this.cdssOnTouchTime=function(){},this.onTouchTime=function(a){this.cdssOnTouchTime=a},this.getDiagnosisKeys=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push(d.key)}return b},this.getDiagnosisValues=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push(d.value)}return b},this.cdssOnDiagnosisClick=function(){},this.onDiagnosisClick=function(a){this.cdssOnDiagnosisClick=a},this.showDiseaseSuggest=function(a,b){function c(a){if(a.head.error)return void h.toast(e.contentEntity,a.head.message,1500);if(j==i){var c=a.body;c.i18n=Cdss.i18n,h.showSuggestData(c,b),d(),l&&!c.diseaseList.length&&f()}}function d(){var a=h.get(".cdss-suggest-part");h.unbind(a,"onclick"),h.bind(a,"onclick",function(a){h.stopEvent(a)});var c=h.get("div",a[0]);h.bind(c,"onclick",function(a){var c=this,d=h.getElementAttr(c,"name"),e=h.getElementAttr(c,"title"),g=h.getElementAttr(c,"iccode");b.callback&&b.callback.call(c,{key:d,value:e,icdCode:g}),f()}),h.bind(document,"onclick",function(){f()}),g()}function f(){var a=h.get(".cdss-suggest-part");a&&a.length&&document.body.removeChild(a[0])}function g(){e.contentEntity.onkeydown=function(a){var c=a||window.event;h.stopEvent(c);var d=c.keyCode||c.which||c.charCode,g=h.get(".cdss-suggest-part"),i=g[0];if(!i&&13==d)return c.target=c.target||c.srcElement,void(("cdss_search_input"==c.target.id||"cdss_search_input2"==c.target.id)&&(""!=j?b.callback&&b.callback({value:j}):h.toast(e.contentEntity,Cdss.i18n.searchContentRequired,1500)));var k=h.get(".active",g[0]),l=k[0];if(38==d&&l){var m=l.previousElementSibling||l.previousSibling.previousSibling;if(m){h.addClass(m,"active"),h.removeClass(l,"active");var n=m.offsetTop;n<i.scrollTop&&(i.scrollTop=i.scrollTop-31)}return!1}if(40==d){if(!l){var o=h.get("div",g[0]);return void h.addClass(o[0],"active")}var m=l.nextElementSibling||l.nextSibling.nextSibling;if(m){h.addClass(m,"active"),h.removeClass(l,"active");var n=m.offsetTop,p=h.getElementAttr(l,"suIndex");p>4&&(5==p?i.scrollTop=155:i.scrollTop=i.scrollTop+31)}return!1}if(13==d){if(l){var q=h.getElementAttr(l,"name"),r=h.getElementAttr(l,"title");b.callback&&b.callback.call(l,{key:q,value:r})}else b.callback&&b.callback.call(l,{key:"",value:j});return window.needShowSuggest=!1,void f()}}}var h=Cdss.tool,i=a;i="string"==typeof a?a:a.value;var j=i,k=b.isAll?Cdss.urls.search_disease:Cdss.urls.search_disease_sug,l=!1;""==j.replace(/(^\s*)|(\s*$)/g,"")&&(k=Cdss.urls.custom_disease,l=!0);var m="spm=4.3.2.1&query="+encodeURIComponent(j);h.setImgUerlMaiDian(e,m),j=j.replace(/'/g,""),e._custom_disease_data&&l?setTimeout(function(){c(e._custom_disease_data)},100):h.ajax(k,{type:"POST",data:{diseaseName:j},header:{Huimei_id:e.authKey,"api-extend-params":e.userOptions},success:function(a){c(a),l&&a.body&&a.body.diseaseList&&a.body.diseaseList.length&&(e._custom_disease_data=a)}})},this.setContainerHeight=function(a){if(a){this.contentEntity.style.height=a+"px";var b=parseFloat(a)-71,c=e.contentEntity.clientHeight-21,d=Cdss.tool.get(".cdss-page-part",this.contentEntity),f=Cdss.tool.get("#cdss_handler_panel");Cdss.tool.setElementAttr(d,{style:"height:"+b+"px"}),f&&Cdss.tool.setElementAttr(f,{style:"height:"+c+"px"})}else{this.contentEntity.style.height="100%";var b=this.contentEntity.clientHeight-71,d=Cdss.tool.get(".cdss-page-part",this.contentEntity);Cdss.tool.setElementAttr(d,{style:"height:"+b+"px"}),Cdss.tool.bind(window,"onresize",function(){var a=e.contentEntity.clientHeight-71,b=e.contentEntity.clientHeight-21,c=Cdss.tool.get(".cdss-page-part",e.contentEntity),d=Cdss.tool.get("#cdss_handler_panel");Cdss.tool.setElementAttr(c,{style:"height:"+a+"px"}),d&&Cdss.tool.setElementAttr(d,{style:"height:"+b+"px"})})}}}}(),function(){Cdss.ajax=function(a){var b;if(window.XMLHttpRequest)try{b=new XMLHttpRequest,b.overrideMimeType&&b.overrideMimeType("text/html; charset=UTF-8")}catch(c){}else if(window.ActiveXObject)try{b=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){try{b=new ActiveXObject("Msxml2.XMLHttp")}catch(c){try{b=new ActiveXObject("Msxml3.XMLHttp")}catch(c){}}}b.onreadystatechange=function(){if(4==b.readyState){try{if(200==b.status){var c=b.responseText;try{c=JSON.parse(c)}catch(d){}a.success&&a.success.call(this,c)}else a.error&&a.error.call(this,b)}catch(d){throw d}}};var d="";if(a.data){for(var e in a.data)d+=e+"="+a.data[e]+"&";d=d.substring(0,d.length-1)}var f=a.type||"GET",g=null;"GET"===f&&d?a.url+="?"+d:g=JSON.stringify(a.data);var h=!0;if((a.async===!1||"false"===a.async)&&(h=!1),b.open(f,a.url,h),"POST"===f&&b.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.header)for(var e in a.header)b.setRequestHeader(e,a.header[e]);b.send(g)}}(),Cdss.initI18n=function(a){function b(b,c){var d=b;return"en"===a&&(d=c),d}Cdss.i18n={search:b("搜索","Search"),assisted:b("辅助问诊","Assisted interrogation"),commonDiagnosis:b("常见诊断","Common diagnosis"),auxiliaryInput:b("辅助输入","Auxiliary input"),suspectedDiagnosis:b("疑似诊断","Suspected diagnosis"),knowledgeSearch:b("支持首字母搜索诊断\r\n","Support for the first letter search diagnosis"),identify:b("鉴别","Identify"),mayo:b("梅奥","Mayo"),huimei:b("惠每医疗","Huimei"),handle:b("处置","handle"),details:b("详情","details"),noQueryResult:b("无查询结果","No query results"),accompanyingSymptoms:b("伴随症状","Accompanying symptoms"),cause:b("诱因","Cause"),bodyRecommendation:b("查体推荐","Body recommendation"),back:b("返回","Back"),queryResult:b("查询结果","Query result"),contentBy:b("内容由","Content by"),provideAndEdit:b("提供和编辑","Provide and edit"),searchContentRequired:b("搜索内容不能为空","is required"),noMoreContent:b("无更多内容","no More"),medical:b("医学指南","Medical guidelines"),shwMore:b("显示全部","[Show More]"),Shrink:b("收起","[Shrink]"),copyNotice:b("版权声明","Copyright notice"),noticeTitle1:b("本网站所有内容均系北京惠每科技有限公司（下称“惠每”）版权所有，或已得到相关权利方的有效授权。",'All the contents of this website are Beijing Hui Technology Co., Ltd. (hereinafter referred to as "benefits") all rights reserved, or have been related to the right side of the effective authorization.'),noticeTitle2:b("未经惠每事先书面授权，任何单位及个人不得以任何方式或理由对上述内容的任何部分进行使用、转载、复制、修改、抄录、传播或与其它产品捆绑使用、销售。","Without the benefit of each prior written authorization, any unit and individual shall not in any way or any part of the contents of the above reasons to use, copy, modify, copy, copy, transmission or bundled with other products and sales service."),noticeTitle3:b("惠每一贯尊重和保护知识产权，如果您发现本网站侵犯了您的版权，请发送电子邮件至 hm@huimei.com，惠每将及时、妥善进行处理。","We always respect and protect the intellectual property rights, if you find this site violated your copyright, please send an email to hm@huimei.com, you will promptly and properly handle.")}},function(){Cdss.tool={get:function(a,b){function c(a){return document.getElementById(a)}function d(a,b){for(var c=0;c<a.length;c++)if(a[c].id==b)return a[c]}function e(a,b){var c=a||document.body;if(document.getElementsByClassName)return c.getElementsByClassName(b);for(var d=c.getElementsByTagName("*"),e=[],f=0;f<d.length;f++)h.hasClass(d[f],b)&&e.push(d[f]);return e}function f(a,b){for(var c=a||document.body,d=c.getElementsByTagName(b),e=[],f=0;f<d.length;f++)d[f].tagName==b.toLocaleUpperCase()&&e.push(d[f]);return e}var g=a.substring(1),h=this;return/^#[^\s]+$/.test(a)?b?d(b,g):c(g):/^\.[^\s]+$/.test(a)?e(b,g):/^[a-zA-z0-9]+$/.test(a)?f(b,a):void 0},getElementChilds:function(a){var b=[],c=[];try{c=this.get(a).childNodes}catch(d){}for(var e=0;e<c.length;e++)c[e].tagName&&b.push(c[e]);return b},appendElement:function(a,b){"string"==typeof b&&(b=document.createTextNode(b)),a.appendChild(b)},getElementAttr:function(a,b){return"class"==b?a.className:"style"==b?a.style.cssText:a.getAttribute(b)},setElementAttr:function(a,b){function c(a){for(var c in b)"style"==c?a.style.cssText=b[c]:"class"==c?a.className=b[c]:a.setAttribute(c,b[c])}this.isHTMLCollection(a)||this.isArray(a)||(a=[a]);for(var d=0;d<a.length;d++){var e=a[d];c(e)}},getElementParent:function(a,b){function c(a){for(var b=a.parentNode;!b.tagName;)if(b=b.parentNode,!b)return;return b}var d=c(a);if(b){var e=b.substring(1);if(/^\.[^\s]+$/.test(b)){for(;!this.hasClass(d,e);)if(d=d.parentNode,"BODY"===d.tagName){d=null;break}}else if(/^#[^\s]+$/.test(b))for(;d.id!=e;)if(d=d.parentNode,"BODY"===d.tagName){d=null;break}}return d},getElementAllChild:function(a){for(var b=a.getElementsByTagName("*"),c=[],d=0;d<b.length;d++)b[d].tagName&&c.push(b[d]);return c},findElement:function(a,b){var c=b.getElementsByTagName("*"),d=[],e=a.substring(1),f="",g="";/^#[^\s]+$/.test(a)&&(f=e),/^\.[^\s]+$/.test(a)&&(g=e);for(var h=0;h<c.length;h++){var i=c[h];i.tagName&&(f&&this.getElementAttr(i,"id")===f||g&&this.hasClass(i,g))&&d.push(i)}return d},removeElement:function(a,b){b||document.body;this.isHTMLCollection(a)||this.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++)this.getElementParent(a[c]).removeChild(a[c])},getElementCoord:function(a){return{x:a.getBoundingClientRect().left,y:a.getBoundingClientRect().top}},each:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];b&&b.call(this,d,c)}},ajax:function(a,b){var c=this,d=b.rest,e=Cdss.isDeveloper?a.develop:a.online,f=Cdss.isDeveloper?"GET":b.type||"GET",g=b.success;if(e.match(".json")&&(f="GET"),d&&/{?}/.test(e))for(var h in d)e=e.replace("{"+h+"}",d[h]);var i;if(i=b.isDetailLoad?c.get("#cdss_loading_part_clone"):c.get("#cdss_loading_part"),c.addClass(i,"active"),window.XDomainRequest){var j={};j["api-extend-params"]=b.header["api-extend-params"],j.Huimei_id=b.header.Huimei_id,j=JSON.stringify(j),j=encodeURIComponent(j),Cdss.xdrAjax({time:1e4,type:f,url:e+"?_hm="+j,data:b.data?JSON.stringify(b.data):"",success:function(a){try{c.removeClass(i,"active"),a=JSON.parse(a),g&&g.call(this,a)}catch(b){}}})}else Cdss.ajax({type:f,url:e,data:b.data,header:b.header,success:function(a){c.removeClass(i,"active"),g&&g.call(this,a)}})},ieVersion:function(){var a=navigator.userAgent,b=a.indexOf("Opera")>-1,c=a.indexOf("compatible")>-1&&a.indexOf("MSIE")>-1&&!b;if(c){var d=new RegExp("MSIE (\\d+\\.\\d+);");return d.test(a),parseFloat(RegExp.$1)}return!1},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isHTMLCollection:function(a){return"[object HTMLCollection]"===Object.prototype.toString.call(a)||"[object NodeList]"===Object.prototype.toString.call(a)},addClass:function(a,b){this.isHTMLCollection(a)||this.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var d=a[c],e=this.hasClass(d,b);e||(d.className+=" "+b)}},removeClass:function(a,b){this.isHTMLCollection(a)||this.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var d=a[c],e=d.className||"";e&&this.hasClass(d,b)&&(d.className=e.replace(new RegExp("(\\s|^)"+b+"(\\s|$)")," "))}},hasClass:function(a,b){return new RegExp("(\\s|^)"+b+"(\\s|$)").test(a.className)},toggleClass:function(a,b){this.isHTMLCollection(a)||this.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var d=a[c],e=d.className||"",f="";f=e&&this.hasClass(d,b)?e.replace(new RegExp("(\\s|^)"+b+"(\\s|$)")," "):e+" "+b,f=f.replace(new RegExp("(\\s\\s)")," "),d.className=f}},stopEvent:function(a){var b=window.event||a;b.stopPropagation?b.stopPropagation():b.cancelBubble=!0},bind:function(a,b,c){function d(a){return function(b){c&&c.call(a,b)}}function e(a){var c=a["_"+b];a.attachEvent?a.attachEvent(b,c,!1):a.addEventListener?a.addEventListener(b.substring(2),c,!1):a[b]=c}var f=navigator.userAgent;if(f.indexOf("Firefox")>-1&&"onkeyup"===b&&(b="oninput"),a){this.isHTMLCollection(a)||this.isArray(a)||(a=[a]);for(var g=0;g<a.length;g++){var h=a[g];"object"==typeof h&&(h["_"+b]=d(h),e(h))}}},unbind:function(a,b){function c(a,c){a.removeEventListener?a.removeEventListener(b.substring(2),c,!1):a.detachEvent?a.detachEvent(b,c||function(){}):a[b]=null}if(a){this.isHTMLCollection(a)||this.isArray(a)||(a=[a]);for(var d=0;d<a.length;d++){var e=a[d];"object"==typeof e&&c(e,e["_"+b])}}},renderTemplate:function(a,b,c){var d=template.compile(iTemplates[b]);a.innerHTML=d(c)},masker:function(a,b){var c=this,d={},e=c.get("#cdss_masker_content_xtip")||document.createElement("div"),f=(a.clientWidth-180)/2,g="width:200px; height:70px; position:absolute; top: 100px; left:"+f+"px;border-radius:3px; font-size:12px; color:#FFF; line-height:70px; text-align:center; transition: all 0.3s; background:rgba(0,0,0,0.7);display:none;";return a.style.position="relative",b.content?e=b.content:(e.style.cssText=g,e.innerHTML=b.text),e.className="cdssanimated cdssfadeInDown "+(b.contentClass||""),e.id="cdss_masker_content_xtip",e.style.zIndex=c.getUUID(),a.appendChild(e),a._masker={content:e},d.entity=a,c.bind(e,"onclick",function(){d.hide()}),d.show=function(){d.entity._masker.content.style.display="block"},d.hide=function(){function a(a,b){try{"string"==typeof a&&(a=document.createTextNode(a)),a.parentNode.removeChild(a),b&&b()}catch(c){}}d.entity&&d.entity._masker&&d.entity._masker.content&&(d.entity._masker.content.className="cdssanimated cdssfadeOutUp",d.entity._masker&&d.entity._masker.content&&setTimeout(function(){try{a(d.entity._masker.content,function(){delete d.entity._masker.content,delete d.entity._masker})}catch(b){}},100))},d},toast:function(a,b,c){var d=this.masker(a,{text:b});return d.show(),c?(window._cdss_curent_toast_entity=d,window._cdss_toast_timer&&clearTimeout(window._cdss_toast_timer),window._cdss_toast_timer=setTimeout(function(){d.hide();try{delete window._cdss_curent_toast_entity}catch(a){window._cdss_curent_toast_entity=null}},c||1e3),void 0):d},pushHistory:function(a){this.pageActions||(this.pageActions=[]),this.pageActions.push(a)},pageBack:function(){this.pageActions.pop();var a=this.pageActions.length,b=this.pageActions[a-1];this.toggleClass(b.view,"blockwindow")},pageInit:function(a,b,c){this.pushHistory({view:b,name:c});var d=this.setCdssContentHeight(a,"",b),e=this.pageActions.length;if(e>1){var f=this.pageActions[e-2];try{this.setScrollTop(f.view,0)}catch(g){}this.toggleClass(f.view,"blockwindow")}return d},setComplaint:function(a,b,c,d){c.type=1;var e=c.name;if(e&&(e=e.replace(/ /g,""),c.name=e),!d)if(this.hasClass(b,"active")||c.isActive)a.complaintData.push(e);else for(var f=0;f<a.complaintData.length;f++){var g=a.complaintData[f];if(g&&(g=g.replace(/ /g,"")),g===e){a.complaintData.splice(f,1);break}}a.listenViewChangeData={diagnosis:a.diagnosisData,complained:a.complaintData,currentEntity:c},a.callListenViewChange(a.listenViewChangeData)},setDiagnosis:function(a,b){var c=this.getElementAttr(b,"diseaseGuid"),d=this.getElementAttr(b,"diseaseName"),e=this.getElementAttr(b,"diseaseCode");d&&d.replace(/ /g,"");var f={type:2,key:c,value:d,icdCode:e,isActive:this.hasClass(b,"active")};if(this.hasClass(b,"active")){var g={key:c,value:d};e&&"null"!=e&&(g.icdCode=e),a.diagnosisData.push(g)}else for(var h=0;h<a.diagnosisData.length;h++){var i=a.diagnosisData[h];if(i.key===c||i.value===d){a.diagnosisData.splice(h,1);break}}a.listenViewChangeData={diagnosis:a.diagnosisData,complained:a.complaintData,currentEntity:f},a.callListenViewChange(a.listenViewChangeData)},setCurrentEntityData:function(a,b,c){a.listenViewChangeData||(a.listenViewChangeData={currentEntity:{}}),a.listenViewChangeData.currentEntity.type=b,a.listenViewChangeData.currentEntity.value=c},showSuggestData:function(a,b){var c=template.compile(iTemplates["tpl/suggest"]),d=this.get(".cdss-suggest-part"),e=d&&d.length&&d[0]||document.createElement("div");e.className="cdss-suggest-part",e.style.cssText="top:"+b.y+";left:"+b.x+";width:"+b.width+";height:"+b.height+";",e.innerHTML=c(a),document.body.appendChild(e)},getUUID:function(){return window._____uuid=(window._____uuid||1e3)+1,window._____uuid},bulidCdssOverlay:function(a,b){var c=this,d=c.get(".cdss-parent-context-part"),e=document.createElement("div");e.id="cdss_handler_panel",e.className="cdss-handler-panel cdssanimated",e.style.zIndex=c.getUUID(),c.appendElement(d[0],e),c.toggleClass(e,"active"),c.addClass(e,"cdssfadeInDown");var f=b.contentEntity.clientHeight-21;return this.setElementAttr(e,{style:"height:"+f+"px"}),{mainView:d[0],innerView:e}},setCdssContentHeight:function(a,b,c){var d=b||a.contentEntity.clientHeight-71,e=c||this.get(".cdss-page-part",a.contentEntity);return this.setElementAttr(e,{style:"height:"+d+"px"}),{views:e,height:d}},setScrollTop:function(a,b){if(a){this.isHTMLCollection(a)||this.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var d=a[c];d.scrollTop=b}}},getEventTarget:function(a){var b=a||window.event,c=b.currentTarget||b.srcElement;return c},getScrollTop:function(){var a=0;return document.documentElement&&document.documentElement.scrollTop?a=document.documentElement.scrollTop:document.body&&(a=document.body.scrollTop),a},getElementPositon:function(a){for(var b=a.offsetTop,c=a.offsetLeft,d=a.offsetParent;d;)b+=d.offsetTop,c+=d.offsetLeft,d=d.offsetParent;return{left:c,top:b}},setImgUerlMaiDian:function(a,b){var c=a.userParam.authKey?a.userParam.authKey:"",d=a.userParam.userGuid?a.userParam.userGuid:"",e=a.userParam.doctorGuid?a.userParam.doctorGuid:"",f=a.userParam.serialNumber?a.userParam.serialNumber:"",g=a.userParam.hospitalGuid?a.userParam.hospitalGuid:"",h="&authKey="+c+"&userGuid="+d+"&doctorGuid="+e+"&serialNumber="+f+"&hospitalGuid="+g,i=window.__cdssInitDataInfo.imgUrl+"?"+b+h+"&data="+(new Date).getTime(),j=this.get("#cdss_maidian_img");j.src=i},queryUrlParam:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!==c?decodeURIComponent(c[2]):null},getElementCursorPosition:function(a){try{var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}catch(d){window.getElementCursorPosition=d}},setElementCursorPosition:function(a,b){try{if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),"TEXTAREA"==a.tagName?(c.moveEnd("character",b-1),c.moveStart("character",b-1)):(c.moveEnd("character",b),c.moveStart("character",b)),c.select()}}catch(d){window.setElementCursorPosition=d}},bulidDetailUrl:function(a,b){var c=JSON.parse(Cdss.___userOptions),d=this.getElementParent(a),e=this.getElementAttr(d,"name"),f=this.getElementAttr(d,"title"),g=this.getElementAttr(d,"detail"),h=this.getElementAttr(d,"mayo"),i=this.getElementAttr(d,"treatment"),j=this.getElementAttr(d,"reference"),k=[];return k.push("userGuid="+c.userGuid),k.push("doctorGuid="+c.doctorGuid),k.push("serialNumber="+c.serialNumber),k.push("authKey="+c.authKey),k.push("i18n="+c.i18n),k.push("department="+c.department),k.push("doctorName="+c.doctorName),k.push("hospitalGuid="+c.hospitalGuid),k.push("diseaseId="+e),k.push("disName="+f),k.push("tabType="+b),k.push("hasDetail="+g),k.push("hasMayo="+h),k.push("hasTreatment="+i),k.push("hasReference="+j),Cdss.urls.open_detail.online+"?"+k.join("&")},setCookie:function(a,b,c){var d=new Date;d.setTime(d.getTime()+c),document.cookie=a+"="+escape(b)+"; path=/; expires="+d.toGMTString()+";"},getCookie:function(a){for(var b=a+"=",c=0;c<=document.cookie.length;){var d=c+b.length;if(document.cookie.substring(c,d)==b)return-1==(endOfCookie=document.cookie.indexOf(";",d))&&(endOfCookie=document.cookie.length),unescape(document.cookie.substring(d,endOfCookie));if(c=document.cookie.indexOf(" ",c)+1,0==c)break}return""},bodyClickEvent:function(a,b,c){var d=this;try{for(var e=c||window.event,f=e.srcElement||e.target,g=d.getElementParent(f),h=f.className,i=g.className,j=g.id,k=["cdss-im-mk","cdss_assistedmarks_selected","cdss-diagnoses-item-add","cdss-diagnoses-details-btn","cdss-diagnoses-disposes-btn","cdss-diagnoses-mayo-btn","cdss-diagnoses-chronic-btn","cdss-time-panel","cdss-diagnoses-identify-btn"],l=!1,m=0;m<k.length;m++){var n=k[m];if(-1!=h.indexOf(n)||-1!=i.indexOf(n)||-1!=j.indexOf(n)){l=!0;break}}l||d.setCurrentEntityData(b,"1001","body")}catch(c){}},bulidTouchBar:function(a){var b=this,c=b.get("#cdss_time_box_place");this.renderTemplate(c,"tpl/time",{}),this.unbind(document.body,"onclick"),this.bind(document.body,"onclick",function(c){b.bodyClickEvent(this,a,c)});var d=this.get("#cdss_open_timepanle");this.unbind(d,"onclick"),this.bind(d,"onclick",function(){var a=b.get("#cdss_time_box_place");b.toggleClass(a,"active"),b.toggleClass(this,"active")});var e=this.getElementChilds("#cdss_time_panel");this.unbind(e,"onclick"),this.bind(e,"onclick",function(){var c=this.innerHTML;if(a.isOnTouchTime)a.cdssOnTouchTime.call(this,c);else{var d={name:c,sysType:"time",isActive:!0};b.setComplaint(a,{},d)}})},fixEvent:function(e){if(!window.event&&!e){for(var r,eventExec="arguments.callee.caller";!r;)eventExec+=".caller",r=eval(eventExec+".arguments[0]"),r&&"[object MouseEvent]"!=r.toString()&&(r=null);return r}return window.event||e},dragElement:function(){var a={},b=this;return a.init=function(a,b){a.onmousedown=this.start,a.dragEnd=this.end,b&&(a.___cback=b)},a.start=function(c){var d,c=b.fixEvent(c);c.preventDefault&&c.preventDefault(),a.o=d=this,d.x=c.clientX-a.o.offsetLeft,d.y=c.clientY-a.o.offsetTop,document.onmousemove=a.move,document.onmouseup=a.end},a.move=function(c){var d,e,c=b.fixEvent(c);d=c.clientX-a.o.x,e=c.clientY-a.o.y,a.o.style.left=d+"px",a.o.style.top=e+"px",a.o.___cback&&a.o.___cback.call(a.o,d,e)},a.end=function(){a.o=document.onmousemove=document.onmouseup=null},a},bindInputTimer:function(a,b,c){var d=a.value;a.onfocus=function(){a._searchInputTimer?(clearInterval(a._searchInputTimer),a._searchInputTimer=null):a._searchInputTimer=setInterval(function(){var c=a.value;window.needShowSuggest||(d=c,window.needShowSuggest=!0),d!=c&&(d=c,b&&b.call(a))},100)},a.onblur=function(){a._searchInputTimer&&(clearInterval(a._searchInputTimer),a._searchInputTimer=null,c&&c.call(a))}},bindInputListTimer:function(a,b,c){a=a||[];for(var d=0;d<a.length;d++){var e=a[d];!function(a){var d=a.value;a.onfocus=function(){a._searchInputTimer?(clearInterval(a._searchInputTimer),a._searchInputTimer=null):a._searchInputTimer=setInterval(function(){var c=a.value;d!=c&&(d=c,b&&b.call(a))},100)},a.onblur=function(){a._searchInputTimer&&(clearInterval(a._searchInputTimer),a._searchInputTimer=null,c&&c.call(a))}}(e)}},getCheckBoxChecked:function(a,b,c,d){for(var a=a||this.getInputList(b,c),e=[],f=0;f<a.length;f++){var g=a[f];if(("checkbox"==g.type||"radio"==g.type)&&g.checked)if(d){var h=this.getElementAttr(g,d);e.push(h)}else e.push(g)}return e},getInputList:function(a,b){a=a.replace(/\s/g,"");var c,d=/(\w+)\[(\S+)\]/,e=[],f=a.match(d);f?(c=f[1],e=f[2].split("][")):c=a;var g=this.get(c,b),h=[];if(e.length){for(var i=0;i<g.length;i++){for(var j=g[i],k=!0,l=0;l<e.length;l++){var m=e[l].split("=");if(m.length>1){if(j.getAttribute(m[0])!=m[1]){k=!1;break}}else if(null==j.getAttribute(m[0])){k=!1;break}}k&&h.push(j)}return h}return g}}}(),function(){var a=window.__cdssInitDataInfo;Cdss.isDeveloper=a.isDeveloper,Cdss.rootPath=a.rootPath,Cdss.urls={common_all_data:{develop:"/mockdata/home/common_all.json",online:Cdss.rootPath+"/v_2_2/common_all"},intelligent_diagnosis:{develop:"/mockdata/home/intelligent_diagnosis.json",online:Cdss.rootPath+"/v_2_2/diagnose_through_interrogation"},disease_detail:{develop:"/mockdata/detail/disease_detail.json",online:Cdss.rootPath+"/v_2_0/disease/detail"},mayo_disease_detail:{develop:"/mockdata/detail/mayo_disease_detail.json",online:Cdss.rootPath+"/v_2_0/disease/mayo"},disease_treatment:{develop:"/mockdata/handle/disease_treatment.json",online:Cdss.rootPath+"/v_2_0/disease/treatment"},search_disease_sug:{develop:"/mockdata/suggest/suggest.json",online:Cdss.rootPath+"/v_2_0/disease/popup"},search_disease:{develop:"/mockdata/search/search_disease.json",online:Cdss.rootPath+"/v_2_2/disease/search"},custom_disease:{develop:"/mockdata/search/custom_disease.json",online:Cdss.rootPath+"/v_2_2/custom_disease"},search_reference:{develop:"/mockdata/detail/disease_reference.json",online:Cdss.rootPath+"/v_2_0/disease/reference"},open_detail:{develop:a.staticPath+"/detail.html",online:a.staticPath+"/detail.html"},loadOtherDisease:{develop:"/mockdata/home/other_diseases.json",online:Cdss.rootPath+"/v_2_2/hospital_disease_different"},chronic_relevant:{develop:"/mockdata/handle/disease_treatment.json",online:Cdss.rootPath+"/v_2_0/disease/patientInstructor"},chronic_article_detail:{develop:"/mockdata/detail/disease_detail.json",online:Cdss.rootPath+"/v_2_0/disease/detail"},choronic_drug_init:{develop:"/mockdata/detail/initMedication.json",online:Cdss.rootPath+"/ncds/v_1_1/init_medication"},choronic_blood_init:{develop:"/mockdata/detail/bloodPressureExamInfo_acquire.json",online:Cdss.rootPath+"/ncds/v_1_1/blood_pressure_exam_info_acquire"},choronic_drug_detail:{develop:"/mockdata/detail/antihypertensiveDrug.json",online:Cdss.rootPath+"/ncds/v_1_1/antihypertensive_drug"},choronic_blood_save:{develop:"/mockdata/detail/antihypertensiveDrug.json",online:Cdss.rootPath+"/ncds/v_1_1/blood_pressure_exam_info_submit"},choronic_drug_save:{develop:"/mockdata/detail/antihypertensiveDrug.json",online:Cdss.rootPath+"/ncds/v_1_1/save_medication_record"},choronic_blood_assessment:{develop:"/mockdata/detail/bloodPressureExamInfo_estimate.json",online:Cdss.rootPath+"/ncds/v_1_1/blood_pressure_exam_info_estimate"},choronic_blood_recommend:{develop:"/mockdata/detail/hbpTreatment_recommend.json",online:Cdss.rootPath+"/ncds/v_1_1/hbp_treatment_recommend"},choronic_drug_indication:{develop:"/mockdata/detail/medicationIndication.json",online:Cdss.rootPath+"/ncds/v_1_1/medication_indication"},choronic_history_record:{develop:"/mockdata/detail/medicationIndication.json",online:Cdss.rootPath+"/ncds/v_1_1/history_estimate_record"},choronic_copy_prescription:{develop:"/mockdata/detail/medicationIndication.json",online:Cdss.rootPath+"/ncds/v_1_1/copy_prescription"},diabetes_drug_detail:{develop:"/mockdata/diabetes/diabetes_drug_detail.json",online:Cdss.rootPath+"/ncds/v_1_0/chronicdisease/medicine"},diabetes_evalute_init:{develop:"/mockdata/diabetes/diabetes_evalute_init.json",online:Cdss.rootPath+"/ncds/v_1_0/chronicdisease/init"},diabetes_evalute_his:{develop:"/mockdata/diabetes/diabetes_evalute_his.json",online:Cdss.rootPath+"/ncds/v_1_0/chronicdisease/history"},diabetes_evalute_save:{develop:"/mockdata/diabetes/diabetes_evalute_his.json",online:Cdss.rootPath+"/ncds/v_1_0/chronicdisease/save"},diabetes_evalute_recommend:{develop:"/mockdata/diabetes/diabetes_evalute_recommend.json",online:Cdss.rootPath+"/ncds/v_1_0/chronicdisease/recommend"}}}(),function(){function a(){}function b(){}function c(){}function d(d,f,g,h,i){var j=g||1e4;window.XDomainRequest&&(e=new XDomainRequest,e&&(e.onerror=a,e.ontimeout=b,e.onprogress=c,e.onload=function(){i&&i(e.responseText)},e.timeout=j,e.open(f||"GET",d),e.send(h)))}Cdss.xdrAjax=function(a){d(a.url,a.type,a.time,a.data,a.success)};var e}(),Cdss.prototype.ChronicController=function(a){function b(){var a=document.createElement("div");G=a,a.id="cdss_pop_windowNew";H.appendChild(a),A.renderTemplate(a,"tpl/chronic",{}),a.className="cdssanimated cdssfadeInDown";var b=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,d=A.get(".cdss-panel-box",a);b>d[0].clientHeight?d[0].style.marginTop=(b-d[0].clientHeight)/2+"px":d[0].style.marginTop="5px";var e=(A.get("#cdss_pop_window"),A.get(".cdss_panel_closed_btn",a));A.bind(e,"onclick",function(){c()}),z()}function c(){var a=document.getElementById("cdss_pop_window_pop")||document.createElement("div");a.id="cdss_pop_window_pop",document.body.appendChild(a);var b=document.getElementById("cdss_pop_window_message")||document.createElement("div");b.id="cdss_pop_window_message",document.body.appendChild(b),A.renderTemplate(b,"tpl/chronic_popup",{});var c=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,e=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth;b.style.left=(e-b.clientWidth)/2+"px",b.style.top=(c-b.clientHeight)/2+"px";var f=A.get("#cdss_chronic_pop_save"),h=A.get("#cdss_chronic_pop_unsave"),i=A.get("#cdss_chronic_pop_cancel");A.unbind(f,"onclick"),A.bind(f,"onclick",function(){document.body.removeChild(b),document.body.removeChild(a),g(function(a,b){d(a,b);var c=A.get("#cdss_pop_window");c.className="cdssanimated cdssfadeOutUp",setTimeout(function(){document.body.removeChild(c)},300)})}),A.unbind(h,"onclick"),A.bind(h,"onclick",function(){document.body.removeChild(b),document.body.removeChild(a);var c=A.get("#cdss_pop_window");c.className="cdssanimated cdssfadeOutUp",setTimeout(function(){document.body.removeChild(c)},300);var d="spm=5.2.3.1";A.setImgUerlMaiDian(B,d)}),A.unbind(i,"onclick"),A.bind(i,"onclick",function(){document.body.removeChild(b),document.body.removeChild(a)})}function d(a,b){var c=A.get("#cdss_handler_panel"),d=A.getElementChilds("#cdss-drug-selected_ul"),e=b.antihypertensiveList||[];c||!d.length&&!e.length||(B.SearchPanelController("",null),window.is_cdss_chronic_in=!0);var f=A.get("#cdss-drug-selected_ul"),g=A.get("#cdss_chronic_result"),h=A.get("#cdss_diagnose_search_part");if(f&&d.length||e.length){var i=f||A.get("#cdss_copy_drug_ul");A.get("#cdss_chronic_result_content").innerHTML=i.innerHTML;var j=A.get(".cdss-close-copy-x",A.get("#cdss_chronic_result_content"));A.removeElement(j),A.setElementAttr(g,{style:"display:block"}),h&&A.setElementAttr(h,{style:"display:none"}),A.get("#cdss_search_input2").value="";var k=A.get(".cdss-close-x",g);A.unbind(k,"onclick"),A.bind(k,"onclick",function(){A.setElementAttr(g,{style:"display:none"})})}else g&&A.setElementAttr(g,{style:"display:none"});var l={};l.bloodPressure=a.bloodPressure;var m=A.get("#cdss_blood_level").innerHTML;l.bloodPressure.bloodLevel=m,l.targetBloodPressure=a.targetBloodPressure;for(var n=[],o=0;o<a.personalHistory.length;o++){var p=a.personalHistory[o];1==p.value&&n.push(p.description)}l.personalHistory=n;for(var q=[],o=0;o<a.pastMedicalHistory.length;o++){var p=a.pastMedicalHistory[o];1==p.value&&q.push(p.description)}l.pastMedicalHistory=q;for(var r=[],o=0;o<a.dangerFactors.length;o++){var p=a.dangerFactors[o];1==p.value&&r.push(p.description)}l.dangerFactors=r;for(var s=[],o=0;o<a.targetOrganDamages.length;o++){var p=a.targetOrganDamages[o];1==p.value&&s.push(p.description)}l.targetOrganDamages=s;var t=A.get("#cdss_factor_layer").innerHTML;l.factorLevel=t;for(var u=[],o=0;o<a.deeperConfirms.length;o++){var p=a.deeperConfirms[o];1==p.value&&u.push(p.description)}if(l.deeperConfirms=u,l.remark=a.remark,b){if(b.indication){for(var v=b.indication.split("-HM-"),w=[],o=0;o<v.length;o++){var x=A.get("#cdss_medication_"+v[o]);w.push(x.name)}l.indicationList=w}if(b.hypotensor){for(var y=b.hypotensor.split("-HM-"),z=[],o=0;o<y.length;o++){var x=A.get("#cdss_hypotensor_"+y[o]);z.push(x.name)}l.hypotensorList=z}}B.callListenChronicBack(l)}function e(a,b){var c="spm=5.1.2.1";if(a){c+="&age="+a.age+"&ageType="+encodeURIComponent(a.ageType)+"&gender="+a.gender;var d=a.bloodPressure;c+="&bloodPressure="+encodeURIComponent(d.systolicPressure+"/"+d.diastolicPressure);var e=a.targetBloodPressure;c+="&targetBloodPressure="+encodeURIComponent(e.systolicPressure+"/"+e.diastolicPressure);
var g=f(a.personalHistory);c+="&personalHistory="+encodeURIComponent(g.join("-HM-"));var h=f(a.pastMedicalHistory);c+="&pastMedicalHistory="+encodeURIComponent(h.join("-HM-"));var i=f(a.dangerFactors);c+="&dangerFactors="+encodeURIComponent(i.join("-HM-"));var j=f(a.targetOrganDamages);c+="&targetOrganDamages="+encodeURIComponent(j.join("-HM-"));var k=f(a.deeperConfirms);c+="&deeperConfirms="+encodeURIComponent(k.join("-HM-"))}if(b&&(b.indication&&(c+="&indication="+encodeURIComponent(b.indication)),b.hypotensor&&(c+="&hypotensor="+encodeURIComponent(b.hypotensor)),b.antihypertensiveList)){for(var l=[],m=0;m<b.antihypertensiveList.length;m++){var n=b.antihypertensiveList[m];l.push(n.antihypertensiveId)}c+="&antihypertensiveList="+encodeURIComponent(l.join("-HM-"))}A.setImgUerlMaiDian(B,c)}function f(a){var b=[];if(a)for(var c=0;c<a.length;c++){var d=a[c];1==d.value&&b.push(d.name)}return b}function g(a){var b,c=(G.bloodCache,i()),d=A.getElementChilds("#cdss_chronic_drug");d.length&&(b=h(),c.hypotensor=b.hypotensor,c.indication=b.indication),e(c,b),A.ajax(Cdss.urls.choronic_blood_save,{type:"POST",header:{Huimei_id:B.authKey,"api-extend-params":B.userOptions},data:c,success:function(b){if(0==b.head.error){var d=A.getElementChilds("#cdss_chronic_drug"),e=G.antihypertensiveList||[],f={};d.length?f=h():e.length&&(f.antihypertensiveList=e),d.length||e.length?A.ajax(Cdss.urls.choronic_drug_save,{type:"POST",header:{Huimei_id:B.authKey,"api-extend-params":B.userOptions},data:f,success:function(b){0==b.head.error&&(A.toast(B.contentEntity,"保存成功",1500),a&&a(c,f))},isDetailLoad:!0}):(A.toast(B.contentEntity,"保存成功",1500),a&&a(c,f))}},isDetailLoad:!0})}function h(){for(var a=A.get("#cdss_chronic_drug"),b={},c=A.get(".cdss-drug-indication"),d=A.getCheckBoxChecked(null,"input[type=checkbox]",c[0])||[],e=[],f=0;f<d.length;f++){var g=d[f];e.push(A.getElementAttr(g,"flag"))}b.indication=e.join("-HM-")||null;var h=A.get(".cdss_drug_use_div"),i=A.get("#cdss_drug_use_true");if(i.checked){for(var j=A.getCheckBoxChecked(null,"input[type=checkbox]",h[0]),k=[],f=0;f<j.length;f++){var g=j[f];k.push(A.getElementAttr(g,"flag"))}b.hypotensor=k.join("-HM-")||null}else b.hypotensor=null;for(var l=(A.get(".cdss-drug-detail",a)||[],document.getElementById("cdss-single-window")),m=document.getElementById("cdss-union-window"),n=A.getInputList("input[type=radio]",l),o=A.getInputList("input[type=radio]",m),p=n.concat(o),q=A.getCheckBoxChecked(p)||[],r=new Object,s=[],f=0;f<q.length;f++){var g=q[f],t=g.className.split(" "),u=t[0];if(!r[u]){var v=g.name.split("_"),w=v.pop(),x=A.getElementAttr(g,"drugname")+A.getElementAttr(g,"dosage");s.push({classificationId:w,antihypertensiveId:A.getElementAttr(g,"flag"),antihypertensive:x}),r[u]=g}}var y=G.antihypertensiveList||[];return s=s.concat(y),b.antihypertensiveList=s,b.antihypertensive=A.get("#cdss-drug-selected_ul").innerHTML,b}function i(){var a=G.bloodCache,b=A.get("#cdss_chronic_blood"),c={age:A.get("#cdss_blood_age").value,bloodPressure:{systolicPressure:A.get("#cdss_systolicPressure").value,diastolicPressure:A.get("#cdss_diastolicPressure").value},targetBloodPressure:{systolicPressure:A.get("#target_blood_systolicPressure").value,diastolicPressure:A.get("#target_blood_diastolicPressure").value}};c.ageType=G.selectInput.getValue().value;var d=A.getInputList("input[type=radio][name=cdss_blood_sex]"),e=A.getCheckBoxChecked(d);c.gender=e[0].value;var f=a.personalHistory,g=A.get(".cdss-personal",b);f=k(f,g[0]),c.personalHistory=f;var h=a.pastMedicalHistory,i=A.get(".cdss-past-medical-his",b);h=k(h,i[0]),c.pastMedicalHistory=h;var j=a.dangerFactors,l=A.get(".cdss-danger-factors",b);j=k(j,l[0]),c.dangerFactors=j;var m=a.targetOrganDamages,n=A.get(".cdss-target-organ-damage",b);m=k(m,n[0]),c.targetOrganDamages=m;var o=a.deeperConfirms,p=A.get(".cdss-idtenty-div",b);return o=k(o,p[0]),c.deeperConfirms=o,c.remark=A.get("#cdss_blood_remark").value,c}function j(){var a=i(),b=A.get("#cdss_personal_pregnancy"),c="";0==a.gender&&b.checked?c="此用药流程不适合妊娠期妇女使用，建议上转至二级或以上医院就诊。":a.age&&(parseInt(a.age)<=18&&"岁"==a.ageType||parseInt(a.age)<=216&&"月"==a.ageType||parseInt(a.age)<=6480&&"天"==a.ageType)?c="患者年龄小于18岁，此用药流程不适合青少年型高血压患者使用":a.age||a.bloodPressure.systolicPressure&&a.bloodPressure.diastolicPressure?a.age?a.bloodPressure.systolicPressure&&a.bloodPressure.diastolicPressure||(c="为了更好的使用高血压用药流程，请先补充患者血压值。"):c="为了更好的使用高血压用药流程，请先补充患者年龄。":c="为了更好的使用高血压用药流程，请先补充患者年龄及血压值。";var d=A.getElementChilds("#cdss_chronic_drug");if(d.length){var e=A.get("#cdss-drug-for-use"),f=A.get("#cdss_drug_none_desc");c?(A.setElementAttr(e,{style:"display:none"}),A.setElementAttr(f,{style:"display:block;height:290px"}),A.get("#cdss_drug_none_cont").innerHTML=c):(A.setElementAttr(e,{style:"display:block"}),A.setElementAttr(f,{style:"display:none;"}))}}function k(a,b){for(var c=A.getCheckBoxChecked(null,"input[type=checkbox]",b)||[],d=new Object,e=0;e<a.length;e++){var f=a[e];f.value=0,d[f.name]=f}for(var e=0;e<c.length;e++){var g=c[e],h=A.getElementAttr(g,"flag");d[h].value=1}return a}function l(){var a="spm=5.1.1.1";A.setImgUerlMaiDian(B,a);var b=A.get("#cdss_chronic_blood"),c=A.getElementChilds("#cdss_chronic_blood"),d=window.hisQueryParam||{},e={gender:d.gender,age:d.age,ageType:d.ageType,height:d.height,waistline:d.waistline,weight:d.weight};c.length||A.ajax(Cdss.urls.choronic_blood_init,{type:"POST",header:{Huimei_id:B.authKey,"api-extend-params":B.userOptions},data:e,success:function(a){if(0==a.head.error){var c=window.hisQueryParam||{},d=a.body;d.age=c.age||d.age,c.age?d.ageType=c.ageType:d.ageType=d.ageType,d.gender=c.gender||d.gender,d.bloodPressure=d.bloodPressure||{},d.bloodPressure.systolicPressure=c.highBldPress||"",d.bloodPressure.diastolicPressure=c.lowBldPress||"",d.targetBloodPressure=d.targetBloodPressure||{},d.targetBloodPressure.systolicPressure=d.targetBloodPressure.systolicPressure||"",d.targetBloodPressure.diastolicPressure=d.targetBloodPressure.diastolicPressure||"",A.renderTemplate(b,"tpl/chronic_blood",a.body),m(a.body),G.bloodCache=a.body,q()}},isDetailLoad:!0})}function m(a){var b=G,c=A.get("#cdss_chronic_blood"),d=[{value:"岁",text:"岁"},{value:"月",text:"月"},{value:"天",text:"天"}];G.selectInput=jss("#cdss_blood_agetype").select({height:30,defaultValue:a.ageType||"岁",options:d,calback:function(a){q(),j()}});var e=A.getInputList("input[type=radio][name=cdss_blood_sex]");A.bind(e,"onclick",function(){var a=this,b=A.get(".cdss-personal",c);0==a.value?A.setElementAttr(b,{style:"display:block"}):A.setElementAttr(b,{style:"display:none"}),j()});var f=A.get(".cdss-blood-his",c);A.bind(f,"onclick",function(){p();var a="spm=5.1.5.1";A.setImgUerlMaiDian(B,a)});var g=A.get("#cdss_copy_drug_btt");A.bind(g,"onclick",function(){n(this);var a="spm=5.1.6.1";A.setImgUerlMaiDian(B,a)});for(var h=A.get(".cdss-personal",c),i=A.getInputList("input[type=checkbox]",h[0]),k=A.get("#cdss-personal-result"),l=a.personalHistory,m=0;m<l.length;m++)if(1==l[m].value){A.setElementAttr(k,{style:"display:block"});break}A.bind(i,"onclick",function(){var a=A.getCheckBoxChecked(i);a.length?A.setElementAttr(k,{style:"display:block"}):A.setElementAttr(k,{style:"display:none"}),j()});var o=A.get(".cdss-help",c),r=A.get("i",o[0]),s=A.get(".cdss-target-div",c)[0];A.bind(r,"onclick",function(){var a="spm=5.1.7.1";return A.setImgUerlMaiDian(B,a),"none"==s.style.display?s.style.display="block":s.style.display="none",!1});var t=A.get(".cdss-close-x",c);A.bind(t,"onclick",function(){var a=A.getElementParent(this);A.setElementAttr(a,{style:"display:none"})});var v=A.get(".cdss-idtenty-bt",c),w=A.get(".cdss-idtenty-div",c);A.bind(v,"onclick",function(){return"none"==w[0].style.display?w[0].style.display="block":w[0].style.display="none",!1});for(var x=A.getInputList("input[type=checkbox]",w[0]),y=A.get("#cdss-identity-result"),z=a.deeperConfirms,m=0;m<z.length;m++)if(1==z[m].value){A.setElementAttr(y,{style:"display:block"});break}A.bind(x,"onclick",function(){var a=A.getCheckBoxChecked(x);a.length?A.setElementAttr(y,{style:"display:block"}):A.setElementAttr(y,{style:"display:none"})});var C=A.get("#cdss_blood_advice");A.bind(C,"onclick",function(){var a="spm=5.1.3.1";A.setImgUerlMaiDian(B,a);var b=A.get(".blood_systolicPressure",c)[0].innerHTML,d=A.get(".blood_diastolicPressure",c)[0].innerHTML;A.get("#target_blood_systolicPressure").value=b,A.get("#target_blood_diastolicPressure").value=d});var D=A.get("#cdss_btt_transfer"),E=A.get(".cdss-transfer",c);A.bind(D,"onclick",function(){if("none"==E[0].style.display){E[0].style.display="block";var a=A.get(".cdss-pde-left",c);a[0].scrollTop=a[0].scrollTop+300}else E[0].style.display="none";var b="spm=5.1.4.1";return A.setImgUerlMaiDian(B,b),!1});var F=A.get(".cdss-btt-menu",c);A.bind(F,"onclick",function(){for(var a=A.getElementAttr(this,"flag"),c=A.get(".head-url",b),d=A.get("li",c[0]),e=0;e<d.length;e++){var f=d[e],g=A.getElementAttr(f,"flag");if(g==a){f.click();break}}});var H=A.get(".cdss-drug-indication",A.get("#cdss_chronic_drug")),I=A.getInputList("input[type=checkbox]",c);A.bind(I,"onclick",function(){var a=this;if(null!=a.getAttribute("desc")){var b=A.getInputList("input[type=checkbox][name="+a.getAttribute("desc")+"]",H[0]);b&&b.length&&(b[0].checked=a.checked,u())}q()});var J=A.get("#cdss_systolicPressure"),K=A.get("#cdss_diastolicPressure"),L=A.get("#cdss_blood_age"),M=A.get("#cdss_blood_remark");A.bindInputTimer(J,function(){q(),j()}),A.bindInputTimer(K,function(){q(),j()}),A.bindInputTimer(L,function(){q(),j()}),A.bindInputTimer(M,function(){var a=this,b=A.get("#cdss_drug_remark");b&&(b.value=a.value)});var N=A.get("#cdss_pbdl_dd_danger"),O=A.getInputList("label[comment]",N);A.bind(O,"onmouseover",function(){var a=this,b=A.getElementAttr(a,"comment");if(b){var c=a.offsetTop,d=a.offsetLeft,e=A.get("#cdss_pop_up_show_mess");if(!e){var e=document.createElement("span");e.id="cdss_pop_up_show_mess",e.className="cdss-pop-up-bl"}N.appendChild(e),e.style.display="",e.style.left=d+"px",e.style.top=c+20+"px",e.style.width="",e.innerHTML=b,d+e.clientWidth>943&&(e.style.width=e.clientWidth-24+"px")}}),A.bind(O,"onmouseout",function(){var a=A.get("#cdss_pop_up_show_mess");a&&(a.style.display="none")})}function n(a){var b=A.get("#cdss_chronic_blood");A.get(".cdss-copy-drug-conent",b);G.bloodCache.prescription=G.bloodCache.prescription||{},G.antihypertensiveList=G.bloodCache.prescription.antihypertensiveList||[];var c=A.get("#cdss-drug-selected_ul");if(c){var d=G.antihypertensiveList||[];d.length&&o(d,c)}a.disabled=!0,a.value="已复制",a.style.color="#666666"}function o(a,b){var c=A.get("#cdss_chronic_drug"),d=[],e=[];A.setElementAttr(A.get("#cdss_drug_selected_panel"),{style:"display:block"});for(var f=0;f<a.length;f++){var g=a[f],h=A.get("#cdss-classification-id-"+g.classificationId);if(!h){var i=document.createElement("li");i.id="cdss-classification-id-"+g.classificationId,i.name="cdss_drug_"+g.antihypertensiveId,i.innerHTML=g.antihypertensive+'<span class="cdss-close-copy-x"></span>',b.appendChild(i);var j=A.get(".cdss_drug_"+g.antihypertensiveId,c);j.length?e.push(j[0]):d.push(g)}}G.antihypertensiveList=d;for(var f=0;f<e.length;f++)e[f].click();var k=A.get(".cdss-close-copy-x",b);return A.unbind(k,"onclick"),A.bind(k,"onclick",function(){var b=A.getElementParent(this),d=A.get("."+b.name,c);if(d.length)d[0].click();else for(var e=b.id.split("-").pop(),f=0;f<a.length;f++){var g=a[f];if(g.classificationId==e){a.splice(f,1),A.removeElement(b);var h=A.getElementChilds("#cdss-drug-selected_ul");h.length||A.setElementAttr(A.get("#cdss_drug_selected_panel"),{style:"display:none"})}}}),e}function p(){var a=(A.get("#cdss_chronic_blood"),A.get("#cdss_bood_his_tab")),b=(A.getElementChilds("#cdss_bood_his_tab"),A.hasClass(a,"active"));b?A.removeClass(a,"active"):A.ajax(Cdss.urls.choronic_history_record,{type:"POST",header:{Huimei_id:B.authKey,"api-extend-params":B.userOptions},data:{},success:function(b){if(0==b.head.error){var c=b.body.estimateRecordResponseList||[];A.renderTemplate(a,"tpl/chronic_blood_record",{recordList:c}),A.addClass(a,"active")}},isDetailLoad:!0})}function q(){var a=A.get("#cdss_chronic_blood"),b=i();A.ajax(Cdss.urls.choronic_blood_assessment,{type:"POST",header:{Huimei_id:B.authKey,"api-extend-params":B.userOptions},data:b,success:function(b){if(0==b.head.error){var c=b.body,d=A.get("#cdss_blood_level"),e=A.get("#cdss_factor_layer"),f=A.get(".blood_systolicPressure",a),g=A.get(".blood_diastolicPressure",a);c.bloodPressureLevel?(A.setElementAttr(A.get("#cdss_blood_level_div"),{style:"display:block"}),-1==c.bloodPressureLevel.level?A.setElementAttr(A.get("#cdss_blood_level_title"),{style:"display:none"}):A.setElementAttr(A.get("#cdss_blood_level_title"),{style:"display:inline-block"}),d.innerHTML=c.bloodPressureLevel.desc):A.setElementAttr(A.get("#cdss_blood_level_div"),{style:"display:none"}),c.bloodPressureRiskLevel?(e.innerHTML=c.bloodPressureRiskLevel.desc,A.setElementAttr(A.get("#cdss_factor_layer_div"),{style:"display:block"})):A.setElementAttr(A.get("#cdss_factor_layer_div"),{style:"display:none"}),f[0].innerHTML=c.bloodPressureRecommended.systolicPressure,g[0].innerHTML=c.bloodPressureRecommended.diastolicPressure}},isDetailLoad:!0})}function r(a,b){var c=i();c.drugIds=a,A.ajax(Cdss.urls.choronic_blood_recommend,{type:"POST",header:{Huimei_id:B.authKey,"api-extend-params":B.userOptions},data:c,success:function(a){if(0==a.head.error){var c=a.body,d=c.conclusion?c.conclusion.split("##"):[];G.bloodTreatementList=d,G.treatmentRecommended=c.drugTreatmentRecommended,b&&b()}},isDetailLoad:!0})}function s(){var a="spm=5.2.1.1";A.setImgUerlMaiDian(B,a);var b=A.get("#cdss_chronic_drug"),c=A.getElementChilds("#cdss_chronic_drug");if(c.length){for(var d=A.get(".cdss_drug_use_div",b),e=A.getCheckBoxChecked(null,"input[type=checkbox]",d[0]),f=[],g=0;g<e.length;g++){var h=e[g];f.push(A.getElementAttr(h,"flag"))}r(f,function(){u()})}else{var k=window.hisQueryParam||{},l=i(),m={gender:l.gender,age:l.age,ageType:l.ageType,height:k.height,waistline:k.waistline};A.ajax(Cdss.urls.choronic_drug_init,{type:"POST",header:{Huimei_id:B.authKey,"api-extend-params":B.userOptions},data:m,success:function(a){if(0==a.head.error){var c=w(a.body);A.renderTemplate(b,"tpl/chronic_drug",c),j();var d=A.get("#cdss-drug-selected_ul");d.innerHTML="";var e=G.antihypertensiveList||[];e.length&&o(e,d),G.drugDataCache=c,t(c),r(c.hypotensorResult,function(){u()})}},isDetailLoad:!0})}}function t(a){for(var b=A.get("#cdss_chronic_drug"),c=A.get("#cdss_chronic_blood"),e=A.getInputList("input[type=checkbox][desc]",c),f=A.get(".cdss-drug-indication",b),h=0;h<e.length;h++){var i=e[h],j=i.getAttribute("desc"),k=A.getInputList("input[type=checkbox][name="+j+"]",f[0]);k&&k.length&&(k[0].checked=i.checked)}var l=A.get(".cdss-drug-show-more",b);A.bind(l,"onclick",function(){var a=this,c=A.hasClass(a,"active"),d=A.get(".cdss_drug_indicat_b",b);if(c){A.removeClass(a,"active"),a.innerHTML="[ 更多 ]";for(var e=0;e<d.length;e++){var f=d[e];0==e?A.setElementAttr(f,{style:"height:61px"}):A.setElementAttr(f,{style:"height:31px"})}}else A.addClass(a,"active"),a.innerHTML="[ 收起 ]",A.setElementAttr(d,{style:"height:inherit"})});var m=A.get(".cdss_antihypertensive_t",b);A.bind(m,"onclick",function(){var a=this,c=A.getElementAttr(a,"classification"),d=A.getElementAttr(a,"classification_id"),e="spm=5.2.2.1&classificationId="+d;A.setImgUerlMaiDian(B,e);var f,g=A.getElementAttr(a,"flag");f="single"==g?A.get(".single",b):A.get(".union",b);var h=A.get(".cdss_antihypertensive_t",f[0]);A.hasClass(a,"active")?A.removeClass(h,"active"):(A.removeClass(h,"active"),A.addClass(a,"active")),v(c,d,g,a)});var n=A.get(".cdss-close-x",b);A.bind(n,"onclick",function(){var a=A.getElementParent(this);A.setElementAttr(a,{style:"display:none"});var b=A.getElementParent(this,".cdss-drug-con"),c=A.get(".cdss_antihypertensive_t",b);A.removeClass(c,"active")});var o=A.get(".cdss_drug_use_div",b),p=A.getInputList("input[type=checkbox]",o[0]);A.bind(p,"onclick",function(){for(var a=A.getCheckBoxChecked(null,"input[type=checkbox]",o[0]),b=[],c=0;c<a.length;c++){var d=a[c];b.push(A.getElementAttr(d,"flag"))}r(b,function(){u()})});var s=A.getInputList("input[type=radio][name=cdss_drug_use]");if(A.bind(s,"onclick",function(){var a=this,c=A.get(".cdss_drug_use_div",b),d=[];if(1==a.value){A.setElementAttr(c,{style:"display:block"});for(var e=A.getCheckBoxChecked(null,"input[type=checkbox]",o[0]),f=0;f<e.length;f++){var g=e[f];d.push(A.getElementAttr(g,"flag"))}}else{A.setElementAttr(c,{style:"display:none"});for(var f=0;f<p.length;f++){var g=p[f];g.checked=!1}}r(d,function(){u()})}),a.hypotensorResult&&a.hypotensorResult.length){A.get("#cdss_drug_use_true").checked=!0;var t=A.get(".cdss_drug_use_div",b);A.setElementAttr(t,{style:"display:block"})}var w=A.get(".cdss-drug-indication",b),x=A.getInputList("input[type=checkbox]",w[0]);A.bind(x,"onclick",function(){var a=this,d=A.getInputList("input[type=checkbox][desc="+a.name+"]",c);if(d&&d.length){d[0].checked=a.checked,q();for(var e=A.get(".cdss_drug_use_div",b),f=A.getCheckBoxChecked(null,"input[type=checkbox]",e[0]),g=[],h=0;h<f.length;h++){var i=f[h];g.push(A.getElementAttr(i,"flag"))}r(g,function(){u()})}else u()});var y=A.get("#cdss_chronic_save"),z=A.get("#cdss_chronic_cancel");A.bind(y,"onclick",function(){g(function(a,b){d(a,b);var c=A.get("#cdss_pop_window");c.className="cdssanimated cdssfadeOutUp",setTimeout(function(){document.body.removeChild(c)},300)})});var C=A.get("#cdss_drug_remark");C.value=A.get("#cdss_blood_remark").value,A.bindInputTimer(C,function(){var a=this,b=A.get("#cdss_blood_remark");b.value=a.value}),A.bind(z,"onclick",function(){var a=A.get("#cdss_pop_window");a.className="cdssanimated cdssfadeOutUp",setTimeout(function(){document.body.removeChild(a)},300);var b="spm=5.2.3.1";A.setImgUerlMaiDian(B,b)})}function u(){for(var a=A.get("#cdss_chronic_drug"),b=A.get(".cdss-drug-indication",a),c=A.getCheckBoxChecked(null,"input[type=checkbox]",b[0]),d=[],e=0;e<c.length;e++){var f=c[e];d.push(A.getElementAttr(f,"flag"))}var g={indicationList:d};A.ajax(Cdss.urls.choronic_drug_indication,{type:"POST",header:{Huimei_id:B.authKey,"api-extend-params":B.userOptions},data:g,success:function(b){if(0==b.head.error){for(var c=b.body,d=A.get(".single",a),e=A.get("i",d[0]),f=0;f<e.length;f++)A.removeElement(e[f]);for(var g=A.get(".union",a),h=A.get("i",g[0]),f=0;f<h.length;f++)A.removeElement(h[f]);var i=c.singleInfer||[];if(2==G.treatmentRecommended){var j=c.singleIndicationList||[],k=c.defaultSigleList||[];if(j.length)for(var f=0;f<j.length;f++){var l=document.createElement("i");l.innerHTML=" [推荐] ";var m=A.get("#drug_single_"+j[f]);m.appendChild(l)}else for(var f=0;f<k.length;f++){var l=document.createElement("i");l.innerHTML=" [推荐] ";var m=A.get("#drug_single_"+k[f]);m.appendChild(l)}i=c.singleInfer||[]}else if(3==G.treatmentRecommended){var n=c.uniteIndicationList||[],o=c.defaultUniteList||[];if(n.length)for(var f=0;f<n.length;f++){var l=document.createElement("i");l.innerHTML=" [推荐] ";var m=A.get("#drug_single_"+n[f]);m.appendChild(l)}else for(var f=0;f<o.length;f++){var l=document.createElement("i");l.innerHTML=" [推荐] ";var m=A.get("#drug_single_"+o[f]);m.appendChild(l)}i=c.uniteInfer||[]}for(var p=c.singleTabooList||[],q=c.uniteTabooList||[],r=p.concat(q),f=0;f<r.length;f++){var l=document.createElement("i");l.innerHTML=" [禁忌] ",l.style.color="red";var m=A.get("#drug_single_"+r[f]);m.appendChild(l)}for(var s=c.singleCautionList||[],t=c.uniteCautionList||[],u=s.concat(t),f=0;f<u.length;f++){var l=document.createElement("i");l.innerHTML=" [慎用] ",l.style.color="red";var m=A.get("#drug_single_"+u[f]);m.appendChild(l)}var v=A.get("#cdss_drug_result_ul");v.innerHTML="";var w=A.get("#cdss_intell_result_ul"),x=A.getInputList("li",w),y=(x.length,c.resultList||[]);if(y.length){A.setElementAttr(A.get(".cdss-drug-result",a),{style:"display:inline-block"});for(var f=0;f<y.length;f++){var z=document.createElement("li"),B=f+1+"."+y[f];z.innerHTML=B.replace("禁忌","<b>禁忌</b>"),v.appendChild(z)}}else A.setElementAttr(A.get(".cdss-drug-result",a),{style:"display:none"});var C=G.bloodTreatementList;if(C.length>0&&G.treatmentRecommended&&(C=C.concat(i)),w.innerHTML="",C&&C.length)for(var f=0;f<C.length;f++){var z=document.createElement("li"),B=f+1+"."+C[f];z.innerHTML=B.replace("禁忌","<b>禁忌</b>"),w.appendChild(z)}else w.innerHTML="<li>药物治疗请参考相关指南</li>"}},isDetailLoad:!0})}function v(a,b,c,d){var e="single"==c?"cdss-single-window":"cdss-union-window",f=A.get("#cdss_chronic_drug"),g=document.getElementById(e);A.setElementAttr(g,{style:"display:block"});var h=A.get("#cdss_drug_detail_"+b);if(h){var i=A.get(".cdss-single-div",g);A.setElementAttr(i,{style:"display:none"}),A.hasClass(d,"active")?A.setElementAttr(h,{style:"display:block"}):A.setElementAttr(h,{style:"display:none"})}else A.ajax(Cdss.urls.choronic_drug_detail,{type:"POST",header:{Huimei_id:B.authKey,"api-extend-params":B.userOptions},data:{classification:a},success:function(d){if(0==d.head.error){var e=A.get(".cdss-single-div",g);A.setElementAttr(e,{style:"display:none"});var h=document.createElement("div");h.id="cdss_drug_detail_"+b,h.className="cdss-single-div",g.appendChild(h);var i=d.body;A.renderTemplate(h,"tpl/chronic_drug_detail",{data:i,type:c,classification:a});var j=A.get(".cdss-pde-left",f),k="single"==c?A.get(".cdss-drug-single-title",f):A.get(".cdss-drug-union-title",f);j[0].scrollTop=k[0].offsetTop-10;for(var l=A.get(".inner-table",h)||[],m=0;m<l.length;m++){var n=l[m],o=A.getElementParent(n);n.style.height=o.clientHeight+"px"}for(var p=G.radioCheckedList||[],m=0;m<p.length;m++)for(var n=p[m],q=n.className.split(" "),r=A.get("."+q[0],f),s=0;s<r.length;s++){r[s].checked=!0;var t=A.hasClass(r[s],"active");t||A.addClass(r[s],"active")}var u=A.getInputList("input[type=radio]",h);A.unbind(u,"onclick"),A.bind(u,"onclick",function(a){var b=this,c=A.hasClass(b,"active"),d=b.className.split(" "),e=A.get("."+d[0],f)||[];if(c){for(var g=0;g<e.length;g++)e[g].checked=!1;A.removeClass(e,"active")}else for(var g=0;g<e.length;g++){e[g].checked=!0;var h=document.getElementsByName(e[g].name);A.removeClass(h,"active"),A.addClass(e[g],"active")}for(var i=document.getElementById("cdss-single-window"),j=document.getElementById("cdss-union-window"),k=A.getInputList("input[type=radio]",i),l=A.getInputList("input[type=radio]",j),m=k.concat(l),n=A.getCheckBoxChecked(m)||[],o=new Object,p=[],g=0;g<n.length;g++){var q=n[g],r=q.getAttribute("flag");o[r]||(p.push(q),o[r]=q)}G.radioCheckedList=p;var s=G.antihypertensiveList||[],t=A.get("#cdss-drug-selected_ul");if(t.innerHTML="",p.length>0||s.length>0){A.setElementAttr(A.get("#cdss_drug_selected_panel"),{style:"display:block"});for(var u=[],g=0;g<p.length;g++){var q=p[g],v=q.name.split("_"),w=v.pop();u.push(w);var x=document.createElement("li");A.setElementAttr(x,{class_id:w}),x.id="cdss-classification-id-"+w,x.name=q.className.split(" ")[0],x.innerHTML=A.getElementAttr(q,"drugname")+A.getElementAttr(q,"dosage")+'<span class="cdss-close-copy-x"></span>',t.appendChild(x)}for(var g=0;g<s.length;g++){var y=s[g],x=document.createElement("li");x.id="cdss-classification-id-"+y.classificationId,x.name="cdss_drug_"+y.antihypertensiveId,x.innerHTML=y.antihypertensive+'<span class="cdss-close-copy-x"></span>',t.appendChild(x)}var z=A.get(".cdss-close-copy-x",t);A.unbind(z,"onclick"),A.bind(z,"onclick",function(){var a=A.getElementParent(this),b=A.get("."+a.name,f);if(b.length)b[0].click();else for(var c=a.id.split("-").pop(),d=G.antihypertensiveList||[],e=0;e<d.length;e++){var g=d[e];if(g.classificationId==c){d.splice(e,1),A.removeElement(a);var h=A.getElementChilds("#cdss-drug-selected_ul");h.length||A.setElementAttr(A.get("#cdss_drug_selected_panel"),{style:"display:none"})}}})}else A.setElementAttr(A.get("#cdss_drug_selected_panel"),{style:"display:none"})});for(var v=G.antihypertensiveList||[],w=[],x=[],m=0;m<v.length;m++){var n=v[m],y=A.get("#cdss-classification-id-"+n.classificationId),r=A.get(".cdss_drug_"+n.antihypertensiveId,f),z=r[0];if(y&&r.length){var t=A.hasClass(z,"active");t||x.push(z)}else w.push(n)}if(G.antihypertensiveList=w,x.length)for(var m=0;m<x.length;m++)x[m].click()}},isDetailLoad:!0})}function w(a){for(var b=new Object,c=0;c<a.indicationList.length;c++)for(var d=a.indicationList[c].indicationList||[],e=0;e<d.length;e++){var f=d[e];b[f.indicationId]=f}for(var g=a.indicationResult||[],c=0;c<g.length;c++)b[g[c]].checked=!0;for(var h=new Object,c=0;c<a.antihypertensiveList.length;c++){var f=a.antihypertensiveList[c];h[f.drugId]=f}for(var i=a.hypotensorResult||[],c=0;c<i.length;c++)h[i[c]].checked=!0;return a}function x(){var a="spm=5.3.1.1";A.setImgUerlMaiDian(B,a);var b=A.get("#cdss_chronic_intervene"),c=A.getElementChilds("#cdss_chronic_intervence");c.length||A.ajax(Cdss.urls.chronic_relevant,{type:"POST",header:{Huimei_id:B.authKey,"api-extend-params":B.userOptions},data:{diseaseId:E},success:function(a){return a.head.error?void A.toast(B.contentEntity,a.head.message,1500):void A.renderTemplate(b,"tpl/chronic_intervene",{content:a.body.docContentList})},isDetailLoad:!0})}function y(){var a="spm=5.4.1.1";A.setImgUerlMaiDian(B,a);var b=A.get("#cdss_chronic_relevant"),c=A.getElementChilds("#cdss_chronic_relevant");c.length||A.renderTemplate(b,"tpl/chronic_relevant",{})}function z(){panel=G;var a=A.get(".head-url",panel),b=A.get("li",a[0]),c=A.get(".cdss-show-tab",panel);A.bind(b,"onclick",function(){A.removeClass(b,"active"),A.removeClass(c,"active");var a=this,d=A.getElementAttr(a,"flag"),e=A.get("#cdss_chronic_"+d);switch(A.addClass(a,"active"),A.addClass(e,"active"),d){case"blood":l();break;case"drug":s();break;case"intervene":x();break;case"relevant":y();break;case"default":l()}}),b[0].click()}var A=Cdss.tool,B=this;if(B.userParam&&B.userParam.hasCS&&!a.isJson)try{var C=A.bulidDetailUrl(a,"chronicBlood");return A.setCurrentEntityData(B,100,C),B.cdssDetailurl=C,void window.sendCdssToNa({detailUrl:C})}catch(D){Cdss.___errorMsg=D}var E;if(a.isJson)E=a.id;else{var F=A.getElementParent(a);E=A.getElementAttr(F,"name")}var G="",H=document.getElementById("cdss_pop_window")||document.createElement("div");H.id="cdss_pop_window",H.style.zIndex="999999";document.body.appendChild(H);var I=A.get("#cdss_loading_part").cloneNode(!0);I.id="cdss_loading_part_clone",I.className="cdss-loading-tip-box-clone",H.appendChild(I),A.bind(window,"onresize",function(){var a=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,b=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,c=A.get(".cdss-panel-box",H),d=0;d=a>c[c.length-1].clientHeight?(a-c[c.length-1].clientHeight)/2+"px":"5px";for(var e=0;e<c.length;e++)c[e].style.marginTop=d;var f=document.getElementById("cdss_pop_window_message");f&&(a>f.clientHeight?(f.style.left=(b-f.clientWidth)/2+"px",f.style.top=(a-f.clientHeight)/2+"px"):(f.style.left=(b-f.clientWidth)/2+"px",f.style.top="5px"))}),b()},Cdss.prototype.DetailController=function(a,b,c){function d(b,g,h,j){function k(a){e.ajax(Cdss.urls.disease_treatment,{type:"POST",header:{Huimei_id:f.authKey,"api-extend-params":f.userOptions},data:{diseaseId:r.uuid},success:function(b){if(b.head.error)return void e.toast(f.contentEntity,b.head.message,1500);var c=e.get(".head-url",r),d={value:b.body,showFlag:a};e.renderTemplate(c[0],"tpl/ul",d),s={};for(var g=0;g<b.body.length;g++){var h=b.body[g];s[h.acId]=h.children,s.body=b.body}p();var i=e.get(".head-url",r);if("treatment"==r.tab){var j=e.get(".cdsstreatement",i[0]);j[0].click()}else if("detail"==r.tab){var k=e.get(".cdssdetail",i[0]);e.addClass(k[0],"active")}else if("mayo"==r.tab){var k=e.get(".cdssmayo",i[0]);e.addClass(k[0],"active")}},isDetailLoad:!0})}function l(a){for(var b=[],c={},d=0;d<a.length;d++){var e=a[d];if(e.articleReference&&!c[e.articleReference]){var f=e.articleReference.replace(/ /g,"");if(-1!=f.indexOf("、")){var g=f.split("、");b=b.concat(g)}else b.push(f);c[e.articleReference]=1}if(e.children&&e.children.length)for(var h=e.children,i=0;i<h.length;i++){var j=h[i];if(j.articleReference&&!c[j.articleReference]){b.push(j.articleReference.replace(/ /g,""));var f=j.articleReference.replace(/ /g,"");if(-1!=f.indexOf("、")){var g=f.split("、");b=b.concat(g)}else b.push(f);c[j.articleReference]=1}}}for(var k={},l=[],d=0;d<b.length;d++){var m=b[d];k[m]||(l.push(m),k[m]=!0)}return l}function m(a){var b="detail"==a?Cdss.urls.disease_detail:Cdss.urls.mayo_disease_detail;e.ajax(b,{type:"POST",header:{Huimei_id:f.authKey,"api-extend-params":f.userOptions},data:{diseaseId:r.uuid},success:function(b){if(b.head.error)return void e.toast(f.contentEntity,b.head.message,1500);var d=e.get(".cdss-p-body",r);if(e.renderTemplate(d[0],"tpl/detail_tab",{value:b.body}),"identify"===c&&setTimeout(function(){var a=e.getElementChilds("#cdss_menu_zhenduan"),b=e.getElementChilds("#cdss_menu_jianbiezhenduan");b.length?b[0].click():a.length&&a[0].click()},400),!t)if(t={hasDetail:b.body.hasDetail?"true":"false",hasMayo:b.body.hasMayo?"true":"false",hasTreatment:b.body.hasTreatment?"true":"false",hasReference:b.body.hasReference?"true":"false"},"detail"==a?t.hasDetail="true":"mayo"==a&&(n?t=n:""),"true"!=t.hasTreatment||s){e.get(".head-url",r);var g=e.get(".head-url",r),h={showFlag:t,value:s?s.body:[]};e.renderTemplate(g[0],"tpl/ul",h);var i=e.get(".head-url",r);if("detail"==a){var j=e.get(".cdssdetail",i[0]);e.addClass(j[0],"active")}else if("mayo"==a){var j=e.get(".cdssmayo",i[0]);e.addClass(j[0],"active")}p()}else k(t);q()},isDetailLoad:!0})}function o(){e.ajax(Cdss.urls.search_reference,{type:"POST",header:{Huimei_id:f.authKey,"api-extend-params":f.userOptions},data:{diseaseId:r.uuid},success:function(a){if(a.head.error)return void e.toast(f.contentEntity,a.head.message,1500);var b=e.get(".cdss-p-body",r);e.renderTemplate(b[0],"tpl/reference_tab",{value:a.body});var c=e.get(".reference-content",r),g=e.get("a",c[0]);e.bind(g,"onclick",function(){var a=this;e.hasClass(a,"disabled")||(r.style.display="none",d(a.name,a.title,"detail",!0))})},isDetailLoad:!0})}function p(){var a=e.get(".head-url",r),b=e.get("li",a[0]);e.bind(b,"onclick",function(){e.removeClass(b,"active");var a=e.get(".cdss-p-body",r);a[0].innerHTML="";var c=this;e.addClass(c,"active");var d=e.getElementAttr(c,"flag");if("detail"==d?(n=null,m("detail")):"mayo"==d?m("mayo"):"reference"==d&&o(),!d){var f=e.getElementAttr(c,"acid"),g=s[f],h=l(g);e.renderTemplate(a[0],"tpl/treatement_tab",{content:g,books:h}),q()}})}function q(){var a=!1,b=e.get(".cdss-dem-al",r);e.bind(b,"onclick",function(c){var d=this;e.removeClass(b,"active"),e.toggleClass(d,"active"),a=!0,window._cdss_mblock_index&&clearTimeout(window._cdss_mblock_index),window._cdss_mblock_index=setTimeout(function(){a=!1},200);var f=e.get(".cdss-pde-left",r),g=e.get("."+d.name,r);f[0].scrollTop=g[0].offsetTop-16});var c=e.get(".cdss-pde-left",r);e.bind(c,"onscroll",function(){var b=this.scrollTop;a||(window._cdssDetailScrollIndex&&clearTimeout(window._cdssDetailScrollIndex),window._cdssDetailScrollIndex=setTimeout(function(){for(var a=e.get(".cdss-pb-dl",r),c=0,d=0;d<a.length;d++){var f=a[d],g=f.offsetHeight;if(c+=g,c>b&&b>c-g||!b){var h=e.getElementAttr(f,"name"),i=e.get(".cdss-dem-al",r),j=e.get(".cdss_dm_bar_"+h,r);e.removeClass(i,"active"),e.addClass(j,"active");break}}},100))})}var r=document.createElement("div");r.id="cdss_pop_window"+b,r.uuid=b,r.tab=h;var s,t=null;i.appendChild(r);var u={key:g,i18n:Cdss.i18n,showFlag:n};e.renderTemplate(r,"tpl/detail",u),r.className="cdssanimated cdssfadeInDown";var v=document.documentElement||document.body;if(!a.isJson){var w=e.get(".cdss-panel-box",r);v.clientHeight>w[0].clientHeight?w[0].style.marginTop=(v.clientHeight-w[0].clientHeight)/2+"px":w[0].style.marginTop="5px"}j||"true"!=n.hasTreatment||k(n),("detail"==h||"mayo"==h)&&m(h);var x=e.get("#cdss_pop_window"),y=e.get(".cdss-panel-box",x);e.bind(y,"onclick",function(a){e.stopEvent(a)});var z=e.get(".cdss_panel_closed_btn",r);e.bind(z,"onclick",function(){
var a=e.get("#cdss_pop_window");a.className="cdssanimated cdssfadeOutUp",setTimeout(function(){document.body.removeChild(a)},300)});var A=e.get(".cdss_panel_back",r);e.bind(A,"onclick",function(){var a=e.get("#cdss_pop_window");a.removeChild(r);var b=e.getElementChilds("#cdss_pop_window");b[b.length-1].style.display="block"});var B=e.getElementChilds("#cdss_pop_window");a.isJson||(B.length>2?A[0].style.display="block":A[0].style.display="none"),p()}var e=Cdss.tool,f=this;if(f.userParam&&f.userParam.hasCS&&!a.isJson)try{var g=e.bulidDetailUrl(a,b);return e.setCurrentEntityData(f,100,g),f.cdssDetailurl=g,void window.sendCdssToNa({detailUrl:g})}catch(h){Cdss.___errorMsg=h}var i=document.getElementById("cdss_pop_window")||document.createElement("div");i.id="cdss_pop_window",i.style.zIndex="999999";document.body.appendChild(i);var j=e.get("#cdss_loading_part").cloneNode(!0);j.id="cdss_loading_part_clone",j.className="cdss-loading-tip-box-clone",i.appendChild(j);var k,l,m,n;a.isJson?(l=a.id,m=a.name,n={hasDetail:a.hasDetail,hasMayo:a.hasMayo,hasTreatment:a.hasTreatment,hasReference:a.hasReference}):(k=e.getElementParent(a),l=e.getElementAttr(k,"name"),m=e.getElementAttr(k,"title"),n={hasDetail:e.getElementAttr(k,"detail"),hasMayo:e.getElementAttr(k,"mayo"),hasTreatment:e.getElementAttr(k,"treatment"),hasReference:e.getElementAttr(k,"reference")}),e.bind(window,"onresize",function(){var a=document.documentElement||document.body,b=e.get(".cdss-panel-box",i),c=0;c=a.clientHeight>b[b.length-1].clientHeight?(a.clientHeight-b[b.length-1].clientHeight)/2+"px":"5px";for(var d=0;d<b.length;d++)b[d].style.marginTop=c}),d(l,m,b)},Cdss.prototype.DiabetesController=function(a){function b(){var a=document.createElement("div");C=a,a.id="cdss_pop_window_diabetes";D.appendChild(a),w.renderTemplate(a,"tpl/diabetes",{}),a.className="cdssanimated cdssfadeInDown";var b=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,d=w.get(".cdss-panel-box",a);b>d[0].clientHeight?d[0].style.marginTop=(b-d[0].clientHeight)/2+"px":d[0].style.marginTop="5px";var e=(w.get("#cdss_pop_window"),w.get(".cdss_panel_closed_btn",a));w.bind(e,"onclick",function(){c()}),v()}function c(){var a=document.getElementById("cdss_pop_window_pop")||document.createElement("div");a.id="cdss_pop_window_pop",document.body.appendChild(a);var b=document.getElementById("cdss_pop_window_message")||document.createElement("div");b.id="cdss_pop_window_message",document.body.appendChild(b),w.renderTemplate(b,"tpl/chronic_popup",{});var c=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,d=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth;b.style.left=(d-b.clientWidth)/2+"px",b.style.top=(c-b.clientHeight)/2+"px";var f=w.get("#cdss_chronic_pop_save"),g=w.get("#cdss_chronic_pop_unsave"),h=w.get("#cdss_chronic_pop_cancel");w.unbind(f,"onclick"),w.bind(f,"onclick",function(){document.body.removeChild(b),document.body.removeChild(a),e()}),w.unbind(g,"onclick"),w.bind(g,"onclick",function(){document.body.removeChild(b),document.body.removeChild(a);var c=w.get("#cdss_pop_window");c.className="cdssanimated cdssfadeOutUp",setTimeout(function(){document.body.removeChild(c)},300);var d="spm=5.2.3.1";w.setImgUerlMaiDian(x,d)}),w.unbind(h,"onclick"),w.bind(h,"onclick",function(){document.body.removeChild(b),document.body.removeChild(a)})}function d(a){var b=w.get("#cdss_handler_panel"),c=w.getElementChilds("#cdss-drug-selected_ul");c.length&&(window.is_cdss_chronic_in=!0,b||x.SearchPanelController("",null));var d=w.get("#cdss-drug-selected_ul"),e=w.get("#cdss_chronic_result"),f=w.get("#cdss_diagnose_search_part");if(d&&c.length){var g=d||w.get("#cdss_copy_drug_ul");w.get("#cdss_chronic_result_content").innerHTML=g.innerHTML;var h=w.get(".cdss-close-copy-x",w.get("#cdss_chronic_result_content"));w.removeElement(h),w.setElementAttr(e,{style:"display:block"}),f&&w.setElementAttr(f,{style:"display:none"}),w.get("#cdss_search_input2").value="";var i=w.get(".cdss-close-x",e);w.unbind(i,"onclick"),w.bind(i,"onclick",function(){w.setElementAttr(e,{style:"display:none"})})}else e&&w.setElementAttr(e,{style:"display:none"});var j={confirmed_time:a.caseHistory.confirmed_time},k=w.get("#cdss_pbdl_dd_danger"),l=w.getCheckBoxChecked(null,"input[type=checkbox][backtype=personal]",k,"desc");j.personalHis=l;var m=w.get("#cdss_evaluate_symptom_div"),n=w.getCheckBoxChecked(null,"input[type=checkbox]",m,"desc");j.symptomList=n;var o=w.get("#cdss_diabetes_drug"),p=w.get(".cdss-drug-indication",o),q=w.getCheckBoxChecked(null,"input[type=checkbox][backtype=danger]",k,"desc"),r=w.getCheckBoxChecked(null,"input[type=checkbox]",p[0],"desc");j.complainCheckList=r.concat(q);var s=a.assistExamineDiabetesPojo,t={fbg:{name:"空腹血糖",current:s.fbg.current,unit:"mmol/L",flag:w.getElementAttr(w.get("#cdss_current_fbg"),"compare")},fbs:{name:"餐后血糖",current:s.fbs.current,unit:"mmol/L",flag:w.getElementAttr(w.get("#cdss_current_fbs"),"compare")},glycosylatedHemoglobin:{name:"糖化血红蛋白",current:s.glycosylatedHemoglobin.current,unit:"%",flag:w.getElementAttr(w.get("#cdss_current_glycosylatedHemoglobin"),"compare")},bloodPressure:{name:"血压",current:s.bloodPressure.current,unit:"mmHg",flag:w.getElementAttr(w.get("#cdss_current_bloodPressure_fir"),"compare")},totalCholesterol:{name:"总胆固醇",current:s.totalCholesterol.current,unit:"mmol/L",flag:w.getElementAttr(w.get("#cdss_current_totalCholesterol"),"compare")},hdlCh:{name:"高密度胆固醇",current:s.hdlCh.current,unit:"mmol/L",flag:w.getElementAttr(w.get("#cdss_current_hdlCh"),"compare")},ldlCh:{name:"低密度胆固醇",current:s.ldlCh.current,unit:"mmol/L",flag:w.getElementAttr(w.get("#cdss_current_ldlCh"),"compare")},triglyceride:{name:"甘油三脂",current:s.triglyceride.current,unit:"mmol/L",flag:w.getElementAttr(w.get("#cdss_current_triglyceride"),"compare")},height:{name:"身高",current:s.height.current,unit:"CM",flag:0},weight:{name:"体重",current:s.weight.current,unit:"KG",flag:0},bmi:{name:"BMI",current:s.bmi.current,unit:"",flag:w.getElementAttr(w.get("#cdss_current_height"),"compare")},urinaryAlbumin:{name:"尿白蛋白/肌酐",current:s.urinaryAlbumin.current,unit:s.urinaryAlbumin.unit,flag:w.getElementAttr(w.get("#cdss_current_urinaryAlbumin"),"compare")},uaer:{name:"尿白蛋白排泄率",current:s.uaer.current,unit:s.urinaryAlbumin.unit,flag:w.getElementAttr(w.get("#cdss_current_uaer"),"compare")}};j.examineBack=t;var u=w.get(".cdss_drug_use_div",o),v=w.getCheckBoxChecked(null,"input[type=checkbox]",u[0],"desc");j.drugList=v,x.callListenChronicBack({diabetesData:j})}function e(){var a=f();w.get("#cdss_diabetes_evaluate");w.ajax(Cdss.urls.diabetes_evalute_save,{type:"POST",header:{Huimei_id:x.authKey,"api-extend-params":x.userOptions},data:a,success:function(b){if(0==b.head.error){w.toast(x.contentEntity,"保存成功",1500),d(a);var c=w.get("#cdss_pop_window");c.className="cdssanimated cdssfadeOutUp",setTimeout(function(){document.body.removeChild(c)},300)}},isDetailLoad:!0})}function f(){var a=(C.bloodCache,w.get("#cdss_diabetes_evaluate"),w.get("#cdss_diabetes_drug")),b={age:w.get("#cdss_evaluate_age").value,chronicDiseaseId:A,remark:w.get("#cdss_blood_remark").value};b.ageType=C.selectInput.getValue().value,b.confirmedTime=C.selectConfirmInput.getValue().value;var c=w.getInputList("input[type=radio][name=cdss_evaluate_sex]"),d=w.getCheckBoxChecked(c);b.sex=d[0].value;var e=w.get("#cdss_evaluate_symptom_div"),f=w.getCheckBoxChecked(null,"input[type=checkbox]",e,"flag");b.symptom=f.join("-");var g=w.get("#cdss_pbdl_dd_danger");if(1==b.sex)for(var h=w.get(".cdss-personal",g),i=0;i<h.length;i++){var j=w.get("input",h[i]);j[0].checked=!1}var k=w.getCheckBoxChecked(null,"input[type=checkbox]",g,"flag");b.riskFactor=k.join("-");var l=w.get(".cdss_drug_use_div",a),m=w.getCheckBoxChecked(null,"input[type=checkbox]",l[0],"flag");b.currentMedicine=m.join("-");var n=w.get("#cdss_current_medicine_result"),o=w.getCheckBoxChecked(null,"input[type=checkbox]",n,"flag");b.untowardEffectId=o.join("-");var p=w.get(".cdss-drug-indication",a),q=w.getCheckBoxChecked(null,"input[type=checkbox]",p[0],"flag");b.complication=q.join("-");var r=C.assistExamineDiabetesPojo;r.fbg.current=w.get("#cdss_current_fbg").value,r.fbg.target=w.get("#cdss_target_fbg_fir").value+"-"+w.get("#cdss_target_fbg_sec").value,r.fbs.current=w.get("#cdss_current_fbs").value,r.fbs.target=w.get("#cdss_target_fbs").value,r.glycosylatedHemoglobin.current=w.get("#cdss_current_glycosylatedHemoglobin").value,r.glycosylatedHemoglobin.target=w.get("#cdss_target_glycosylatedHemoglobin").value;var s=w.get("#cdss_current_bloodPressure_fir").value,t=w.get("#cdss_current_bloodPressure_sec").value;r.bloodPressure.current="",r.bloodPressure.target="",(s||t)&&(r.bloodPressure.current=s+"-"+t);var u=w.get("#cdss_target_bloodPressure_fir").value,v=w.get("#cdss_target_bloodPressure_sec").value;(u||v)&&(r.bloodPressure.target=u+"-"+v),r.totalCholesterol.current=w.get("#cdss_current_totalCholesterol").value,r.totalCholesterol.target=w.get("#cdss_target_totalCholesterol").value,r.hdlCh.current=w.get("#cdss_current_hdlCh").value,r.hdlCh.target=w.get("#cdss_target_hdlCh").value,r.ldlCh.current=w.get("#cdss_current_ldlCh").value,r.ldlCh.target=w.get("#cdss_target_ldlCh").value,r.triglyceride.current=w.get("#cdss_current_triglyceride").value,r.triglyceride.target=w.get("#cdss_target_triglyceride").value,r.height.current=w.get("#cdss_current_height").value,r.weight.current=w.get("#cdss_current_weight").value,r.bmi.current=w.getElementAttr(w.get("#cdss_current_bmi"),"bmi"),r.bmi.target=w.get("#cdss_target_bmi").value,r.urinaryAlbumin.current=w.get("#cdss_current_urinaryAlbumin").value,r.urinaryAlbumin.unit=C.selectUrinaryAlbumin.getValue().value,r.urinaryAlbumin.target=w.get("#cdss_target_urinaryAlbumin").value,r.uaer.current=w.get("#cdss_current_uaer").value,r.uaer.unit=C.selectUaer.getValue().value,r.uaer.target=w.get("#cdss_target_uaer").value;for(var x=w.getCheckBoxChecked(null,"input[type=radio][drugid]",a)||[],y=new Object,z=[],i=0;i<x.length;i++){var B=x[i],D=B.getAttribute("drugid");if(!y[D]){var E=B.name.split("_"),F=E.pop(),G=w.getElementAttr(B,"insulin"),H="";H=1!=G?w.getElementAttr(B,"drugname")+" "+w.getElementAttr(B,"dosage"):w.getElementAttr(B,"drugname"),z.push({medicineCategoryId:F,medicineId:D,desc:H}),y[D]=B}}var I=C.medicineHistoryList||[];z=z.concat(I);var J={caseHistory:b,assistExamineDiabetesPojo:r,medicineHistoryList:z};return J}function g(){var a=w.get("#cdss_diabetes_evaluate"),b=w.getElementChilds("#cdss_diabetes_evaluate"),c=(window.hisQueryParam,{chronicDiseaseId:A});b.length||w.ajax(Cdss.urls.diabetes_evalute_init,{type:"POST",header:{Huimei_id:x.authKey,"api-extend-params":x.userOptions},data:c,success:function(b){0==b.head.error&&(h(b.body),w.renderTemplate(a,"tpl/diabetes_evaluate",b.body),p(b.body),i(b.body),j(b.body),n(!0))},isDetailLoad:!0})}function h(a){var b=window.hisQueryParam||{},c=a.caseHistory||{};c.age=b.age||c.age,b.age?c.ageType=b.ageType:c.ageType=c.ageType,c.sex=b.gender||c.sex||1,c.confirmedTime=c.confirmedTime||2e3,a.caseHistory=c;var d=a.assistExamineDiabetesPojo||{};d.bloodPressure=d.bloodPressure||{};var e=d.bloodPressure.current||"",f=e.split("-");d.bloodPressure.systolicPressure=b.highBldPress||f[0]||"",d.bloodPressure.diastolicPressure=b.lowBldPress||f[1]||"",d.height=d.height||{},d.height.current=b.height||d.height.current,d.weight=d.weight||{},d.weight.current=b.weight||d.weight.current,d.fbg=d.fbg||{},d.fbg.current=b.fasting_glucose||d.fbg.current,d.glycosylatedHemoglobin=d.glycosylatedHemoglobin||{},d.glycosylatedHemoglobin.current=b.hemoglobin||d.glycosylatedHemoglobin.current,d.totalCholesterol=d.totalCholesterol||{},d.totalCholesterol.current=b.tc||d.totalCholesterol.current,d.hdlCh=d.hdlCh||{},d.hdlCh.current=b.hdlc||d.hdlCh.current,d.ldlCh=d.ldlCh||{},d.ldlCh.current=b.ldlc||d.ldlCh.current,d.triglyceride=d.triglyceride||{},d.triglyceride.current=b.tg||d.triglyceride.current,d.urinaryAlbumin=d.urinaryAlbumin||{},d.uaer=d.uaer||{},d.bmi=d.bmi||{},d.fbs=d.fbs||{},a.assistExamineDiabetesPojo=d}function i(a){var b=w.get("#cdss_diabetes_evaluate");C.assistExamineDiabetesPojo=a.assistExamineDiabetesPojo,C.caseHistory=a.caseHistory;var c=[{value:"岁",text:"岁"},{value:"月",text:"月"},{value:"天",text:"天"}];C.selectInput=jss("#cdss_evaluate_agetype").select({height:30,defaultValue:a.caseHistory.ageType||"岁",options:c,calback:function(a){n()}});for(var d=[],e=1900;2017>=e;e++)d.push({value:e,text:e});C.selectConfirmInput=jss("#cdss_confirm_age").select({height:30,defaultValue:a.caseHistory.confirmedTime,options:d,calback:function(a){}});var f=(a.assistExamineDiabetesPojo.urinaryAlbumin,[{value:"mg/mmol",text:"mg/mmol"},{value:"mg/g",text:"mg/g"}]);C.selectUrinaryAlbumin=jss("#cdss_unit_urinaryAlbumin").select({height:30,defaultValue:"mg/mmol",options:f,calback:function(a){var b=jss("#cdss_unit_urinaryAlbumin").getDom(),c=w.getElementParent(b,".cdss-eva-tr"),d=w.get(".cdss-target-unit",c);d[0].innerHTML=a.text,n()}});var g=(a.assistExamineDiabetesPojo.uaer,[{value:"µg/min",text:"µg/min"},{value:"mg/d",text:"mg/d"}]);C.selectUaer=jss("#cdss_unit_uaer").select({height:30,defaultValue:"µg/min",options:g,ZIndex:9999,calback:function(a){var b=jss("#cdss_unit_uaer").getDom(),c=w.getElementParent(b,".cdss-eva-tr"),d=w.get(".cdss-target-unit",c);d[0].innerHTML=a.text,n()}});var h=w.getCheckBoxChecked(null,"input[type=radio][name=cdss_evaluate_sex]",b),i=w.get(".cdss-personal",b);1==h[0].value?w.setElementAttr(i,{style:"display:none"}):w.setElementAttr(i,{style:"display:block"});var j=a.caseHistory.symptom;if(j)for(var k=j.split("-"),e=0;e<k.length;e++)w.get("#cdss_symptom_"+k[e]).checked=!0;var l=a.caseHistory.riskFactor;if(l)for(var m=l.split("-"),e=0;e<m.length;e++)w.get("#cdss_risk_factor_"+m[e]).checked=!0;var o=a.caseHistory.currentMedicine;if(o){var p=o.split("-");if(p.length){w.get("#cdss_drug_use_true").checked=!0,w.setElementAttr(w.get(".cdss_drug_use_div"),{style:"display:block"});for(var e=0;e<p.length;e++)w.get("#cdss_hypotensor_"+p[e]).checked=!0}}var q=a.caseHistory.complication||"";if(q)for(var r=q.split("-"),e=0;e<r.length;e++)w.get("#cdss_complic_"+r[e]).checked=!0}function j(a){var b=C,c=w.get("#cdss_diabetes_evaluate"),d=w.get("#cdss_diabetes_drug"),e=w.getInputList("input[type=radio][name=cdss_evaluate_sex]",c);w.bind(e,"onclick",function(){var a=this,b=w.get(".cdss-personal",c);0==a.value?w.setElementAttr(b,{style:"display:block"}):w.setElementAttr(b,{style:"display:none"}),n()});var f=w.get("#cdss_evaluate_symptom_div"),g=w.getInputList("input[type=checkbox]",f);w.bind(g,"onclick",function(){n()});var h=w.get("#cdss_examine_show_more");w.bind(h,"onclick",function(){var a=this,b=w.hasClass(a,"active"),c=w.get("#cdss_inspect_show_more");b?(w.removeClass(a,"active"),a.innerHTML="[ 更多 ]",w.setElementAttr(c,{style:"position:absolute;margin-top:-10000px"})):(w.addClass(a,"active"),a.innerHTML="[ 收起 ]",w.setElementAttr(c,{style:"margin-top:0px"}))});var i=w.get(".cdss-blood-his",c);w.bind(i,"onclick",function(){m()});var j=w.get("#cdss_copy_drug_btt");w.bind(j,"onclick",function(){l(this,a)});var o=w.get(".cdss-close-x",c);w.bind(o,"onclick",function(){var a=w.getElementParent(this);w.setElementAttr(a,{style:"display:none"})});var p=w.get("#cdss_btt_transfer"),q=w.get(".cdss-transfer",c);w.bind(p,"onclick",function(){if("none"==q[0].style.display){q[0].style.display="block";var a=w.get(".cdss-pde-left",c),b=w.get("#cdss_select_treatment_tit");a[0].scrollTop=b.offsetTop-3}else q[0].style.display="none";return!1});var r=w.get(".cdss-btt-menu",c);w.bind(r,"onclick",function(){for(var a=w.getElementAttr(this,"flag"),c=w.get(".head-url",b),d=w.get("li",c[0]),e=0;e<d.length;e++){var f=d[e],g=w.getElementAttr(f,"flag");if(g==a){f.click();break}}});var s=w.get("#cdss_evaluate_examin_cont"),t=w.getInputList("select",s);w.bind(t,"onchange",function(){var a=this,b=w.getElementParent(a,".cdss-eva-tr"),c=w.get(".cdss-target-unit",b),d=a.selectedIndex;c[0].innerHTML=a.options[d].value,n()});var u=w.getInputList("input[flag=current]",s),v=w.getInputList("input[flag=target]",s);w.bind(u,"onblur",function(){n()}),w.bind(v,"onblur",function(){n()});var x=w.getInputList("input[type=checkbox]",c);w.bind(x,"onclick",function(){var a=this,b=w.getElementAttr(a,"desc"),c=w.getInputList("input[type=checkbox][desc="+b+"]",d);if(c.length)for(var e=0;e<c.length;e++)c[e].checked=a.checked;n()});var y=w.get("#cdss_evaluate_age"),z=w.get("#cdss_blood_remark");w.bind(y,"onblur",function(){n()}),w.bindInputTimer(z,function(){var a=this,b=w.get("#cdss_drug_remark");b&&(b.value=a.value)});var A=w.get(".cdss-target-recomend",c);w.bind(A,"onclick",function(){for(var a=this,b=w.getElementParent(a,".cdss-eva-tr"),c=w.getInputList("input[flag=target]",b),d=w.getElementAttr(a,"recoment"),e=d.split("-"),f=0;f<e.length;f++)c[f].value=e[f];k(a),n()})}function k(a){var b=w.getElementParent(a,".cdss-eva-tr"),c=w.get(".cdss-target-recomend",b),d=w.getElementAttr(c[0],"operatorStatus"),e=w.getInputList("input[flag=target]",b),f=w.getInputList("input[flag=current]",b),g=w.getInputList("span[bmi]",b);g.length&&(f=g,f[0].value=w.getElementAttr(f[0],"bmi"));for(var h=0,i=!0,j=0;j<e.length;j++)if(""===e[j].value){i=!1;break}for(var j=0;j<f.length;j++)if(""===f[j].value){i=!1;break}if(i)if(1==d){var k=parseFloat(e[0].value)||0,l=parseFloat(e[1].value)||0;if(1==f.length){var m=parseFloat(f[0].value)||0;(""===k||""===l||""===m)&&(h=0),k>m?h=1:m>l&&(h=2)}else{var n=parseFloat(f[0].value)||0,o=parseFloat(f[1].value)||0;(n>k||o>l)&&(h=2)}}else if(2==d){var p=parseFloat(e[0].value)||0,m=parseFloat(f[0].value)||0;m>=p&&(h=2)}else if(3==d){var p=parseFloat(e[0].value)||0,m=parseFloat(f[0].value)||0;m>p&&(h=2)}else if(4==d){var p=parseFloat(e[0].value)||0,m=parseFloat(f[0].value)||0;p>=m&&(h=1)}else if(5==d){var p=parseFloat(e[0].value)||0,m=parseFloat(f[0].value)||0;p>m&&(h=1)}var q=w.get(".cdss-flg-low",b),r=w.get(".cdss-flg-up",b),s=w.getInputList("input[flag=current]",b);1==h?(w.setElementAttr(q,{style:"display:inline"}),w.setElementAttr(r,{style:"display:none"}),w.setElementAttr(s,{compare:"1"})):2==h?(w.setElementAttr(q,{style:"display:none"}),w.setElementAttr(r,{style:"display:inline"}),w.setElementAttr(s,{compare:"2"})):(w.setElementAttr(q,{style:"display:none"}),w.setElementAttr(r,{style:"display:none"}),w.setElementAttr(s,{compare:"0"}))}function l(a,b){var c=w.get("#cdss_chronic_blood");w.get(".cdss-copy-drug-conent",c);C.medicineHistoryList=b.medicineHistoryList;var d=w.get("#cdss-drug-selected_ul");if(d){var e=C.medicineHistoryList||[];if(e.length){var f=w.get("#cdss_diabetes_drug");w.setElementAttr(w.get("#cdss_drug_selected_panel"),{style:"display:block"});for(var g=[],h=[],i=0;i<e.length;i++){var j=e[i],k=w.get("#cdss-classification-id-"+j.medicineCategoryId);if(!k){var l=document.createElement("li");l.id="cdss-classification-id-"+j.medicineCategoryId,l.name="cdss_drug_"+j.medicineId,l.innerHTML=j.desc+'<span class="cdss-close-copy-x"></span>',d.appendChild(l);var m=w.get(".cdss_drug_"+j.medicineId,f);m.length?h.push(m[0]):g.push(j)}}if(C.medicineHistoryList=g,h.length){for(var i=0;i<h.length;i++)s(h[i]);n()}var o=w.get(".cdss-close-copy-x",d);w.unbind(o,"onclick"),w.bind(o,"onclick",function(){var a=w.getElementParent(this),b=w.get("."+a.name,c);if(b.length)b[0].click();else for(var d=a.id.split("-").pop(),e=0;e<C.medicineHistoryList.length;e++){var f=C.medicineHistoryList[e];if(f.medicineCategoryId==d){C.medicineHistoryList.splice(e,1),w.removeElement(a);var g=w.getElementChilds("#cdss-drug-selected_ul");g.length||w.setElementAttr(w.get("#cdss_drug_selected_panel"),{style:"display:none"});break}}})}}a.disabled=!0,a.value="已复制",a.style.color="#666666"}function m(){var a=(w.get("#cdss_diabetes_evaluate"),w.get("#cdss_bood_his_tab")),b=w.hasClass(a,"active");b?w.removeClass(a,"active"):w.ajax(Cdss.urls.diabetes_evalute_his,{type:"POST",header:{Huimei_id:x.authKey,"api-extend-params":x.userOptions},data:{chronicDiseaseId:A},success:function(b){if(0==b.head.error){var c=b.body||[];w.renderTemplate(a,"tpl/diabetes_his_record",{recordList:c}),w.addClass(a,"active")}},isDetailLoad:!0})}function n(a){for(var b=f(),c=b.medicineHistoryList,d=[],e=0;e<c.length;e++){var g=c[e];d.push(g.medicineCategoryId)}var h={assistExamineDiabetesPojo:b.assistExamineDiabetesPojo,riskFactorId:b.caseHistory.riskFactor,currentMedicineId:b.caseHistory.currentMedicine,complicationId:b.caseHistory.complication,sex:b.caseHistory.sex,age:b.caseHistory.age,ageType:b.caseHistory.ageType,medicineCategoryId:d.join("-"),symptomId:b.caseHistory.symptom,chronicDiseaseId:A};a?h.untowardEffectId=C.caseHistory.untowardEffectId:h.untowardEffectId=b.caseHistory.untowardEffectId;var i=h.assistExamineDiabetesPojo.height.current,j=h.assistExamineDiabetesPojo.weight.current,l=w.get("#cdss_current_bmi"),m=/^\d+$/;if(m.test(i)&&m.test(j)){var p=parseFloat(j),q=Math.pow(parseFloat(i)/100,2),r=Math.round(p/q);l.innerHTML=r,w.setElementAttr(l,{bmi:r})}else l.innerHTML="",w.setElementAttr(l,{bmi:""});w.ajax(Cdss.urls.diabetes_evalute_recommend,{type:"POST",header:{Huimei_id:x.authKey,"api-extend-params":x.userOptions},data:h,success:function(a){if(0==a.head.error){var b=a.body,c=(w.get("#cdss_diabetes_evaluate"),w.get("#cdss_diabetes_drug")),d={1:"",2:"&lt;",3:"&le;",4:"&gt;",5:"&ge;"},e=b.assistExamineResponsePojo;for(var f in e){var g=e[f],h=w.get("#cdss_target_recomend_"+f);if(h){var i=w.getElementParent(h);if(g&&g.value){w.setElementAttr(i,{style:"display:inline"});var j="推荐"+d[g.operatorStatus]+g.value+(g.unit||"");h.innerHTML=j,w.setElementAttr(i,{recoment:g.value,operatorStatus:g.operatorStatus})}else w.setElementAttr(i,{style:"display:none"});k(i)}}var l=b.recommendDesc||"",m=w.get("#cdss_intell_result_ul");if(m.innerHTML="",l)for(var p=l.split("-HM-"),f=0;f<p.length;f++){var q=document.createElement("li"),g=f+1+"."+p[f];q.innerHTML=g,m.appendChild(q)}else m.innerHTML="<li>患者药物治疗请参考糖尿病治疗相应指南</li>";var r=b.untowardEffectList||[],s=w.get("#cdss_current_medicine_result");if(r.length){w.get("#cdss_drug_use_true").checked=!0,w.setElementAttr(w.get(".cdss_drug_use_div"),{style:"display:block"});for(var f=0;f<r.length;f++){var t=r[f];w.get("#cdss_hypotensor_"+t.medicineId).checked=!0}w.setElementAttr(s,{style:"display:block"}),w.renderTemplate(s,"tpl/diabetes_medicine_unvalidate",{currentMedicineList:r});var u=w.getInputList("input[type=checkbox]",s);w.unbind(u,"onclick"),w.bind(u,"onclick",function(){n()})}else w.setElementAttr(s,{style:"display:none"});var v=b.symptomRecommend,x=[];if(v)for(var y=v.split("-HM-"),f=0;f<y.length;f++){var g=y[f].split("@@");x.push({name:g[0],desc:g[1]})}var z=w.get("#cdss_eva_symptom_result");x.length?(w.setElementAttr(z,{style:"display:block"}),w.renderTemplate(z,"tpl/diabetes_evaluate_symptom",{descList:x})):w.setElementAttr(z,{style:"display:none"}),0!=b.isReferral&&(b.riskFactorReferral=b.riskFactorRecommend,b.assistExamineReferral=b.assistExamineDesc);var A=w.get("#cdss-patient-age-result"),B=w.get(".cdss-result",A);b.ageReferral?(B[0].innerHTML=b.ageReferral,w.setElementAttr(A,{style:"display:block"})):w.setElementAttr(A,{style:"display:none"});var D=w.get("#cdss-danger-result"),E=w.get("#cdss_danger_layer");if(E.innerHTML="",b.riskFactorReferral){for(var F=b.riskFactorReferral.split("-HM-"),f=0;f<F.length;f++){var q=document.createElement("li");q.innerHTML=f+1+"."+F[f],E.appendChild(q)}w.setElementAttr(D,{style:"display:block"})}else w.setElementAttr(D,{style:"display:none"});var G=w.get("#cdss_factor_layer");if(G.innerHTML="",b.assistExamineReferral){w.setElementAttr(w.get("#cdss_factor_layer_div"),{style:"display:block"});for(var H=b.assistExamineReferral.split("-HM-"),f=0;f<H.length;f++){var q=document.createElement("li");q.innerHTML=f+1+"."+H[f],G.appendChild(q)}}else w.setElementAttr(w.get("#cdss_factor_layer_div"),{style:"display:none"});b.medicineHint?w.get(".cdss-select-panel-result",c)[0].innerHTML=b.medicineHint:w.get(".cdss-select-panel-result",c)[0].innerHTML="";var I=b.complicationResponsePojo||{},J=I.recommendMedicineCategoryDescIdList||[],K=I.tabooList||[],L=I.relativetabooList||[],M=w.getInputList("i[name=category]",c);w.removeElement(M);for(var f=0;f<J.length;f++){var N=document.createElement("i");N.innerHTML=" [推荐] ",w.setElementAttr(N,{name:"category"});var O=w.get("#cdss_drug_diabetes_"+J[f]);O.appendChild(N)}for(var f=0;f<K.length;f++){var N=document.createElement("i");N.innerHTML=" [禁忌] ",w.setElementAttr(N,{name:"category",style:"color:red"});var O=w.get("#cdss_drug_diabetes_"+K[f]);O.appendChild(N)}for(var f=0;f<L.length;f++){var N=document.createElement("i");N.innerHTML=" [慎用] ",w.setElementAttr(N,{name:"category",style:"color:red"});var O=w.get("#cdss_drug_diabetes_"+L[f]);O.appendChild(N)}C.recomendDrugList=I.medicineIdList||[],o(C.recomendDrugList);var P=I.desc||"",Q=w.get("#cdss_drug_result_ul");if(Q.innerHTML="",P){var R=P.split("-HM-");w.setElementAttr(w.get(".cdss-drug-result",c),{style:"display:inline-block"});for(var f=0;f<R.length;f++){var q=document.createElement("li"),g=f+1+"."+R[f];q.innerHTML=g,Q.appendChild(q)}}else w.setElementAttr(w.get(".cdss-drug-result",c),{style:"display:none"});var S=w.get(".cdss-drug-recomend-tit",c);w.removeElement(S);var T=b.medicineRecommendResultPojo||{};if(T.isFirLine){var U=w.get(".cdss-drug-single-title2",c),O=document.createElement("span");O.className="cdss-drug-recomend-tit",O.innerHTML=T.firRecommend,U[0].appendChild(O)}if(T.isSenLine){var U=w.get(".cdss-drug-union-title",c),O=document.createElement("span");O.className="cdss-drug-recomend-tit",O.innerHTML=T.senRecommend,U[0].appendChild(O)}if(T.isThreeLine){var U=w.get(".cdss-drug-insulin-title",c),O=document.createElement("span");O.className="cdss-drug-recomend-tit",O.innerHTML=T.threeRecommend,U[0].appendChild(O)}if(T.isFourLine){var U=w.get(".cdss-drug-morinsulin-title",c),O=document.createElement("span");O.className="cdss-drug-recomend-tit",O.innerHTML=T.fourRecommend,U[0].appendChild(O)}}},isDetailLoad:!0})}function o(a){var b=w.get("#cdss_diabetes_drug"),c=w.getInputList("i[name=drugrecomend]",b);w.removeElement(c);for(var d=0;d<a.length;d++){var e=w.getInputList("span[recflag="+a[d]+"]");if(e.length)for(var f=0;f<e.length;f++){var g=document.createElement("i");g.innerHTML=" [推荐] ",w.setElementAttr(g,{name:"drugrecomend"}),e[f].appendChild(g)}}}function p(a){var b=w.get("#cdss_diabetes_drug");a&&(w.renderTemplate(b,"tpl/diabetes_drug",a),q(a));var c=w.get("#cdss_evaluate_age"),d=(w.get("#cdss_current_fbg"),w.get("#cdss_current_fbs"),w.get("#cdss_current_glycosylatedHemoglobin"),"");c.value||(d="为了更好的使用2型糖尿病用药流程，请先补充患者年龄。");var e=w.get("#cdss_drug_none_desc"),f=w.get("#cdss_drug_for_use");d?(w.setElementAttr(f,{style:"display:none"}),w.setElementAttr(e,{style:"display:block;height:289px"}),w.get(".cdss-intell-result",e)[0].innerHTML=d):(w.setElementAttr(f,{style:"display:block"}),w.setElementAttr(e,{style:"display:none"}))}function q(a){var b=w.get("#cdss_diabetes_drug"),c=w.get("#cdss_diabetes_evaluate"),d=w.get(".cdss_antihypertensive_t",b);w.bind(d,"onclick",function(){var a=this;if(!C.reqFlg){var c=w.get(".cdss_antihypertensive_t",b);w.hasClass(a,"active")?w.removeClass(c,"active"):(w.removeClass(c,"active"),w.addClass(a,"active")),r(a)}});var f=w.get(".cdss-close-x",b);w.bind(f,"onclick",function(){var a=w.getElementParent(this);w.setElementAttr(a,{style:"display:none"});var b=w.getElementParent(this,".cdss-drug-con"),c=w.get(".cdss_antihypertensive_t",b);w.removeClass(c,"active")});var g=w.getInputList("input[type=checkbox]",b);w.bind(g,"onclick",function(){var a=this,b=w.getElementAttr(a,"desc"),d=w.getInputList("input[type=checkbox][desc="+b+"]",c);if(d.length)for(var e=0;e<d.length;e++)d[e].checked=a.checked;n()});var h=w.getInputList("input[type=radio][name=cdss_drug_use]");w.bind(h,"onclick",function(){var a=this,c=w.get(".cdss_drug_use_div",b);if(1==a.value)w.setElementAttr(c,{style:"display:block"});else{w.setElementAttr(c,{style:"display:none"});for(var d=w.get(".cdss_drug_use_div",b),e=w.getInputList("input[type=checkbox]",d[0]),f=0;f<e.length;f++){var g=e[f];g.checked=!1}}n()});var i=w.get("#cdss_chronic_save"),j=w.get("#cdss_chronic_cancel");w.bind(i,"onclick",function(){e()});var k=w.get("#cdss_drug_remark");k.value=w.get("#cdss_blood_remark").value,w.bindInputTimer(k,function(){var a=this,b=w.get("#cdss_blood_remark");b.value=a.value}),w.bind(j,"onclick",function(){var a=w.get("#cdss_pop_window");a.className="cdssanimated cdssfadeOutUp",setTimeout(function(){document.body.removeChild(a)},300)})}function r(a){var b=w.get("#cdss_diabetes_drug"),c=w.getElementAttr(a,"classification"),d="cdss_panel_single",e=w.getElementAttr(a,"flag");switch(e){case"single":d="cdss_panel_single";break;case"union":d="cdss_panel_union";break;case"insulin":d="cdss_panel_insulin";break;case"morinsulin":d="cdss_panel_morinsulin";break;case"blooddown":d="cdss_panel_blooddown";break;case"lipid":d="cdss_panel_lipid";break;case"corelle":d="cdss_panel_corelle";break;default:d="cdss_panel_single"}var f=document.getElementById(d);w.setElementAttr(f,{style:"display:block"});var g=w.get(".cdss-single-div",b);w.setElementAttr(g,{style:"display:none"});var h=w.get("#cdss_drug_detail_"+e+"_"+c);h?w.hasClass(a,"active")?w.setElementAttr(h,{style:"display:block"}):w.setElementAttr(h,{style:"display:none"}):(C.reqFlg=!0,w.ajax(Cdss.urls.diabetes_drug_detail,{type:"POST",header:{Huimei_id:x.authKey,"api-extend-params":x.userOptions},data:{chronic_disease_id:A,categoryId:c},success:function(a){if(0==a.head.error){C.reqFlg=!1;var d=document.createElement("div");d.id="cdss_drug_detail_"+e+"_"+c,d.className="cdss-single-div",f.appendChild(d);var g=a.body,h={0:"无",1:"有",2:"少",3:"很少"};w.renderTemplate(d,"tpl/diabetes_drug_detail",{data:g,curMen:h,flag:e});var i=w.get(".cdss-pde-left",b),j=w.get(".cdss-drug-"+e+"-title",b);i[0].scrollTop=j[0].offsetTop-3,o(C.recomendDrugList);for(var k=w.get(".inner-table",d)||[],l=0;l<k.length;l++){var m=k[l],p=w.getElementParent(m);m.style.height=p.clientHeight+"px"}for(var q=C.radioCheckedList||[],l=0;l<q.length;l++)for(var m=q[l],r=m.className.split(" "),t=w.get("."+r[0],b),u=0;u<t.length;u++){t[u].checked=!0;var v=w.hasClass(t[u],"active");v||w.addClass(t[u],"active")}var x=w.getInputList("input[type=radio]",d);w.unbind(x,"onclick"),w.bind(x,"onclick",function(a){var b=this;s(b),n()});for(var y=C.medicineHistoryList||[],z=[],A=[],l=0;l<y.length;l++){var m=y[l],B=w.get("#cdss-classification-id-"+m.medicineCategoryId),t=w.get(".cdss_drug_"+m.medicineId,b),D=t[0];if(B&&t.length){var v=w.hasClass(D,"active");v||A.push(D)}else z.push(m)}if(C.medicineHistoryList=z,A.length){for(var l=0;l<A.length;l++)s(A[l]);n()}}},isDetailLoad:!0}))}function s(a){var b=a,c=w.get("#cdss_diabetes_drug"),d=w.hasClass(b,"active"),e=b.className.split(" "),f=w.get("."+e[0],c)||[];if(d){for(var g=0;g<f.length;g++)f[g].checked=!1;w.removeClass(f,"active")}else for(var g=0;g<f.length;g++){f[g].checked=!0;var h=document.getElementsByName(f[g].name);w.removeClass(h,"active"),w.addClass(f[g],"active")}for(var i=w.getCheckBoxChecked(null,"input[type=radio][drugid]",c)||[],j=new Object,k=[],g=0;g<i.length;g++){var l=i[g],m=l.getAttribute("drugid");j[m]||(k.push(l),j[m]=l)}C.radioCheckedList=k;var n=C.medicineHistoryList||[],o=w.get("#cdss-drug-selected_ul");if(o.innerHTML="",k.length>0||n.length>0){w.setElementAttr(w.get("#cdss_drug_selected_panel"),{style:"display:block"});for(var p=[],g=0;g<k.length;g++){var l=k[g],q=l.name.split("_"),r=q.pop();p.push(r);var s=document.createElement("li");w.setElementAttr(s,{class_id:r}),s.id="cdss-classification-id-"+r,s.name=l.className.split(" ")[0];var t=w.getElementAttr(l,"insulin");1!=t?s.innerHTML=w.getElementAttr(l,"drugname")+" "+w.getElementAttr(l,"dosage")+'<span class="cdss-close-copy-x"></span>':s.innerHTML=w.getElementAttr(l,"drugname")+'<span class="cdss-close-copy-x"></span>',o.appendChild(s)}for(var g=0;g<n.length;g++){var a=n[g],s=document.createElement("li");
s.id="cdss-classification-id-"+a.medicineCategoryId,s.name="cdss_drug_"+a.medicineId,s.innerHTML=a.desc+'<span class="cdss-close-copy-x"></span>',o.appendChild(s)}var u=w.get(".cdss-close-copy-x",o);w.unbind(u,"onclick"),w.bind(u,"onclick",function(){var a=w.getElementParent(this),b=w.get("."+a.name,c);if(b.length)b[0].click();else for(var d=a.id.split("-").pop(),e=C.medicineHistoryList||[],f=0;f<e.length;f++){var g=e[f];if(g.medicineCategoryId==d){e.splice(f,1),w.removeElement(a);var h=w.getElementChilds("#cdss-drug-selected_ul");h.length||w.setElementAttr(w.get("#cdss_drug_selected_panel"),{style:"display:none"})}}})}else w.setElementAttr(w.get("#cdss_drug_selected_panel"),{style:"display:none"})}function t(){var a=w.get("#cdss_diabetes_intervene"),b=w.getElementChilds("#cdss_diabetes_intervene");b.length||w.ajax(Cdss.urls.chronic_relevant,{type:"POST",header:{Huimei_id:x.authKey,"api-extend-params":x.userOptions},data:{diseaseId:A},success:function(b){return b.head.error?void w.toast(x.contentEntity,b.head.message,1500):void w.renderTemplate(a,"tpl/diabetes_intervene",{content:b.body.docContentList})},isDetailLoad:!0})}function u(){var a=w.get("#cdss_diabetes_relevant"),b=w.getElementChilds("#cdss_diabetes_relevant");b.length||w.renderTemplate(a,"tpl/diabetes_relevant",{})}function v(){panel=C;var a=w.get(".head-url",panel),b=w.get("li",a[0]),c=w.get(".cdss-show-tab",panel);w.bind(b,"onclick",function(){w.removeClass(b,"active"),w.removeClass(c,"active");var a=this,d=w.getElementAttr(a,"flag"),e=w.get("#cdss_diabetes_"+d);switch(w.addClass(a,"active"),w.addClass(e,"active"),d){case"evaluate":g();break;case"drug":p();break;case"intervene":t();break;case"relevant":u();break;default:g()}}),b[0].click()}var w=Cdss.tool,x=this;if(x.userParam&&x.userParam.hasCS&&!a.isJson)try{var y=w.bulidDetailUrl(a,"chronicDiabetes");return w.setCurrentEntityData(x,100,y),x.cdssDetailurl=y,void window.sendCdssToNa({detailUrl:y})}catch(z){Cdss.___errorMsg=z}var A;if(a.isJson)A=a.id;else{var B=w.getElementParent(a);A=w.getElementAttr(B,"name")}var C="",D=document.getElementById("cdss_pop_window")||document.createElement("div");D.id="cdss_pop_window",D.style.zIndex="999999";document.body.appendChild(D);var E=w.get("#cdss_loading_part").cloneNode(!0);E.id="cdss_loading_part_clone",E.className="cdss-loading-tip-box-clone",D.appendChild(E),w.bind(window,"onresize",function(){var a=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,b=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,c=w.get(".cdss-panel-box",D),d=0;d=a>c[c.length-1].clientHeight?(a-c[c.length-1].clientHeight)/2+"px":"5px";for(var e=0;e<c.length;e++)c[e].style.marginTop=d;var f=document.getElementById("cdss_pop_window_message");f&&(a>f.clientHeight?(f.style.left=(b-f.clientWidth)/2+"px",f.style.top=(a-f.clientHeight)/2+"px"):(f.style.left=(b-f.clientWidth)/2+"px",f.style.top="5px"))}),b()},Cdss.prototype.HandleController=function(a,b){var c=Cdss.tool,d=this,e=c.bulidCdssOverlay(b,d),f=e.innerView;a.i18n=Cdss.i18n,c.renderTemplate(e.innerView,"tpl/handle",a);var g=c.get(".cdss-view-main",e.innerView);c.pageInit(d,g,"handlepage");var h=c.findElement("#cdss_back_btn_inner",f)[0];c.bind(h,"onclick",function(){c.addClass(f,"cdssfadeOutUp"),setTimeout(function(){c.toggleClass(f,"active"),c.toggleClass(f,"cdssfadeOutUp"),c.removeElement(f,e.mainView),c.pageBack()},200)});var i=c.findElement("#handle-part-view",f)[0],j=c.get(".h-i-title",i);c.bind(j,"onclick",function(a){var b=this;c.toggleClass(b,"active");var d=c.getElementParent(b),e=c.get("dd",d);c.toggleClass(e,"active")})},Cdss.prototype.HomeController=function(){function a(a,b){k[a]=b}function b(a){return k[a]}function c(){function c(a){a.i18n=Cdss.i18n;var b="#cdss_history_data",c=l.get(b);a.customSymptoms&&a.customSymptoms.length?(l.removeClass(c,"hide"),l.renderTemplate(c,"tpl/history_data",{historyData:a.customSymptoms}),h(b,"4.1.1.3")):l.addClass(c,"hide");var c=l.get("#cdss_assistedmarks_selected");l.renderTemplate(c,"tpl/home_symptom",a),h("#cdss_assistedmarks_selected","4.1.1.1"),f(a,"home_diseases",null,"1"),l.bulidTouchBar(k)}var e=b("___commonHistoryEntity");e?c(e):l.ajax(Cdss.urls.common_all_data,{type:"POST",header:{Huimei_id:k.authKey,"api-extend-params":k.userOptions},success:function(b){return b.head.error?void l.toast(k.contentEntity,b.head.message,1500):(a("___commonHistoryEntity",b.body),c(b.body),void d())}})}function d(){var a=k.contentEntity.clientHeight-71,b=l.get(".cdss-page-part",k.contentEntity);l.setElementAttr(b,{style:"height:"+a+"px"});try{k.cdssOnReadyLoaded(),k.cdssIsOnReady=!0}catch(c){}}function e(a){var b=(l.getElementCoord(a),l.getElementPositon(a));k.showDiseaseSuggest(a,{x:b.left+"px",y:b.top+33+"px",width:a.clientWidth+"px",callback:function(b){a.value=b.value,k.SearchPanelController(b.value,a)}})}function f(a,b,c,d){var e=c||"#common_diagnoses_part_dd",f=l.get(e);a.___authKey=Cdss.___authKey,l.renderTemplate(f,"tpl/"+b,a),i(f,d)}function g(){function a(){if(!window.is_cdss_chronic_in){b("___commonHistoryEntity")&&c();var a=l.get(".cdss-page-part");l.removeClass(a,"blockwindow"),d(!0)}}function d(a){l.get("#cdss_cj_t_name").innerHTML=a?Cdss.i18n.commonDiagnosis:Cdss.i18n.suspectedDiagnosis}var e=l.queryUrlParam("cdssTime");if(e)if(k._queryInfoRequestTimer){var g=(new Date).getTime(),h=g-k._queryInfoRequestTimer;if(h<parseFloat(e))return;k._queryInfoRequestTimer=g}else k._queryInfoRequestTimer=(new Date).getTime();var i=k.complaintData.join(","),m=k.complaintData.join("").replace(/(^\s*)|(\s*$)/g,""),n=k.getDiagnosisKeys(k.diagnosisData).join(","),o=k.getDiagnosisKeys(k.diagnosisData).join("").replace(/(^\s*)|(\s*$)/g,""),p=k.getDiagnosisValues(k.diagnosisData).join("").replace(/(^\s*)|(\s*$)/g,""),q=j({symptom:i,confirmDiagnosis:n,confirmDiagnosisMap:k.diagnosisData}),r=!1;window.hisQueryParam=q;for(var s in q)if("gender"!=s&&"age"!=s&&"ageType"!=s&&"symptom"!=s&&"confirmDiagnosis"!=s&&"confirmDiagnosisMap"!=s&&"examItems"!=s&&String(q[s]).replace(/(^\s*)|(\s*$)/g,"")){r=!0;break}return r||m||o||p?void l.ajax(Cdss.urls.intelligent_diagnosis,{type:"POST",header:{Huimei_id:k.authKey,"api-extend-params":k.userOptions},data:q,success:function(b){if(b.head.error)return void l.toast(k.contentEntity,b.head.message,1500);var c=b.body;c.i18n=Cdss.i18n,c.assistedBar=window._cdssAssistedBarState||{bar:!1,panel:!0},c.suspectedDiseases&&c.suspectedDiseases.length?(c.commonDiseases=c.suspectedDiseases,f(c,"home_diseases",null,c.diseaseType),d(2==c.diseaseType?!1:!0)):a()}}):void a()}function h(a,b){var c=l.getElementChilds(a);l.unbind(c,"onclick"),l.bind(c,"onclick",function(a){var c=this,d=c.innerHTML;l.toggleClass(c,"active");var e={name:d,sysType:l.getElementAttr(c,"symtype"),isActive:l.hasClass(c,"active")};l.setComplaint(k,c,e);var f="spm="+b+"&content="+encodeURIComponent(d);l.setImgUerlMaiDian(k,f),g()})}function i(a,b){var c="";"1"==b?c="常见诊断":"2"==b?c="疑似诊断":"3"==b&&(c="查询结果");var d=a||l.get("#common_diagnoses_part_dd"),e=l.get(".cdss-im-mk",d);l.unbind(e,"onclick"),l.bind(e,"onclick",function(a){var b=this,d=b.innerHTML;l.toggleClass(b,"active");var e={name:d,sysType:l.getElementAttr(b,"symtype"),isActive:l.hasClass(b,"active")};l.setComplaint(k,b,e);var f=b.parentElement.previousElementSibling||b.parentElement.previousSibling,h=f.title,i="spm=4.1.1.2&symptom="+encodeURIComponent(d)+"&disease="+encodeURIComponent(h)+"&tab="+encodeURIComponent(c);l.setImgUerlMaiDian(k,i),g()});var f=l.get(".cdss-diagnoses-identify-btn",d);l.unbind(f,"onclick"),l.bind(f,"onclick",function(a){var b=this,d=b.parentElement.title,e="spm=4.2.3.1&disease="+encodeURIComponent(d)+"&tab="+encodeURIComponent(c);l.setImgUerlMaiDian(k,e),k.DetailController(b,"detail","identify")});var h=l.get(".cdss-diagnoses-disposes-btn",d);l.unbind(h,"onclick"),l.bind(h,"onclick",function(a){var b=this,d=b.parentElement.title,e="spm=4.2.2.1&disease="+encodeURIComponent(d)+"&tab="+encodeURIComponent(c);l.setImgUerlMaiDian(k,e),k.DetailController(b,"treatment")});var i=l.get(".cdss-diagnoses-details-btn",d);l.unbind(i,"onclick"),l.bind(i,"onclick",function(a){var b=this,d=b.parentElement.title,e="spm=4.2.1.1&disease="+encodeURIComponent(d)+"&tab="+encodeURIComponent(c);l.setImgUerlMaiDian(k,e),k.DetailController(b,"detail")});var j=l.get(".cdss-diagnoses-chronic-btn",d);l.unbind(j,"onclick"),l.bind(j,"onclick",function(a){var b=this,c=l.getElementParent(b),d=l.getElementAttr(c,"title");-1!=d.indexOf("高血压")?k.ChronicController(b):-1!=d.indexOf("糖尿病")&&k.DiabetesController(b)});var m=l.get(".cdss-diagnoses-basis-btn",d);l.unbind(m,"onclick"),l.bind(m,"onclick",function(a){var b=this,c=l.getElementParent(b),d=l.getElementAttr(c,"title"),e=l.getElementAttr(c,"name");if(k.userParam&&k.userParam.hasCS)try{var f=l.bulidDetailUrl(b,"diagnosisBasis");return l.setCurrentEntityData(k,100,f),k.cdssDetailurl=f,void window.sendCdssToNa({detailUrl:f})}catch(a){Cdss.___errorMsg=a}else new CdssDiagnosisBasis("body",{id:e,name:d,autherkey:k.authKey,userOptions:k.userOptions})});var i=l.get(".cdss-diagnoses-mayo-btn",d);l.unbind(i,"onclick"),l.bind(i,"onclick",function(a){var b=this,d=b.parentElement.title,e="spm=4.2.4.1&disease="+encodeURIComponent(d)+"&tab="+encodeURIComponent(c);l.setImgUerlMaiDian(k,e),k.DetailController(b,"mayo")});var n=l.get(".cdss-diagnoses-item-add",d);l.unbind(n,"onclick"),l.bind(n,"onclick",function(a){function b(a,b,d,e){l.toggleClass(a,"active"),l.setDiagnosis(k,a),k.cdssOnDiagnosisClick({isActive:l.hasClass(a,"active"),key:b,value:d,icdCode:e});var f="spm=4.1.2.1&disease="+encodeURIComponent(d)+"&tab="+encodeURIComponent(c);l.setImgUerlMaiDian(k,f),g()}var d=this,e=l.getElementAttr(d,"diseaseGuid"),f=l.getElementAttr(d,"diseaseId"),h=l.getElementAttr(d,"diseaseName"),i=l.getElementAttr(d,"diseaseCode");return e&&"null"!==e?void b(d,e,h,i):void l.ajax(Cdss.urls.loadOtherDisease,{type:"POST",header:{Huimei_id:k.authKey,"api-extend-params":k.userOptions},data:{diseaseId:f},success:function(a){function c(){var a=l.get(".cdss-other-disease-tip");l.removeElement(a)}if(a.head.error)return void l.toast(k.contentEntity,a.head.message,1500);c();var f=l.getElementParent(d),g=l.getElementParent(f),h=l.get(".cdss-other-disease-tip",g);h&&h.length||(h=document.createElement("div"),h.className="cdss-other-disease-tip",l.appendElement(g,h)),l.renderTemplate(h,"tpl/other_diseasetip",{diseases:a.body});var i=l.get(".cdss-closed-btn");l.bind(i,"onclick",function(){c()});var j=l.getElementChilds("#cdss_other_dis_ul");l.bind(j,"onclick",function(){if("CENTER"!==this.tagName){var a=(l.getElementAttr(this,"diseaseGuid"),l.getElementAttr(this,"diseaseName")),d=l.getElementAttr(this,"diseaseCode");c(),b(this,e,a,d)}})}})})}function j(a){var b=k.getAssistantData();return"object"!=typeof b&&(b={}),b.symptom=a.symptom,b.confirmDiagnosis=a.confirmDiagnosis,b.confirmDiagnosisMap=a.confirmDiagnosisMap,b.examItems=[{id:1,value:b.leukocyte||""},{id:2,value:b.erythrocyte||""},{id:3,value:b.nitrite||""},{id:4,value:b.ketone_bodies||""},{id:5,value:b.urobilinogen||""},{id:6,value:b.bilirubin||""},{id:7,value:b.proteolipin||""},{id:8,value:b.glucose||""},{id:9,value:b.ph_value||""},{id:10,value:b.vc||""},{id:11,value:b.proportion||""},{id:12,value:b.fasting_glucose||""},{id:13,value:b.hemoglobin||""},{id:14,value:b.oxygen_saturation||""},{id:15,value:b.tc||""},{id:16,value:b.tg||""},{id:17,value:b.hdlc||""},{id:18,value:b.ldlc||""}],b}var k=this,l=Cdss.tool,m=l.get(k.contentId);l.addClass(m,"cdss-parent-context-part"),k.contentEntity=m,l.renderTemplate(m,"tpl/home",{i18n:Cdss.i18n}),k.drug=new CdssDrug("#cdss-drug-panel-manage",{autherkey:k.authKey,userOptions:k.userOptions}),function(){setTimeout(function(){if(-1==document.getElementById("cdss_maidian_img").src.indexOf("spm=4.4.0.1")){var a=l.getCookie("cdssIsOpen");if(""!=a){var b="spm=4.4.0.1&cdssIsOpen="+a;l.setImgUerlMaiDian(k,b)}}},100)}();var n=l.get(".cdss-page-part",m);l.pageInit(k,n,"homepage");var o=l.get(".copy-notice",m);l.bind(o,"onmouseover",function(){var a=l.get(".notice-content",m);a[0].style.display="block";var b=(k.contentEntity.clientWidth-a[0].clientWidth)/2;a[0].style.marginLeft=b+"px"}),l.bind(o,"onmouseout",function(){var a=l.get(".notice-content",m);a[0].style.display="none"}),c();var p=l.get("#cdss_know_search_btn");l.bind(p,"onclick",function(a){var b=l.get("#cdss_search_input"),c=b.value;return c?void k.SearchPanelController(c,this):void l.toast(k.contentEntity,Cdss.i18n.searchContentRequired,1500)});var q=l.get("#cdss_search_input");l.bindInputTimer(q,function(){e(q)}),l.bind(q,"onfocus",function(a){e(this)}),k.HomeControllerBulidDiseaseView=f,k.queryAutoData=g},Cdss.prototype.SearchPanelController=function(a,b){function c(a){g.ajax(Cdss.urls.search_disease,{type:"POST",header:{Huimei_id:h.authKey,"api-extend-params":h.userOptions},data:{diseaseName:a},success:function(a){return a.head.error?void g.toast(h.contentEntity,a.head.message,1500):void f({i18n:Cdss.i18n,commonDiseases:a.body.diseaseList})}})}function d(){var a=g.get("#cdss_chronic_result"),b=g.get("#cdss_diagnose_search_part");g.setElementAttr(a,{style:"display:none"}),g.setElementAttr(b,{style:"display:block"})}function e(a){var b=(g.getElementCoord(a),g.getElementPositon(a));h.showDiseaseSuggest(a,{x:b.left+"px",y:b.top+33+"px",width:a.clientWidth+"px",callback:function(b){a.value=b.value,c(b.value),d()}})}function f(a){var b="#common_diagnoses_part_dd_search";if(!a.commonDiseases||!a.commonDiseases.length){var c=g.get(b);return void g.renderTemplate(c,"tpl/systip",{data:Cdss.i18n.noQueryResult})}h.HomeControllerBulidDiseaseView(a,"home_diseases",b,"3");var d=g.get(".cdss-page-part",k.innerView);g.setElementAttr(d,{style:"height:"+m.height+"px"})}var g=Cdss.tool,h=this,i="spm=4.3.1.1&query="+encodeURIComponent(a);g.setImgUerlMaiDian(h,i);var j=g.get("#cdss_search_input");j.blur();var k=g.bulidCdssOverlay(b,h);g.renderTemplate(k.innerView,"tpl/search_panel",{i18n:Cdss.i18n,searchValue:a});var l=g.get(".cdss-page-part",k.innerView),m=g.pageInit(h,l,"searchpage");a&&c(a);var n=g.get("#cdss_know_back_btn");g.bind(n,"onclick",function(){var a=g.get("#cdss_handler_panel");window.is_cdss_chronic_in=!1,g.addClass(a,"cdssfadeOutUp"),setTimeout(function(){g.toggleClass(a,"active"),g.toggleClass(a,"cdssfadeOutUp"),g.removeElement(a,k.mainView),g.pageBack()},200)});var o=g.get("#cdss_know_search_btn2");g.bind(o,"onclick",function(){var a=g.get("#cdss_search_input2"),b=a.value;if(!b)return void g.toast(h.contentEntity,Cdss.i18n.searchContentRequired,1500);c(b);var e="spm=4.3.1.1&query="+encodeURIComponent(b);g.setImgUerlMaiDian(h,e),d()});var p=g.get("#cdss_search_input2");g.bindInputTimer(p,function(){e(p)}),g.bind(p,"onfocus",function(a){e(this)})};