function selectorOptionRender(selectorId,data,valueKeyName,displayKeyName){var selectorDom=$("#"+selectorId);if(selectorDom){selectorDom.html("");for(var i=0;i<data.length;i++){var item=data[i],li=$("<li class='drop-item' value='"+eval("item."+valueKeyName)+"'>"+eval("item."+displayKeyName)+"</li>");li.appendTo(selectorDom)}}}function getPersonAge(e){if(e){var t=new Date(e).getFullYear();return(new Date).getFullYear()-t+1}}function Stock(){this.isStockCheck=!0}!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.cache=new e.WJZSCache(this.options),this.listen(),this.ajaxnow=!1,this.selectVlue=""};t.prototype={CLASSES:{ACTIVE:"ac_over",HEADER:"ac_header"},constructor:t,select:function(){var e=this.$menu.find("."+this.CLASSES.ACTIVE).filter("li.ac_even, li.ac_odd"),t=e.data("ac_data");if(t){var n=this.options.formatResult(t);if(n)this.$element.val(this.updater(n));else{var a=t[this.options.columns[0].dataKey];a&&this.$element.val(a)}return this.selectVlue=this.updater(n),this.$element.trigger("result",[t,n]),this.hide()}},updater:function(e){return e},show:function(t){var n=this.$element;this.setTop();var a=this.options.wrapperHandle?this.options.wrapperHandle:".content-inner",i=this;e(a).scroll(function(){i.setTop()});var s=this.options.wrapperHandle?this.options.wrapperHandle:"body";if(this.$menu.get(0).scrollHeight>this.$menu.height()+1&&t&&this.$menu.scrollTop(this.$menu.get(0).scrollHeight-this.$menu.height()-1),e(this.$menu.find(".ac_header")[0]).css("top",this.$menu.scrollTop()),e(n).is(":focus")){var o=this.$menu.scrollTop();this.$menu.appendTo(e(s)).show(),this.$menu.scrollTop(o-1),this.shown=!0}return this},setTop:function(){var t=this.$element,n=e(t).offset(),a=n.top+t[0].offsetHeight,i=n.left,s=this.$menu.find("li"),o=27*s.length>this.options.scrollHeight?this.options.scrollHeight:27*s.length-1-26,r="string"==typeof this.options.width||this.options.width>0?this.options.width:e(t).width();if(this.options.wrapperHandle){if(a+o+20>e(this.options.wrapperHandle).get(0).clientHeight){var l=e(this.options.wrapperHandle).scrollTop();a=n.top+l-(o+parseFloat(this.$menu.css("padding-top")))}else{var l=e(this.options.wrapperHandle).scrollTop();a=n.top+l+t[0].offsetHeight}}else if(a+o+20>(window.parentWindowHeight?window.parentWindowHeight:e(window).height()))a=n.top-(o+parseFloat(this.$menu.css("padding-top")));else var a=n.top+t[0].offsetHeight;i+r>(window.parentWindowWidth?window.parentWindowWidth:e(window).width())&&(i=n.left+parseFloat(e(t).width())-r),this.$menu.find(".ac_resault_aligncenter").length>0&&(o="125px"),this.$menu.css({width:"string"==typeof this.options.width||this.options.width>0?this.options.width:e(t).width(),height:o,top:a,left:i})},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t,n){var a;if(!this.$element.attr("readonly"))return this.query=this.$element.val()||this.$element[0].value,0==this.options.canFocus&&(!this.query||this.query.length<this.options.minLength)?this.shown?this.hide():this:(a=this.cache.load(this.query),a&&0!==a.length&&1!=n&&1!=this.options.forceConnect||(a=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this),this.cache,n,this.options.ext):this.source),a?this.process(a,n):this)},process:function(t,n){var a=this;if(t=e.grep(t,function(e){return a.matcher(e)}),new RegExp("^[ ]+$").test(this.query)&&" "===this.query||(t=this.sorter(t)),!n||e.isFunction(this.source))return this.render(t.slice(0,this.options.items),n).show(n)},matcher:function(e){return!!this.options.isUrl||-1!=this.options.formatMatch(e,null,null).toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,n=[],a=[],i=[];t=e.shift();)JSON.stringify(t).toLowerCase().indexOf(this.query.toLowerCase())?~JSON.stringify(t).indexOf(this.query)?a.push(t):i.push(t):n.push(t);return n.concat(a,i)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},createHeader:function(){var t=e("<li/>").addClass(this.CLASSES.HEADER),n=e("<dl/>");if(n.width(this.options.width),this.options.columns)for(var a=this.options.columns.length,i=0;i<a;i++){var s=this.options.columns[i].width,o=e("<dd/>");o.text(this.options.columns[i].display),o.width(s),n.append(o)}return t.append(n),t},render:function(t,n){if(t){var a=this;if(n||this.$menu.find("li.ac_even, li.ac_odd").remove(),t.length<1){if(n)return this;var i=e("<li>                                <div class='ac_resault_aligncenter'><div class='ac_resault_img'></div></div>                                <div class='ac_resault_aligncenter'>查询不到数据</div>                            </li>");i.off().on("click",function(){a.hide()}),this.$menu.html(i).css("height","125px")}else{if(this.$menu.find(".ac_resault_aligncenter").length>0){this.$menu.html("");var s=this.createHeader();this.$menu.append(s)}for(var o=0;o<t.length;o++)if(t[o]){var r=e.extend({},t[o]);this.options.formatResult(r);var l=e("<dl/>");this.options.rowHighlight&&"function"==typeof this.options.rowHighlight&&this.options.rowHighlight(r)&&(l=e('<dl class="ac_special"/>')),l.width(this.options.width);var c=this.options.columns;if(!c)return"";var d=c.length;if(1!==d||r[c[0].dataKey]){for(var u=0;u<d;u++){var p=c[u].width,h="";h=e(c[u].cellHighlight&&"function"==typeof c[u].cellHighlight&&c[u].cellHighligh(r)||r.highlight&&"true"==r.highlight?'<dd class="ac_special" />':"<dd/>");var f=r[c[u].dataKey];f=f||0===f||"0"===f?f:"--",h.text(f),h.width(p),h.attr("title",r[c[u].dataKey]),l.append(h)}var i=e("<li/>").append(l);i.addClass(o%2==0?"ac_even":"ac_odd").appendTo(this.$menu),i.data("ac_data",r),i.data("ac_index",this.$menu.find("li.ac_even, li.ac_odd").length)}}this.options.beSelected&&this.$menu.find("li.ac_even, li.ac_odd").eq(0).addClass(this.CLASSES.ACTIVE)}return this.ajaxnow=!1,1==t.length&&a.options.onlistCallback&&"function"==typeof a.options.onlistCallback&&a.options.onlistCallback(t),this}},next:function(t){if(1!=this.ajaxnow){var n=this.$menu.find("."+this.CLASSES.ACTIVE).filter("li.ac_even, li.ac_odd").removeClass(this.CLASSES.ACTIVE);if(n.length<1)return this.$menu.find("li.ac_even, li.ac_odd").eq(0).addClass(this.CLASSES.ACTIVE),!1;var a=n.next();a.hasClass("ac_header")&&(a=n.next()),a.length||(a=e(this.$menu.find("li.ac_even, li.ac_odd")[0]));var i=this.$menu.find("li"),s=a.data("ac_index"),o=0;1==s?this.$menu.scrollTop(o):(i.slice(0,s).each(function(){o+=this.offsetHeight}),o+a[0].offsetHeight-this.$menu.scrollTop()>this.$menu[0].clientHeight?this.$menu.scrollTop(o+a[0].offsetHeight-this.$menu.innerHeight()):o<this.$menu.scrollTop()&&this.$menu.scrollTop(o)),a.addClass(this.CLASSES.ACTIVE)}},prev:function(e){var t=this.$menu.find("."+this.CLASSES.ACTIVE).filter("li.ac_even, li.ac_odd").removeClass(this.CLASSES.ACTIVE);if(t.length<1)return!1;var n=t.prev();n.hasClass("ac_header")&&(n=n.next()),n.length||(n=this.$menu.find("li.ac_even, li.ac_odd").last());var a=this.$menu.find("li"),i=n.data("ac_index"),s=0;1==i?this.$menu.scrollTop(s):(a.slice(0,i).each(function(){s+=this.offsetHeight}),s+n[0].offsetHeight-this.$menu.scrollTop()>this.$menu[0].clientHeight?this.$menu.scrollTop(s+n[0].offsetHeight-this.$menu.innerHeight()):s<this.$menu.scrollTop()+parseFloat(this.$menu.css("padding-top"))&&this.$menu.scrollTop(s-parseFloat(this.$menu.css("padding-top")))),n.addClass(this.CLASSES.ACTIVE)},listen:function(){this.$element.attr("autocomplete","off"),this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.$element.on("propertychange input",e.proxy(this.propertychange,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this));var t=this.createHeader();this.$menu.append(t),this.options.columns.length>0&&this.$menu.css("padding-top","26px"),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this)).on("scroll",e.proxy(this.scroll,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 13:if(!this.shown)return;this.select()}e.stopPropagation(),e.preventDefault()},focus:function(e){var t=this;t.options.focusSearch&&(this.focused=!0,setTimeout(function(){t.lookup()},100))},propertychange:function(e){var t=this;setTimeout(function(){t.lookup()},100)},blur:function(e){var t=this;t.focused=!1,t.mousedover||t.options.canedit||t.$element.attr("readonly")?!t.mousedover&&t.options.canedit&&t.hide():(t.selectVlue!==t.$element.val()&&(t.$element.val(""),t.selectVlue=""),t.hide())},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.mousedover=!0,this.$menu.find("."+this.CLASSES.ACTIVE).removeClass(this.CLASSES.ACTIVE),e(t.currentTarget).addClass(this.CLASSES.ACTIVE)},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown},scroll:function(){var t=0;this.options.columns.length>0&&(t=26),this.$menu.scrollTop()>=this.$menu[0].scrollHeight-this.$menu.height()-t&&this.lookup("",!0),e(this.$menu.find(".ac_header")[0]).css("top",this.$menu.scrollTop())},getBrowser:function(e){var t,n,a,i,s,o=navigator.userAgent.toLowerCase();"ActiveXObject"in self?(i=(a=o.match(/msie ([\d.]+)/))?a[1]:(a=o.match(/rv:([\d.]+)/))?a[1]:0,t={"trident/7.0":11,"trident/6.0":10,"trident/5.0":9,"trident/4.0":8},n=(a=o.match(/(trident\/[\d.]+|edge\/[\d.]+)/))?a[1]:void 0,s=(t[n]||i)>0?"ie":void 0):s=(a=o.match(/edge\/([\d.]+)/))?"edge":(a=o.match(/firefox\/([\d.]+)/))?"firefox":(a=o.match(/chrome\/([\d.]+)/))?"chrome":(a=o.match(/opera.([\d.]+)/))?"opera":(a=o.match(/version\/([\d.]+).*safari/))?"safari":void 0;var r;return r=n&&t[n]?t[n]:a[1],void 0!=e?s+"/"+r:s}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var a=e(this),i=a.data("typeahead"),s="object"==typeof n&&n;i||a.data("typeahead",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.result=function(e){return this.bind("result",e)},e.fn.autocomplete=function(t,n){n=e.extend({},e.fn.typeahead.defaults,n);var a="string"==typeof t;n.isUrl=a;var i=!1,s=null;return a?(n.url=t,n.source=function(t,a,o,r,l){var c={timestamp:+new Date};e.each(n.extraParams,function(e,t){c[e]="function"==typeof t?t():t});var d=r&&this.$menu.children("li:not(.ac_header)").length-1>=0?this.$menu.children("li:not(.ac_header)").length:0,u={limit:n.max,startIndex:d};c&&c.key?u[c.key]=t:u.q=t;var p;if(n&&n.ajaxOptions&&n.ajaxOptions.method){p=e.extend(u,c);var h={};l&&(h=l());var f=e.extend(!0,{},p,h);-1!=(n.ajaxOptions.contentType?n.ajaxOptions.contentType:"").indexOf("json")&&(f=JSON.stringify(f))}var m={mode:"abort",port:"autocomplete"+c.timestamp,dataType:"json",url:n.url+"?curTime="+(new Date).getTime(),data:f};n&&n.ajaxOptions&&(m=e.extend(m,n.ajaxOptions)),i&&s&&(i=!1,s.abort()),i=!0,this.ajaxnow=!0;var g=this;s=Utils.myAjaxHandler(m),s.done(function(e){"E0000000"==e.errorCode?(a(e.data,r),o.add(t,e.data),i=!1):g.ajaxnow=!1}).fail(function(e){g.ajaxnow=!1}).always(function(){g.ajaxnow=!1})}):n.source=t,this.typeahead(n)},e.fn.typeahead.defaults={columns:[],max:100,width:400,scrollHeight:200,extraParams:{},isUrl:!1,source:[],items:30,canedit:!1,forceConnect:!0,menu:'<ul class="ac_results"></ul>',item:'<li><a href="#"></a></li>',minLength:1,ajaxOptions:{method:"POST"},cacheLength:1e4,minChars:1,formatResult:function(e){},formatMatch:function(e,t,n){return JSON.stringify(e)},wrapperHandle:null,canFocus:!1,beSelected:!0,focusSearch:!0},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);n.data("typeahead")||n.typeahead(n.data())})}(window.jQuery),$.WJZSCache=function(e){function t(e,t){if(e&&t){e=e.toLowerCase();return e.search(t.toLowerCase())>=0}return!1}function n(t,n){s>e.cacheLength&&a(),i[t]||s++,i[t]=n}function a(){i={},s=0}var i={},s=0;return{flush:a,add:n,load:function(n){if(!e.cacheLength||!s)return null;if(i[n])return i[n];for(var a=n.length-1;a>=e.minChars;a--){var o=i[n.substr(0,a)];if(o){var r=[];return $.each(o,function(a,i){t(e.formatMatch(i,a,e.max),n)&&(r[r.length]=i)}),r}}return null}}},function(e){function t(t,n,a,i){this._inputEl=t,this._dropEl=t.parent(),this._data=e.extend({},this._data,n),this._version=(new Date).getTime(),this._d_options=e.extend({},this._d_options,a),this._callback=i,this._init()}t.prototype={_data:[],_d_options:{idKey:"id",txtKey:"txt",isNeedAll:!1,isNeedClear:!0,isNeedThink:!1},_KEY:{UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},_select:null,_dropEl:null,_inputEl:null,_callback:null,_cellDataKey:"drop_data",_allDataKey:"all_drop_data",_version:null,_versionKey:"wj-version",_timer:null,_init:function(){this._initData(),this._initEls(),this._bindEvent()},_initData:function(){var t=[];if(this._d_options.isNeedClear){var n={};n[this._d_options.idKey]=" ",n[this._d_options.txtKey]="请选择",t.push(n)}if(this._d_options.isNeedAll){var a={};a[this._d_options.idKey]=" ",a[this._d_options.txtKey]="全部",t.push(a)}e.merge(t,this._data),this._data=t},_initEls:function(){var t=this;if(this._inputEl.data(this._allDataKey,this._data),this._dropEl.data(this._versionKey,this._version),this._dropEl.hasClass("drop")){this._dropEl.find(".wjzs-drop-menu").remove();var n=e('<ul class="wjzs-drop-menu dsn"></ul>');e.each(this._data,function(a){var i=this[t._d_options.idKey],s=this[t._d_options.txtKey],o=e('<li class="drop-item" title="'+s+'" value="'+i+'" data-value="'+i+'">'+s+"</li>").addClass(a%2==0?"drop_even":"drop_odd");o.data(t._cellDataKey,this),o.data(t._versionKey,t._version),n.append(o)}),this._dropEl.append(n)}this._d_options.isNeedThink?this._inputEl.prop("readonly",!1).data("isNeedThink","true"):this._inputEl.prop("readonly",!0).data("isNeedThink","false")},_bindEvent:function(){var t=this;this._dropEl.find("li").click(function(n){n.stopPropagation();var a=e(this),i=a.data(t._versionKey);if(a.hasClass("drop-item")&&i==t._version){var s=e(this).text(),o=e(this).attr("data-value"),r=t._inputEl,l=!0;e(this).parents(".drop").hasClass("prentFalse")||(l=r.val()!==s,r.val(s));var c=a.data(t._cellDataKey);c.isChange=l,r.attr("val",o).removeClass("pawjzs-error"),r.parent().removeClass("pawjzs-error"),r.data(t._cellDataKey,c),r.blur(),e(this).parents(".wjzs-drop-menu").hide(""),t._callback(n,c)}}).on("mouseover",function(){e(this).addClass("drop_over").siblings().removeClass("drop_over")}),e(document).click(function(t){e(t.target).closest(".drop").length||e(".wjzs-drop-menu").hide()}),this._dropEl.on("click",function(n){var a=e(this).data(t._versionKey),i=e(this).find(".wjzs-drop-menu");if(!e(this).hasClass("disabled")&&i.length>0&&a==t._version){e(".wjzs-drop-menu").hide("fast"),e(".drop-menu").hide("fast"),i.find("li").show(),i.show();var s=e(this).find("input"),o=i.find("li:visible");if(o.length>0){var r=s.offset(),l=s.outerHeight(!0),c=28*o.length+2;c=c>142?142:c;var d=window.parentWindowHeight?window.parentWindowHeight:e(window).height();r.top+c+90>d&&(l=-c),i.css({top:l})}if(t._select){var u=0;t._dropEl.find("li").each(function(n){if(String(e(this).data(t._cellDataKey)[t._d_options.idKey])==t._inputEl.attr("val"))return void(u=n)}),t._select.setActiveIndex(u)}}}),this._inputEl.on("keyup",function(n){if(37!=n.keyCode&&38!=n.keyCode&&39!=n.keyCode&&40!=n.keyCode&&9!=n.keyCode&&33!=n.keyCode&&34!=n.keyCode&&13!=n.keyCode&&27!=n.keyCode){var a=this;clearTimeout(t._timer);var n=n||event;n.stopPropagation(),t._timer=setTimeout(function(){var n=e.trim(e(a).val()),i=e(a).siblings(".wjzs-drop-menu");i.find("li.drop-item").each(function(){e(this).text().indexOf(n)>-1?e(this).show():e(this).hide()});var s=e(a),o=i.find("li:visible");if(o.length>0){var r=s.offset(),l=s.outerHeight(!0),c=28*o.length+2;c=c>142?142:c;var d=window.parentWindowHeight?window.parentWindowHeight:e(window).height();if(r.top+c+90>d&&(l=-c),i.css({top:l}),t._select){var u=0;t._dropEl.find("li").each(function(n){if(String(e(this).data(t._cellDataKey)[t._d_options.idKey])==t._inputEl.attr("val"))return void(u=n)}),t._select.setActiveIndex(u)}}i.show()},100)}}),"false"===this._inputEl.data("isNeedThink")?this._inputEl.off("keyup").off("focus"):this._inputEl.on("blur",function(){for(var n=e(this).data("all_drop_data"),a=(e(this).attr("val"),e(this).val()),i=!1,s=0;s<n.length;s++)if(n[s][t._d_options.txtKey]==a){i=!0,e(this).attr("val",n[s][t._d_options.idKey]);break}i||e(this).attr("val","").val("")});var a={scroll:!0,multiple:!1},i={mouseDownOnSelect:!1},s=0;this._select=new n(this._dropEl,i,a);var o;navigator.userAgent.indexOf("Opera")>-1&&e(input.form).bind("submit.autocomplete",function(){if(o)return o=!1,!1}),e("body").bind((navigator.userAgent.indexOf("Opera")>-1?"keypress":"keydown")+".autocomplete",function(n){switch(s=1,lastKeyPressCode=n.keyCode,n.keyCode){case t._KEY.UP:n.preventDefault(),t._select.visible()&&t._select.prev();break;case t._KEY.DOWN:n.preventDefault(),t._select.visible()&&t._select.next();break;case t._KEY.PAGEUP:n.preventDefault(),t._select.visible()&&t._select.pageUp();case t._KEY.PAGEDOWN:n.preventDefault(),t._select.visible()&&t._select.pageDown();break;case a.multiple&&","==e.trim(a.multipleSeparator)&&t._KEY.COMMA:case t._KEY.TAB:case t._KEY.RETURN:if(t.selectCurrent())return n.preventDefault(),o=!0,!1;break;case t._KEY.ESC:t._select.hide()}}).focus(function(){s++}).blur(function(){s=0}).click(function(){})},selectCurrent:function(){var t=this,n=this._select.selected();return!(!n||this._dropEl.find(".wjzs-drop-menu").is(":hidden"))&&(this._dropEl.find("li").each(function(){var a=e(this).data(t._cellDataKey);if(String(n[t._d_options.idKey])==a[t._d_options.idKey])return e(this).click(),t._inputEl.focus().click(),!1}),!0)}};var n=function(t,n,a){function i(e){r.show(),l.removeClass(o.ACTIVE),l=r.find("li:visible"),s(e);var t=l.slice(c,c+1).addClass(o.ACTIVE);if(a.scroll&&t.length>0){var n=0;l.slice(0,c).each(function(){n+=this.offsetHeight}),n+t[0].offsetHeight-r.scrollTop()>r[0].clientHeight?r.scrollTop(n+t[0].offsetHeight-r.innerHeight()):n<r.scrollTop()&&r.scrollTop(n)}}function s(e){c+=e,c<0?c=l.size()-1:c>=l.size()&&(c=0)}var o={ACTIVE:"drop_over"},r=t.find(".wjzs-drop-menu"),l=r.find("li"),c=0;return{el:r,setActiveIndex:function(e){c=e,i(0)},next:function(){i(1)},prev:function(){i(-1)},pageUp:function(){i(0!=c&&c-8<0?-c:-8)},pageDown:function(){i(c!=l.size()-1&&c+8>l.size()?l.size()-1-c:8)},hide:function(){r&&r.hide(),l&&l.removeClass(o.ACTIVE),c=-1},visible:function(){return r&&r.is(":visible")},current:function(){return this.visible()&&(l.filter("."+o.ACTIVE)[0]||a.selectFirst&&l[0])},show:function(){var t=e(input).offset();if(r.css({width:"string"==typeof a.width||a.width>0?a.width:e(input).width(),top:t.top+input.offsetHeight,left:t.left}).show(),a.scroll&&(list.scrollTop(0),list.css({maxHeight:a.scrollHeight,overflow:"auto"}),navigator.userAgent.indexOf("MSIE")>-1&&void 0===document.body.style.maxHeight)){var n=0;l.each(function(){n+=this.offsetHeight});var i=n>a.scrollHeight;list.css("height",i?a.scrollHeight:n),i||l.width(list.width()-parseInt(l.css("padding-left"))-parseInt(l.css("padding-right")))}},selected:function(){var t=l&&l.filter("."+o.ACTIVE).removeClass(o.ACTIVE);return t&&t.length&&e.data(t[0],"drop_data")},emptyList:function(){r&&r.empty()},unbind:function(){r&&r.remove()}}};e.fn.extend({WJZSDropdown:function(n,a,i){new t(e(this),n,a,i)},GetWJZSDropdownSelectedData:function(){return e(this).data("drop_data")},GetWJZSDropdownAllData:function(){return e(this).data("all_drop_data")},SetWJZSDropdownSelectedData:function(t){var n=e(this);t=e.trim(t),null==t&&(t=""),n.parent().find(".wjzs-drop-menu li").each(function(){if(e.trim(e(this).attr("data-value"))==t)return n.val(e(this).text()),void n.attr("val",t)})},SelectWJZSDropdownFirstItem:function(){var t=e(this),n=t.parent().find(".wjzs-drop-menu li").first();t.val(n.text()),t.attr("val",n.attr("data-value"))},cleanDropdownItem:function(){e(this).parent().find(".wjzs-drop-menu").remove()},SelectWJZSDropdownItem:function(t){var n=e(this);t=e.trim(t),null==t&&(t=""),n.parent().find(".wjzs-drop-menu li").each(function(){if(e.trim(e(this).attr("data-value"))==t)return e(this).click(),!1})}})}(jQuery),function(e){"use strict";var t={i18n:{ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вск","Пн","Вт","Ср","Чт","Пт","Сб"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeek:["Paz","Pts","Sal","Çar","Per","Cum","Cts"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeek:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeek:["nd","pn","wt","śr","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",step:60,closeOnDateSelect:0,closeOnWithoutClick:!0,timepicker:!0,datepicker:!0,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,inline:!1,onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!1,scrollTime:!0,scrollInput:!0,mask:!1,validateOnBlur:!1,allowBlank:!1,yearStart:1920,yearEnd:2050,style:"",id:"",roundTime:"round",className:"",weekends:[],yearOffset:0,yearViewSelecte:!1};Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,a=this.length;n<a;n++)if(this[n]===e)return n;return-1}),e.fn.xdsoftScroller=function(t){return this.each(function(){var n=e(this);if(!e(this).hasClass("xdsoft_scroller_box")){var a=function(e){var t={x:0,y:0};if("touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"touchcancel"==e.type){var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.x=n.pageX,t.y=n.pageY}else"mousedown"!=e.type&&"mouseup"!=e.type&&"mousemove"!=e.type&&"mouseover"!=e.type&&"mouseout"!=e.type&&"mouseenter"!=e.type&&"mouseleave"!=e.type||(t.x=e.pageX,t.y=e.pageY);return t},i=0,s=n.children().eq(0),o=n[0].clientHeight,r=s[0].offsetHeight,l=e('<div class="xdsoft_scrollbar"></div>'),c=e('<div class="xdsoft_scroller"></div>'),d=100,u=!1;l.append(c),n.addClass("xdsoft_scroller_box").append(l),c.on("mousedown.xdsoft_scroller",function(a){o||n.trigger("resize_scroll.xdsoft_scroller",[t]);var s=a.pageY,r=parseInt(c.css("margin-top")),u=l[0].offsetHeight;e(document.body).addClass("xdsoft_noselect"),e([document.body,window]).on("mouseup.xdsoft_scroller",function t(){e([document.body,window]).off("mouseup.xdsoft_scroller",t).off("mousemove.xdsoft_scroller",i).removeClass("xdsoft_noselect")}),e(document.body).on("mousemove.xdsoft_scroller",i=function(e){var t=e.pageY-s+r;t<0&&(t=0),t+c[0].offsetHeight>u&&(t=u-c[0].offsetHeight),n.trigger("scroll_element.xdsoft_scroller",[d?t/d:0])})}),n.on("scroll_element.xdsoft_scroller",function(e,t){o||n.trigger("resize_scroll.xdsoft_scroller",[t,!0]),t=t>1?1:t<0||isNaN(t)?0:t,c.css("margin-top",d*t),s.css("marginTop",-parseInt((r-o)*t))}).on("resize_scroll.xdsoft_scroller",function(e,t,a){o=n[0].clientHeight,r=s[0].offsetHeight;var i=o/r,u=i*l[0].offsetHeight;i>1?c.hide():(c.show(),c.css("height",parseInt(u>10?u:10)),d=l[0].offsetHeight-c[0].offsetHeight,!0!==a&&n.trigger("scroll_element.xdsoft_scroller",[t||Math.abs(parseInt(s.css("marginTop")))/(r-o)]))}),n.mousewheel&&n.mousewheel(function(e,t,a,i){var l=Math.abs(parseInt(s.css("marginTop")));return n.trigger("scroll_element.xdsoft_scroller",[(l-20*t)/(r-o)]),e.stopPropagation(),!1}),n.on("touchstart",function(e){u=a(e)}),n.on("touchmove",function(e){if(u){var t=a(e),i=Math.abs(parseInt(s.css("marginTop")));n.trigger("scroll_element.xdsoft_scroller",[(i-(t.y-u.y))/(r-o)]),e.stopPropagation(),e.preventDefault()}}),n.on("touchend touchcancel",function(e){u=!1})}n.trigger("resize_scroll.xdsoft_scroller",[t])})},e.fn.datetimepicker=function(n){var a=!1,i=e.isPlainObject(n)||!n?e.extend(!0,{},t,n):e.extend({},t),s=function(t){var n=e("<div "+(i.id?'id="'+i.id+'"':"")+" "+(i.style?'style="'+i.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_noselect '+i.className+'"></div>'),s=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),o=e('<div class="xdsoft_datepicker active"></div>'),r=e('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span></div><div class="xdsoft_label xdsoft_year"><span></span></div><button type="button" class="xdsoft_next"></button></div>'),l=e('<div class="xdsoft_calendar"></div>'),c=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),d=c.find(".xdsoft_time_box").eq(0),u=e('<div class="xdsoft_time_variant"></div>'),p=e('<div class="xdsoft_scrollbar"></div>'),h=(e('<div class="xdsoft_scroller"></div>'),e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>')),f=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),m=e('<div class="xdsoft_sel_btns"><span class="selected">周排班</span><span>月排班</span></div>');r.find(".xdsoft_month span").after(h),r.find(".xdsoft_year span").after(f),r.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(t){r.find(".xdsoft_select").hide();var n=e(this).find(".xdsoft_select").eq(0),a=0,i=0;v.currentTime&&(a=v.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),n.show();for(var s=n.find("div.xdsoft_option"),o=0;o<s.length&&s.eq(o).data("value")!=a;o++)i+=s[0].offsetHeight;return n.xdsoftScroller(i/(n.children()[0].offsetHeight-n[0].clientHeight)),t.stopPropagation(),!1}),r.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(e){e.stopPropagation(),e.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(t){v&&v.currentTime&&v.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value")),e(this).parent().parent().hide(),n.trigger("xchange.xdsoft"),i.onChangeMonth&&i.onChangeMonth.call&&i.onChangeMonth.call(n,v.currentTime,n.data("input"))}),n.setOptions=function(s){i=e.extend(!0,{},i,s),!i.open&&!i.opened||i.inline||t.trigger("open.xdsoft"),i.inline&&(n.addClass("xdsoft_inline"),t.after(n).hide(),n.trigger("afterOpen.xdsoft")),i.inverseButton&&(i.next="xdsoft_prev",i.prev="xdsoft_next"),i.datepicker?o.addClass("active"):o.removeClass("active"),i.timepicker?c.addClass("active"):c.removeClass("active"),i.value&&(t&&t.val&&t.val(i.value),v.setCurrentTime(i.value)),isNaN(i.dayOfWeekStart)||parseInt(i.dayOfWeekStart)<0||parseInt(i.dayOfWeekStart)>6?i.dayOfWeekStart=0:i.dayOfWeekStart=parseInt(i.dayOfWeekStart),i.timepickerScrollbar||p.hide();var l,d=[];if(i.minDate&&(d=/^-(.*)$/.exec(i.minDate))&&(d=Date.parseDate(d[1],i.formatDate))&&(l=d.getTime()+-1*d.getTimezoneOffset()*6e4,i.minDate=new Date(v.now().getTime()-l).dateFormat(i.formatDate)),i.maxDate&&(d=/^\+(.*)$/.exec(i.maxDate))&&(d=Date.parseDate(d[1],i.formatDate))&&(l=d.getTime()+-1*d.getTimezoneOffset()*6e4,i.maxDate=new Date(v.now().getTime()+l).dateFormat(i.formatDate)),r.find(".xdsoft_today_button").css("visibility",i.todayButton?"visible":"hidden"),i.mask){var u=function(e){try{if(document.selection&&document.selection.createRange){return document.selection.createRange().getBookmark().charCodeAt(2)-2}if(e.setSelectionRange)return e.selectionStart}catch(e){return 0}},h=function(e,t){var e="string"==typeof e||e instanceof String?document.getElementById(e):e;if(!e)return!1;if(e.createTextRange){var n=e.createTextRange();return n.collapse(!0),n.moveEnd(t),n.moveStart(t),n.select(),!0}return!!e.setSelectionRange&&(e.setSelectionRange(t,t),!0)},f=function(e,t){var n=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return RegExp(n).test(t)};switch(t.off("keydown.xdsoft"),!0){case!0===i.mask:i.mask=i.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59");case"string"==e.type(i.mask):f(i.mask,t.val())||t.val(i.mask.replace(/[0-9]/g,"_")),t.on("keydown.xdsoft",function(n){var s=this.value,o=n.which;switch(!0){case o>=48&&o<=57||o>=96&&o<=105||8==o||46==o:var r=u(this),l=8!=o&&46!=o?String.fromCharCode(96<=o&&o<=105?o-48:o):"_";for(8!=o&&46!=o||!r||(r--,l="_");/[^0-9_]/.test(i.mask.substr(r,1))&&r<i.mask.length&&r>0;)r+=8==o||46==o?-1:1;if(s=s.substr(0,r)+l+s.substr(r+1),""==e.trim(s))s=i.mask.replace(/[0-9]/g,"_");else if(r==i.mask.length)break;for(r+=8==o||46==o?0:1;/[^0-9_]/.test(i.mask.substr(r,1))&&r<i.mask.length&&r>0;)r+=8==o||46==o?-1:1;f(i.mask,s)?(this.value=s,
h(this,r)):""==e.trim(s)?this.value=i.mask.replace(/[0-9]/g,"_"):t.trigger("error_input.xdsoft");break;case!!~[65,67,86,90,89].indexOf(o)&&a:case!!~[27,38,40,37,39,116,17,9,13].indexOf(o):return!0}return n.preventDefault(),!1})}}i.validateOnBlur&&t.off("blur.xdsoft").on("blur.xdsoft",function(){i.allowBlank&&!e.trim(e(this).val()).length?(e(this).val(null),n.data("xdsoft_datetime").empty()):Date.parseDate(e(this).val(),i.format)?n.data("xdsoft_datetime").setCurrentTime(e(this).val()):(e(this).val(v.now().dateFormat(i.format)),n.data("xdsoft_datetime").setCurrentTime(e(this).val())),n.trigger("changedatetime.xdsoft")}),i.dayOfWeekStartPrev=0==i.dayOfWeekStart?6:i.dayOfWeekStart-1,n.trigger("xchange.xdsoft")},n.data("options",i).on("mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),f.hide(),h.hide(),!1});var g=c.find(".xdsoft_time_box");g.append(u),g.xdsoftScroller(),n.on("afterOpen.xdsoft",function(){g.xdsoftScroller()}),n.append(o).append(c),!0!==i.withoutCopyright&&n.append(s),o.append(r).append(l),i.yearViewSelecte&&o.append(m),e("body").append(n);var v=new function(){var e=this;e.now=function(){var e=new Date;return i.yearOffset&&e.setFullYear(e.getFullYear()+i.yearOffset),e},e.currentTime=this.now(),e.isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},e.setCurrentTime=function(t){e.currentTime="string"==typeof t?e.strtodatetime(t):e.isValidDate(t)?t:e.now(),n.trigger("xchange.xdsoft")},e.empty=function(){e.currentTime=null},e.getCurrentTime=function(t){return e.currentTime},e.nextMonth=function(){var t=e.currentTime.getMonth()+1;return 12==t&&(e.currentTime.setFullYear(e.currentTime.getFullYear()+1),t=0),e.currentTime.setDate(Math.min(Date.daysInMonth[t],e.currentTime.getDate())),e.currentTime.setMonth(t),i.onChangeMonth&&i.onChangeMonth.call&&i.onChangeMonth.call(n,v.currentTime,n.data("input")),n.trigger("xchange.xdsoft"),t},e.prevMonth=function(){var t=e.currentTime.getMonth()-1;return-1==t&&(e.currentTime.setFullYear(e.currentTime.getFullYear()-1),t=11),e.currentTime.setDate(Math.min(Date.daysInMonth[t],e.currentTime.getDate())),e.currentTime.setMonth(t),i.onChangeMonth&&i.onChangeMonth.call&&i.onChangeMonth.call(n,v.currentTime,n.data("input")),n.trigger("xchange.xdsoft"),t},e.strtodatetime=function(t){var n=t?Date.parseDate(t,i.format):e.now();return e.isValidDate(n)||(n=e.now()),n},e.strtodate=function(t){var n=t?Date.parseDate(t,i.formatDate):e.now();return e.isValidDate(n)||(n=e.now()),n},e.strtotime=function(t){var n=t?Date.parseDate(t,i.formatTime):e.now();return e.isValidDate(n)||(n=e.now()),n},e.str=function(){return e.currentTime.dateFormat(i.format)}};r.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){n.data("changed",!0),v.setCurrentTime(0),n.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){t.val(v.str()),n.trigger("close.xdsoft")}),r.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,a=!1;!function e(s){v.currentTime.getMonth();t.hasClass(i.next)?v.nextMonth():t.hasClass(i.prev)&&v.prevMonth(),!a&&(n=setTimeout(e,s||100))}(500),e([document.body,window]).on("mouseup.xdsoft",function t(){clearTimeout(n),a=!0,e([document.body,window]).off("mouseup.xdsoft",t)})}),c.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,a=!1,s=110;!function e(o){var r=d[0].clientHeight,l=u[0].offsetHeight,c=Math.abs(parseInt(u.css("marginTop")));t.hasClass(i.next)&&l-r-i.timeHeightInTimePicker>=c?u.css("marginTop","-"+(c+i.timeHeightInTimePicker)+"px"):t.hasClass(i.prev)&&c-i.timeHeightInTimePicker>=0&&u.css("marginTop","-"+(c-i.timeHeightInTimePicker)+"px"),d.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(u.css("marginTop"))/(l-r))]),s=s>10?10:s-10,!a&&(n=setTimeout(e,o||s))}(500),e([document.body,window]).on("mouseup.xdsoft",function t(){clearTimeout(n),a=!0,e([document.body,window]).off("mouseup.xdsoft",t)})}),n.on("xchange.xdsoft",function(t){for(var a="",s=new Date(v.currentTime.getFullYear(),v.currentTime.getMonth(),1,12,0,0),o=0,c=v.now();s.getDay()!=i.dayOfWeekStart;)s.setDate(s.getDate()-1);a+="<table><thead><tr>";for(var d=0;d<7;d++)a+="<th>"+i.i18n[i.lang].dayOfWeek[d+i.dayOfWeekStart>6?0:d+i.dayOfWeekStart]+"</th>";a+="</tr></thead>",a+="<tbody><tr>";var p=!1,m=!1;!1!==i.maxDate&&(p=v.strtodate(i.maxDate),p=new Date(p.getFullYear(),p.getMonth(),p.getDate(),23,59,59,999)),!1!==i.minDate&&(m=v.strtodate(i.minDate),m=new Date(m.getFullYear(),m.getMonth(),m.getDate()));for(var g,x,y,b=[];o<v.currentTime.getDaysInMonth()||s.getDay()!=i.dayOfWeekStart||v.currentTime.getMonth()==s.getMonth();)b=[],o++,g=s.getDate(),x=s.getFullYear(),y=s.getMonth(),b.push("xdsoft_date"),(!1!==p&&s>p||!1!==m&&s<m)&&b.push("xdsoft_disabled"),v.currentTime.getMonth()!=y&&b.push("xdsoft_other_month"),(i.defaultSelect||n.data("changed"))&&v.currentTime.dateFormat("d.m.Y")==s.dateFormat("d.m.Y")&&b.push("xdsoft_current"),c.dateFormat("d.m.Y")==s.dateFormat("d.m.Y")&&b.push("xdsoft_today"),(0==s.getDay()||6==s.getDay()||~i.weekends.indexOf(s.dateFormat("d.m.Y")))&&b.push("xdsoft_weekend"),a+='<td data-date="'+g+'" data-month="'+y+'" data-year="'+x+'" class="xdsoft_date xdsoft_day_of_week'+s.getDay()+" "+b.join(" ")+'"><div>'+g+"</div></td>",s.getDay()==i.dayOfWeekStartPrev&&(a+="</tr>"),s.setDate(g+1);a+="</tbody></table>",l.html(a),r.find(".xdsoft_label span").eq(0).text(i.i18n[i.lang].months[v.currentTime.getMonth()]),r.find(".xdsoft_label span").eq(1).text(v.currentTime.getFullYear());var _="",w="",y="",C=function(e,t){var a=v.now();a.setHours(e),e=parseInt(a.getHours()),a.setMinutes(t),t=parseInt(a.getMinutes()),b=[],(!1!==i.maxTime&&v.strtotime(i.maxTime).getTime()<a.getTime()||!1!==i.minTime&&v.strtotime(i.minTime).getTime()>a.getTime())&&b.push("xdsoft_disabled"),(i.defaultSelect||n.data("changed"))&&parseInt(v.currentTime.getHours())==parseInt(e)&&(i.step>59||Math[i.roundTime](v.currentTime.getMinutes()/i.step)*i.step==parseInt(t))&&b.push("xdsoft_current"),parseInt(c.getHours())==parseInt(e)&&parseInt(c.getMinutes())==parseInt(t)&&b.push("xdsoft_today"),_+='<div class="xdsoft_time '+b.join(" ")+'" data-hour="'+e+'" data-minute="'+t+'">'+a.dateFormat(i.formatTime)+"</div>"};if(i.allowTimes&&e.isArray(i.allowTimes)&&i.allowTimes.length)for(var o=0;o<i.allowTimes.length;o++)w=v.strtotime(i.allowTimes[o]).getHours(),y=v.strtotime(i.allowTimes[o]).getMinutes(),C(w,y);else for(var o=0,d=0;o<(i.hours12?12:24);o++)for(d=0;d<60;d+=i.step)w=(o<10?"0":"")+o,y=(d<10?"0":"")+d,C(w,y);u.html(_);var k="",o=0;for(o=parseInt(i.yearStart,10)+i.yearOffset;o<=parseInt(i.yearEnd,10)+i.yearOffset;o++)k+='<div class="xdsoft_option '+(v.currentTime.getFullYear()==o?"xdsoft_current":"")+'" data-value="'+o+'">'+o+"</div>";for(f.children().eq(0).html(k),o=0,k="";o<=11;o++)k+='<div class="xdsoft_option '+(v.currentTime.getMonth()==o?"xdsoft_current":"")+'" data-value="'+o+'">'+i.i18n[i.lang].months[o]+"</div>";h.children().eq(0).html(k),e(this).trigger("generate.xdsoft"),t.stopPropagation()}).on("afterOpen.xdsoft",function(){if(i.timepicker&&u.find(".xdsoft_current").length){var e=d[0].clientHeight,t=u[0].offsetHeight,n=u.find(".xdsoft_current").index()*i.timeHeightInTimePicker+1;t-e<n&&(n=t-e),u.css("marginTop","-"+parseInt(n)+"px"),d.trigger("scroll_element.xdsoft_scroller",[parseInt(n)/(t-e)])}});var x=0;l.on("click.xdsoft","td",function(){x++;var a=e(this),s=v.currentTime;if(a.hasClass("xdsoft_disabled"))return!1;s.setFullYear(a.data("year")),s.setMonth(a.data("month")),s.setDate(a.data("date")),n.trigger("select.xdsoft",[s]),t.val(v.str()),(x>1||!0===i.closeOnDateSelect||0===i.closeOnDateSelect&&!i.timepicker)&&!i.inline&&n.trigger("close.xdsoft"),i.onSelectDate&&i.onSelectDate.call&&i.onSelectDate.call(n,v.currentTime,n.data("input")),n.data("changed",!0),n.trigger("xchange.xdsoft"),n.trigger("changedatetime.xdsoft"),setTimeout(function(){x=0},200)}),u.on("click.xdsoft","div",function(){var t=e(this),a=v.currentTime;if(t.hasClass("xdsoft_disabled"))return!1;a.setHours(t.data("hour")),a.setMinutes(t.data("minute")),n.trigger("select.xdsoft",[a]),n.data("input").val(v.str()),!i.inline&&n.trigger("close.xdsoft"),i.onSelectTime&&i.onSelectTime.call&&i.onSelectTime.call(n,v.currentTime,n.data("input")),n.data("changed",!0),n.trigger("xchange.xdsoft"),n.trigger("changedatetime.xdsoft")}),n.mousewheel&&o.mousewheel(function(e,t,n,a){return!i.scrollMonth||(t<0?v.nextMonth():v.prevMonth(),!1)}),n.mousewheel&&d.unmousewheel().mousewheel(function(e,t,n,a){if(!i.scrollTime)return!0;var s=d[0].clientHeight,o=u[0].offsetHeight,r=Math.abs(parseInt(u.css("marginTop"))),l=!0;return t<0&&o-s-i.timeHeightInTimePicker>=r?(u.css("marginTop","-"+(r+i.timeHeightInTimePicker)+"px"),l=!1):t>0&&r-i.timeHeightInTimePicker>=0&&(u.css("marginTop","-"+(r-i.timeHeightInTimePicker)+"px"),l=!1),d.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(u.css("marginTop"))/(o-s))]),e.stopPropagation(),l}),n.on("changedatetime.xdsoft",function(){i.onChangeDateTime&&i.onChangeDateTime.call&&i.onChangeDateTime.call(n,v.currentTime,n.data("input"))}).on("generate.xdsoft",function(){i.onGenerate&&i.onGenerate.call&&i.onGenerate.call(n,v.currentTime,n.data("input"))});var y=0;t.mousewheel&&t.mousewheel(function(e,a,s,r){return!i.scrollInput||(!i.datepicker&&i.timepicker?(y=u.find(".xdsoft_current").length?u.find(".xdsoft_current").eq(0).index():0,y+a>=0&&y+a<u.children().length&&(y+=a),u.children().eq(y).length&&u.children().eq(y).trigger("mousedown"),!1):i.datepicker&&!i.timepicker?(o.trigger(e,[a,s,r]),t.val&&t.val(v.str()),n.trigger("changedatetime.xdsoft"),!1):void 0)});var b=function(){var t=n.data("input").offset(),a=t.top+n.data("input")[0].offsetHeight-1,i=t.left;a+n[0].offsetHeight>e(window).height()+e(window).scrollTop()&&(a=t.top-n[0].offsetHeight+1),i+n[0].offsetWidth>e(window).width()&&(i=t.left-n[0].offsetWidth+n.data("input")[0].offsetWidth),n.css({left:i,top:a})};n.on("open.xdsoft",function(){var t=!0;i.onShow&&i.onShow.call&&(t=i.onShow.call(n,v.currentTime,n.data("input"))),!1!==t&&(n.show(),n.trigger("afterOpen.xdsoft"),b(),e(window).off("resize.xdsoft",b).on("resize.xdsoft",b),i.closeOnWithoutClick&&e([document.body,window]).on("mousedown.xdsoft",function t(){n.trigger("close.xdsoft"),e([document.body,window]).off("mousedown.xdsoft",t)}))}).on("close.xdsoft",function(e){var t=!0;i.onClose&&i.onClose.call&&(t=i.onClose.call(n,v.currentTime,n.data("input"))),!1===t||i.opened||i.inline||n.hide(),e.stopPropagation()}).data("input",t);var _=0;n.data("xdsoft_datetime",v),n.setOptions(i);var w=i.value?i.value:t&&t.val&&t.val()?t.val():"";w&&v.isValidDate(w=Date.parseDate(w,i.format))?n.data("changed",!0):w="",v.setCurrentTime(w||0),n.trigger("afterOpen.xdsoft"),t.data("xdsoft_datetimepicker",n).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(e){t.is(":disabled")||t.is(":hidden")||!t.is(":visible")||(clearTimeout(_),_=setTimeout(function(){t.is(":disabled")||t.is(":hidden")||!t.is(":visible")||(v.setCurrentTime(t&&t.val&&t.val()?t.val():0),n.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(t){var a=(this.value,t.which);switch(!0){case!!~[13].indexOf(a):e("input:visible,textarea:visible");return n.trigger("close.xdsoft"),!1;case!!~[9].indexOf(a):return n.trigger("close.xdsoft"),!0}})},o=function(t){var n=t.data("xdsoft_datetimepicker");n&&(n.data("xdsoft_datetime",null),n.remove(),t.data("xdsoft_datetimepicker",null).off("open.xdsoft focusin.xdsoft focusout.xdsoft mousedown.xdsoft blur.xdsoft keydown.xdsoft"),e(window).off("resize.xdsoft"),e([window,document.body]).off("mousedown.xdsoft"),t.unmousewheel&&t.unmousewheel())};return e(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){17==e.keyCode&&(a=!0)}).on("keyup.xdsoftctrl",function(e){17==e.keyCode&&(a=!1)}),this.each(function(){var t;if(t=e(this).data("xdsoft_datetimepicker")){if("string"===e.type(n))switch(n){case"show":e(this).select().focus(),t.trigger("open.xdsoft");break;case"hide":t.trigger("close.xdsoft");break;case"destroy":o(e(this));break;case"reset":this.value=this.defaultValue,this.value&&t.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,i.format))||t.data("changed",!1),t.data("xdsoft_datetime").setCurrentTime(this.value)}else t.setOptions(n);return 0}"string"!==e.type(n)&&s(e(this))})}}(jQuery),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(e){return null==Date.formatFunctions[e]&&Date.createNewFormat(e),this[Date.formatFunctions[e]]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var code="Date.prototype."+funcName+" = function() {return ",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;eval(code.substring(0,code.length-3)+";}")},Date.getFormatCode=function(e){switch(e){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(e)+"' + "}},Date.parseDate=function(e,t){null==Date.parseFunctions[t]&&Date.createParser(t);var n=Date.parseFunctions[t];return Date[n](e)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$"),eval(code)},Date.formatCodeToRegex=function(e,t){switch(e){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:0,c:null,s:"(?:\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+t+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+t+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+t+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+t+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(e)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var e=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var t=0;t<this.getMonth();++t)e+=Date.daysInMonth[t];return e+this.getDate()-1},Date.prototype.getWeekOfYear=function(){var e=this.getDayOfYear()+(4-this.getDay()),t=new Date(this.getFullYear(),0,1),n=7-t.getDay()+4;return document.write(n),String.leftPad((e-n)/7+1,2,"0")},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100||e%400==0&&e)},Date.prototype.getFirstDayOfMonth=function(){var e=(this.getDay()-(this.getDate()-1))%7;return e<0?e+7:e},Date.prototype.getLastDayOfMonth=function(){var e=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return e<0?e+7:e},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(e){return e.replace(/('|\\)/g,"\\$1")},String.leftPad=function(e,t,n){var a=new String(e);for(null==n&&(n=" ");a.length<t;)a=n+a;return a},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"},function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var i,s=t||window.event,o=[].slice.call(arguments,1),r=0,l=0,c=0,d=0,u=0;return t=e.event.fix(s),t.type="mousewheel",s.wheelDelta&&(r=s.wheelDelta),s.detail&&(r=-1*s.detail),s.deltaY&&(c=-1*s.deltaY,r=c),s.deltaX&&(l=s.deltaX,r=-1*l),void 0!==s.wheelDeltaY&&(c=s.wheelDeltaY),void 0!==s.wheelDeltaX&&(l=-1*s.wheelDeltaX),d=Math.abs(r),(!n||d<n)&&(n=d),u=Math.max(Math.abs(c),Math.abs(l)),(!a||u<a)&&(a=u),i=r>0?"floor":"ceil",r=Math[i](r/n),l=Math[i](l/a),c=Math[i](c/a),o.unshift(t,r,l,c),(e.event.dispatch||e.event.handle).apply(this,o)}var n,a,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(e.event.fixHooks)for(var o=i.length;o;)e.event.fixHooks[i[--o]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=s.length;e;)this.addEventListener(s[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=s.length;e;)this.removeEventListener(s[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function($){function squeeze(e){for(var t=fieldsToValidate(e),n=0;n<t.length;n++)bindField(t[n])}function submitListener(e,t,n){for(var a=!0,i=fieldsToValidate(e),s=0;s<i.length;s++){if(i[s].hasClass(errorClass)){a=!1;break}var o=extractValidations(i[s],n);buildErrorList(o,i[s]).length&&(fieldValidateHandler(i[s],o,t),a=!1)}return a}function fieldsToValidate(e){for(var t="input textarea select".split(" "),n=[],a=0;a<t.length;a++)e.find(t[a]+"["+options.validationAttribute+"*="+validate+"]").each(function(){$(this).prop("readonly")&&!isDropdownField($(this))||$(this).prop("disabled")||n.push($(this))});return n}function bindField(e){var t=extractValidations(e),n=!1;e.bind("change",function(a,i){if(!e.hasClass(errorClass)){var s=buildErrorList(t,e);setTimeout(function(){Utils.notBlank(s)&&(n=fieldValidateHandler(e,t,i))},200)}}),e.click(function(){options.hideContainer(e),n=!1}),("checkbox"==e.attr("type")||isDropdownField(e)||isDateField(e))&&e.change(function(){$(this).blur()})}function fieldValidateHandler(e,t,n){var a=!1;if(e.hasClass(errorClass)||(a=!1),"msie"==Utils.getBrowserInfo().browser&&isDateField(e)&&!e.val()){var i=buildErrorList(t,e);if(n&&a)return;i.length?a||(options.showContainer(e,i),a=!0):(options.hideContainer(e),a=!1)}else{var i=buildErrorList(t,e);if(n&&a)return;i.length?a||(options.showContainer(e,i),a=!0):(options.hideContainer(e),a=!1)}return a}function extractValidations(e,t){var n=e.attr(options.validationAttribute);n=n.substr(n.indexOf(validate)+validate.length+1);for(var a=[],i="",s=0,o=0;o<n.length;o++)switch(n[o]){case",":s?i+=",":(contains(trim(i),t)||a.push(trim(i)),i="");break;case"(":i+="(",s++;break;case")":s?(i+=")",s--):contains(trim(i),t)||a.push(trim(i));break;default:i+=n[o]}return a}function contains(e,t){if(!e||!t)return!1;for(var n=t.length;n--;)if(t[n]===e)return!0;return!1}function trim(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function getFunctionName(e){return-1!=e.indexOf("(")?e.substr(0,e.indexOf("(")):e}function buildParams(e){if(-1!=e.indexOf("(")){for(var t=e.substring(e.indexOf("(")+1,e.length-1).split(","),n="",a=0;a<t.length;a++){var i=trim(t[a]);parseInt(i)?n+=","+i:n+=',"'+i+'"'}return n}return""}function formatMessage(e,t){if(e.split("$arg").length-1)for(var n=t.split(","),a=1;a<n.length;a++)e=e.replace("$arg"+a,n[a]);return e}function isRequired(e){return!1}function buildErrorList(validations,field){for(var list="",i=0;i<validations.length;i++){var funcName=getFunctionName(validations[i]),params=buildParams(validations[i]);if(!eval('$.fn.ketchup.validations["'+funcName+'"](field, field.val()'+params+")")){list+=formatMessage($.fn.ketchup.messages[funcName],params);break}}return list}function watchSelect(e){$("input["+$.fn.ketchup.defaults.validationAttribute+'*="'+e+'"]').each(function(){var t=$(this);$('input[name="'+t.attr("name")+'"]').each(function(){var n=$(this),a=t.val();n.data(preValueKey,a),-1==n.attr($.fn.ketchup.defaults.validationAttribute).indexOf(e)&&n.blur(function(){t.change()})})})}var validate="validate",preValueKey="preValue",errorClass="pawjzs-error",errorContainer=$("<div>",{html:"<ol></ol><span></span>"}).addClass("ketchup-error-container"),initialPositionContainer=function(e,t){var n=t.position();e.css({left:n.left+t.width()-10,top:n.top-e.height()})},positionContainer=function(e,t){e.animate({top:t.position().top-e.height()})},isAutocompleteField=function(e){return e.hasClass("input-text")&&e.parent().hasClass("drop")&&e.parent().hasClass("autocomplete")},isDropdownField=function(e){return e.hasClass("input-text")&&(e.parent().hasClass("drop")||e.parent().hasClass("drop-disabled"))&&!e.parent().hasClass("autocomplete")},isDateField=function(e){return e.hasClass("input-text")&&e.parent().hasClass("date")},isErrorMsg=function(e){var t=!1;return $.each($.fn.ketchup.messages,function(n,a){-1!=e.indexOf(a)&&(t=!0)}),t},showContainer=function(e,t){e.data(preValueKey,e.val()),e.addClass(errorClass),(isDropdownField(e)||isDateField(e)||isAutocompleteField(e))&&e.parent().addClass(errorClass),t&&setTimeout(function(){!e.hasClass(errorClass)&&isErrorMsg(t)||(e.val(t),"password"==e.attr("ketuptype")&&"password"==e.attr("type")&&e.attr("type","text"))},200)},hideContainer=function(e){if(e.hasClass(errorClass)){if(e.removeClass(errorClass),isDropdownField(e)||isDateField(e)||isAutocompleteField(e))return e.parent().removeClass(errorClass),void(isErrorMsg($.trim(e.val()))&&e.val(""));"password"==e.attr("ketuptype")&&"text"==e.attr("type")&&e.attr("type","password");var t=e.data(preValueKey);t&&!isErrorMsg(t)?setTimeout(function(){e.val(t)},200):(isErrorMsg(e.val())&&e.val(""),e.data(preValueKey,""))}};$.fn.ketchup=function(e){return options=$.extend({},$.fn.ketchup.defaults,e),this.each(function(){squeeze($(this))})},$.fn.removeErrorMsg=function(){$(this).find("."+errorClass).removeClass(errorClass)},$.fn.ableToFinish=function(e,t){var n=null;e instanceof Array?n=e:"string"==typeof e&&(n=[e]),n&&$(this).find(".pawjzs-error").each(function(){var e=$(this);e.val(e.data("preValue")),e.removeClass("pawjzs-error")});var a=submitListener(this,!0,n);return a&&"function"==typeof t&&t(),a},$.fn.ketchup.validation=function(e,t){$.fn.ketchup.validations.push(e),$.fn.ketchup.validations[e]=t},$.fn.ketchup.messages={},$.fn.ketchup.validations=[];var options;$.fn.ketchup.defaults={validationAttribute:"class",errorContainer:errorContainer,initialPositionContainer:initialPositionContainer,positionContainer:positionContainer,showContainer:showContainer,hideContainer:hideContainer},$.fn.ketchup.messages={required:"必填项不能为空。",notspace:"不能含有空格。",notEmpty:"输入内容不能为空",comboCodeRepeatCheck:"套餐编号重复",comboNameRepeatCheck:"套餐名称重复",examitemNameRepeatCheck:"组合名称重复",minlength:"最小长度为 $arg1.",maxlength:"最大长度为 $arg1.",rangelength:"长度范围建议在 $arg1 与 $arg2 之间。",min:"值不能小于 $arg1.",minEliminateZero:"值必须大于 $arg1.",max:"值不能大于 $arg1.",range:"建议范围介于 $arg1 - $arg2 之间。",number:"请填写有效数字。",digits:"请填写有效整数。",phone:"请正确填写手机号",apptPhone:"请正确填写手机号",email:"请填写邮箱的E-mail地址。",url:"请填写邮箱的URL链接。",username:"请填写有效的用户名。",usernamenochn:"请填写有效的用户名。",name:"请填写有效的名称。",match:"必须和上一个输入框的值相等",date:"请输入一个有效的日期",minselect:"请至少选中 $arg1 个复选框。",maxselect:"最多可选择 $arg1 个复选框。",rangeselect:"请选择介于 $arg1 - $arg2 个复选框。",letter:"请填写英文字母",validatePermission:"请填写英文字母",numAndLetter:"请填写英文字母或者数字",checkLicenceNo:"存在相同执业证号，请重新输入",decimal:"输入的数据格式不正确",sp:"请输入数字",dp:"请输入整数",positivenum:"请输入正数",idCardCheack:"请输入正确的身份证号码",mecIdCardCheack:"请输入正确的身份证号码",dpLgSp:"实际价格不能大于标准价格",birthday:"生日不能大于当前日期",validity:"有效期应大于当前日期",checkDiagnosisCodeRepeat:"诊断编号重复",checkDiagnosisNameRepeat:"诊断名称重复",notChn:"此项不能为中文",validatePassword:"两次输入的密码不一样，请重试。",chnAndEn:"只能输入中文和英文",chineseMedicineNum:"请输入正确的国药准字",telephone:"请输入正确的电话号码",patientName:"请填写有效的名称",patientNo:"请输入数字、字母、横杠等字符",toothpricerules:"输入的数据格式不正确",numDecimal:"最多输入$arg1位小数",drugDecimal:"输入的数据格式不正确"},$.fn.ketchup.validation("birthday",function(e,t){return!(t>(new Date).Format("yyyy-MM-dd"))}),$.fn.ketchup.validation("validity",function(e,t){return t=$.trim(t),0===t.length||!(t<(new Date).Format("yyyy-MM-dd"))}),$.fn.ketchup.validation("validatePassword",function(e,t){return t==$("#"+e.attr("compareval")).val()}),$.fn.ketchup.validation("idCardCheack",function(e,t){if("居民身份证"==$("#cardType").val()){if(t=$.trim(t),0==t.length)return!0;if(!1===isCardNo(t))return!1;if(!1===checkProvince(t))return!1;if(!1===checkBirthday(t))return!1;if(!1===checkParity(t))return!1;idCardVerifySuccess(t)}return!0}),$.fn.ketchup.validation("mecIdCardCheack",function(e,t){if(1==getSelectValue($("#fidCardTypeCodeDiv"))){if(!1===isCardNo(t))return!1;if(!1===checkProvince(t))return!1;if(!1===checkBirthday(t))return!1;if(!1===checkParity(t))return!1;$("#fpatientBirthDate").val(getBirthDay(t)),setSelectValue($("#fpatientSexDiv"),getGender(t)),$("#fage").val(getAge(getBirthDay(t)))}return!0}),$.fn.ketchup.validation("positivenum",function(e,t){return t=$.trim(t),0==t.length||!(isNaN(t)||t<=0)}),$.fn.ketchup.validation("dp",function(e,t){if(isNaN(t)||!t)return!1;if((t=parseInt(t))<=0)return!1;var n=$("#sp").val();if(n&&0!=n){var a=t/n*100;$("#discount").val(a.toFixed(2))}return!0}),$.fn.ketchup.validation("dpLgSp",function(e,t){var n=parseInt($("#sp").val()),a=parseInt($("#dp").val());return!(a&&n&&a>n)}),$.fn.ketchup.validation("sp",function(e,t){if(t&&0!=t){var n=$("#dp").val();if(n){var a=n/t;$("#discount").val(a)}}return!0}),$.fn.ketchup.validation("comboNameRepeatCheck",function(e,t){t=$.trim(t);var n={},a=!0;if(t){n.comboName=t,n.clinicId="111",n.comboId=$.trim($("#comboId").val());var i={url:Context_MEC_Server+"combo/comboNameRepeatCheck",dataType:"json",contentType:"application/json",async:!1,data:JSON.stringify(n)};Utils.myAjaxHandler(i).done(function(e){var t=$.parseJSON(e.data);a=!t}).fail(function(e){}).always(function(){})}return a}),$.fn.ketchup.validation("examitemNameRepeatCheck",function(e,t){t=$.trim(t);var n={},a=!0;if(t){n.examitemName=t,n.itemId=$.trim($("#FCEXAMITEMCODE").val());var i={url:Context_MEC_Server+"examitemMain/examitemNameRepeatCheck",dataType:"json",contentType:"application/json",async:!1,data:JSON.stringify(n)};Utils.myAjaxHandler(i).done(function(e){var t=$.parseJSON(e.data);a=!t}).fail(function(e){}).always(function(){})}return a}),$.fn.ketchup.validation("comboCodeRepeatCheck",function(e,t){t=$.trim(t);var n={},a=!0;if(t){n.code=t,n.comboId=$.trim($("#comboId").val());var i={url:Context_MEC_Server+"combo/comboCodeRepeatCheck",dataType:"json",contentType:"application/json",async:!1,data:JSON.stringify(n)};Utils.myAjaxHandler(i).done(function(e){var t=$.parseJSON(e.data);a=!t}).fail(function(e){}).always(function(){})}return a}),$.fn.ketchup.validation("checkDiagnosisCodeRepeat",function(e,t){t=$.trim(t);var n={},a=!0;if(t){n.diagnosisCode=t,n.diagnosisId=$.trim($("#diagnosisId").val());var i={url:Context_MEC_Server+"diagnosis/checkDiagnosisRepeat",dataType:"json",contentType:"application/json",async:!1,data:JSON.stringify(n)};Utils.myAjaxHandler(i).done(function(e){var t=$.parseJSON(e.data);a=!t}).fail(function(e){}).always(function(){})}return a}),$.fn.ketchup.validation("checkDiagnosisNameRepeat",function(e,t){t=$.trim(t);var n={},a=!0;if(t){n.diagnosisName=t,n.diagnosisId=$.trim($("#diagnosisId").val());var i={url:Context_MEC_Server+"diagnosis/checkDiagnosisRepeat",dataType:"json",contentType:"application/json",async:!1,data:JSON.stringify(n)};Utils.myAjaxHandler(i).done(function(e){var t=$.parseJSON(e.data);a=!t}).fail(function(e){}).always(function(){})}return a}),$.fn.ketchup.validation("required",function(e,t){if("checkbox"==e.attr("type"))return 1==e.attr("checked");if(isDropdownField($(e))){var t=$.trim($(e).attr("val"));return void 0!=t&&$.trim($(e).attr("val")).length>0}
return 0!=t.length}),$.fn.ketchup.validation("notspace",function(e,t){return-1==t.indexOf(" ")}),$.fn.ketchup.validation("notEmpty",function(e,t){return""!=$.trim(t)}),$.fn.ketchup.validation("checkLicenceNo",function(e,t){t=$.trim(t);return!0}),$.fn.ketchup.validation("minlength",function(e,t,n){return t=$.trim(t),0==t.length||!(t.length<n)}),$.fn.ketchup.validation("maxlength",function(e,t,n){return t=$.trim(t),0==t.length||!(t.length>n)}),$.fn.ketchup.validation("rangelength",function(e,t,n,a){return t=$.trim(t),0==t.length||t.length>=n&&t.length<=a}),$.fn.ketchup.validation("min",function(e,t,n){return t=$.trim(t),0==t.length||!(Number(t)<n)}),$.fn.ketchup.validation("minEliminateZero",function(e,t,n){return t=$.trim(t),0==t.length||!(Number(t)<=n)}),$.fn.ketchup.validation("max",function(e,t,n){return t=$.trim(t),0==t.length||!(Number(t)>n)}),$.fn.ketchup.validation("range",function(e,t,n,a){return t=$.trim(t),0==t.length||parseInt(t)>=n&&parseInt(t)<=a}),$.fn.ketchup.validation("number",function(e,t){return t=$.trim(t),0==t.length||!!/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(t)}),$.fn.ketchup.validation("decimal",function(element,value,len){return value=$.trim(value),0==value.length||(eval("var reg = /^[0-9]+([.]{1}[0-9]{1,"+len+"}){0,1}$/;"),!!reg.test(value))}),$.fn.ketchup.validation("digits",function(e,t){return t=$.trim(t),0==t.length||!!/^\d*$/.test(t)}),$.fn.ketchup.validation("email",function(e,t){return t=$.trim(t),0==t.length||(!t||!!/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(t))}),$.fn.ketchup.validation("phone",function(e,t){return t=$.trim(t),0==t.length||(!t||!(!/^(1)\d{10}$/.test(t)||11!==t.length))}),$.fn.ketchup.validation("apptPhone",function(e,t){return t=$.trim(t),0==t.length||(!t||(!(!/^(1)\d{10}$/.test(t)||11!==t.length)||!!/^\d{7,8}$/.test(t)))}),$.fn.ketchup.validation("telephone",function(e,t){return t=$.trim(t),0==t.length||(!t||!!/^((0\d{2,3}-\d{7,8})|(1\d{10})|([\d]{8}))$/.test(t))}),$.fn.ketchup.validation("chineseMedicineNum",function(e,t){return t=$.trim(t),0==t.length||(!t||!(!/^[a-zA-Z]{1,2}[0-9]{8}$/.test(t)||9!==t.length))}),$.fn.ketchup.validation("url",function(e,t){return t=$.trim(t),0==t.length||(!t||!!/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t))}),$.fn.ketchup.validation("username",function(e,t){return t=$.trim(t),0==t.length||(!t||!(!/^([a-zA-Z])[a-zA-Z_-]*[\w_-]*[\S]$|^([a-zA-Z])[0-9_-]*[\S]$|^[a-zA-Z]*[\S]$/.test(t)&&!/[\u4E00-\u9FA5\uF900-\uFA2D]/.test(t)))}),$.fn.ketchup.validation("usernamenochn",function(e,t){return t=$.trim(t),0==t.length||(!t||!!/^([a-zA-Z])[a-zA-Z_-]*[\w_-]*[\S]$|^([a-zA-Z])[0-9_-]*[\S]$|^[a-zA-Z]*[\S]$/.test(t))}),$.fn.ketchup.validation("name",function(e,t){return t=$.trim(t),0!=t.length&&(!t||!(!/^([a-zA-Z])[a-zA-Z_-]*[\w_-]*[\S]$|^([a-zA-Z])[0-9_-]*[\S]$|^[a-zA-Z]*[\S]$/.test(t)&&!/[\u4E00-\u9FA5\uF900-\uFA2D]/.test(t)))}),$.fn.ketchup.validation("patientName",function(e,t){return!(t=$.trim(t))||!!/^[^#$%&\?\^*]*$/gi.test(t)}),$.fn.ketchup.validation("patientNo",function(e,t){return t=$.trim(t),!(0!=t.length&&!/^[0-9A-Za-z\-]{0,20}$/.test(t))}),$.fn.ketchup.validation("letter",function(e,t,n){return t=$.trim(t),0==t.length||(!t||!!/^[a-zA-Z]*$/.test(t))}),$.fn.ketchup.validation("numAndLetter",function(e,t,n){return t=$.trim(t),0==t.length||(!t||!!/^[a-zA-Z0-9]*$/.test(t))}),$.fn.ketchup.validation("notChn",function(e,t,n){return t=$.trim(t),0==t.length||!/[\u4e00-\u9fa5]+/.test(t)}),$.fn.ketchup.validation("chnAndEn",function(e,t,n){return t=$.trim(t),0==t.length||!!/[a-zA-Z\u4e00-\u9fa5]+/.test(t)}),$.fn.ketchup.validation("match",function(e,t,n){return t=$.trim(t),0==t.length||(!t||$(n).val()==t)}),$.fn.ketchup.validation("date",function(e,t){return t=$.trim(t),t=t.replace(/\-/g,"/"),0==t.length||new Date(t).getDate()==t.substring(t.length-2)}),$.fn.ketchup.validation("minselect",function(e,t,n){return $('input[name="'+e.attr("name")+'"]:checked').length,!0}),$.fn.ketchup.validation("maxselect",function(e,t,n){return $('input[name="'+e.attr("name")+'"]:checked').length,!0}),$.fn.ketchup.validation("rangeselect",function(e,t,n,a){var i=$('input[name="'+e.attr("name")+'"]:checked');return i.length>=n&&i.length,!0}),$.fn.ketchup.validation("toothpricerules",function(e,t){if(t.indexOf(" ")>-1&&!$.trim(t))return!1;if(t=$.trim(t),0==t.length)return!0;if(t.indexOf(".")>-1){if(0==t.charAt(0)&&"."!=t.charAt(1))return!1}else if(0==t.charAt(0)&&t.charAt(1))return!1;return!(t.replace(".","").length>8)&&!!/^\d*(?:.\d{0,2})?$/.test(t)}),$.fn.ketchup.validation("numDecimal",function(e,t,n){return t=$.trim(t),0==t.length||!(-1!=t.indexOf(".")&&t.substr(t.indexOf(".")+1).length>n)}),$.fn.ketchup.validation("drugDecimal",function(e,t,n){if(t=$.trim(t),0==t.length)return!0;if(-1==t.indexOf(".")){if(t.length>5)return!1}else{if(t.split(".")[1].length>5||t.length>11)return!1}return!0}),$(document).ready(function(){watchSelect("minselect"),watchSelect("maxselect"),watchSelect("rangeselect")})}(jQuery),function(e){function t(t,n){this.wrapper=n||e(window.top.document.body),this.popWrapper=null,this.cont_outer=null,this.cont_inner=null,this.init(t)}e.fn.reveal=function(t){var n={animation:"none",closeOnBG:!1,dismissmodalclass:"close-reveal-modal",dismissmodalid:"close-modal",scrollTop:e(document).scrollTop()+"",background:!0,posFixed:!0,ableToMove:!0,onHide:function(){}},t=e.extend({},n,t);return this.each(function(){function n(){r=!1}function a(){r=!0}var i=e(this),s=parseInt(i.css("top")),o=i.height()+s,r=!1,l=e(".reveal-modal-bg");t.posFixed||(i.css("position","absolute"),l.css("position","absolute")),0==l.length&&t.background&&(l=e('<div class="reveal-modal-bg" />').insertBefore(i)),i.on("reveal:open",function(){l.off("click.modalEvent"),e("."+t.dismissmodalclass).off("click.modalEvent"),r||(a(),"fadeAndPop"==t.animation&&(i.css({top:t.scrollTop-o,opacity:0,display:"block"}),l.fadeIn(t.animationspeed/2),i.delay(t.animationspeed/2).animate({top:-1!=t.scrollTop.indexOf("%")?t.scrollTop:t.scrollTop()+s+"px",opacity:1},t.animationspeed,n())),"fade"==t.animation&&(i.css({opacity:0,display:"block",top:-1!=t.scrollTop.indexOf("%")?t.scrollTop:t.scrollTop+s}),l.fadeIn(t.animationspeed/2),i.delay(t.animationspeed/2).animate({opacity:1},t.animationspeed,n())),"none"==t.animation&&(i.css({display:"block",top:-1!=t.scrollTop.indexOf("%")?t.scrollTop:t.scrollTop+s}),l.css({display:"block"}),n())),i.off("reveal:open")}),i.on("reveal:close",function(){r||(a(),"fadeAndPop"==t.animation&&(l.delay(t.animationspeed).fadeOut(t.animationspeed),i.animate({top:-1!=t.scrollTop.indexOf("%")?t.scrollTop:t.scrollTop()+s+"px",opacity:0},t.animationspeed/2,function(){i.css({top:s,opacity:1,display:"none"}),n()})),"fade"==t.animation&&(l.delay(t.animationspeed).fadeOut(t.animationspeed),i.animate({opacity:0},t.animationspeed,function(){i.css({opacity:1,display:"none",top:s}),n()})),"none"==t.animation&&(i.css({display:"none",top:s}),l.css({display:"none"})),t.onHide()),i.off("reveal:close")}),i.trigger("reveal:open"),i.on("reveal:move",function(){function t(t){var n=i,o=Math.max(t.clientX-a+Number(n.css("margin-left").replace(/px$/,""))||0,-n.position().left),r=Math.max(t.clientY-s+Number(n.css("margin-top").replace(/px$/,""))||0,-n.position().top);o=Math.min(o,e(window).width()-n.width()-n.position().left),r=Math.min(r,e(window).height()-n.height()-n.position().top),a=t.clientX,s=t.clientY,n.css({"margin-left":o,"margin-top":r})}function n(a){var i=o.css("cursor","default").get(0);i.releaseCapture?(i.releaseCapture(),i.onmousemove=i.onmouseup=null):e(document).off("mousemove",t).off("mouseup",n)}l.off("click.modalEvent");var a,s,o;i.find(".title").mousedown(function(i){a=i.clientX,s=i.clientY,o=e(this).css("cursor","move"),this.setCapture?(this.setCapture(),this.onmousemove=function(e){t(e||event)},this.onmouseup=n):e(document).off("mousemove").on("mousemove",t).off("mouseup").on("mouseup",n)}),i.off("reveal:move")}),t.ableToMove&&i.find(".title").length>0&&i.trigger("reveal:move"),e("."+t.dismissmodalclass).off("click.modalEvent").on("click.modalEvent",function(){i.trigger("reveal:close")}),e("#"+t.dismissmodalid).off("click.modalEvent").on("click.modalEvent",function(){i.trigger("reveal:close")}),t.closeOnBG&&(l.css({cursor:"pointer"}),l.off("click.modalEvent").on("click.modalEvent",function(){i.trigger("reveal:close")}))})},e.paConfirm=function(t){e("body").append('<div id="pa-bg-confirm"><div id="pa-confirm" class="reveal-modal msg"><span id="icon_close" class="icon_close"></span><div class="alt-confirm"></div><div id="cfm-msg" class="show-msg"></div><div class="btn-bar"><span class="bn-size btn-default" id="pa-cancel"></span><span class="bn-size btn-success" id="pa-save"></span></div></div></div>');var n={msg:"是否确认执行该操作？",cancelTxt:"取消",saveTxt:"保存",background:!1,closeAsOnno:!0,onYes:function(){alert("无法获取确认操作的回调函数")},onNo:function(){e("#pa-bg-confirm").remove()},closeCallback:null,hideCloseBtn:!1,confirmIconType:0},a=e.extend({},n,t),i="input"===a.msg?"<span class='ipt-label'>"+a.label+"</span><input id='cfm-input' type='text' class='input-text'/>":a.msg;switch(a.hideCloseBtn&&e("body").find("#icon_close").css("display","none"),a.background?e("body").find("#pa-bg-confirm").addClass("bg-confirm-true"):e("body").find("#pa-bg-confirm").addClass("bg-confirm-false"),e("#cfm-msg").html(i),e("#pa-cancel").text(a.cancelTxt),e("#pa-save").text(a.saveTxt),e("#pa-bg-confirm").show(),e("#pa-confirm").show(),a.closeCallback&&"function"==typeof a.closeCallback?(e("div.btn-bar span#pa-cancel").off("click").on("click",function(){a.onNo(),e("#pa-bg-confirm").remove()}),e("#icon_close").off("click").on("click",function(){a.closeCallback(),e("#pa-bg-confirm").remove()})):e("div.btn-bar span#pa-cancel, #icon_close").off("click").on("click",function(){a.onNo(),e("#pa-bg-confirm").remove()}),e("div.btn-bar span#pa-save").off("click").on("click",function(){a.onYes(),e("#pa-bg-confirm").remove()}),a.hideCancel&&e("#pa-cancel").remove(),a.hideSave&&e("#pa-save").remove(),a.confirmIconType){case 1:e("#pa-confirm").find(".alt-confirm").addClass("alt-confirm-success");break;case 2:e("#pa-confirm").find(".alt-confirm").addClass("alt-confirm-warning");break;case 3:e("#pa-confirm").find(".alt-confirm").addClass("alt-confirm-error")}},e.paAlert=function(t,n,a){if(t){var i=n||2e3;e("body").append('<div id="pa-alert" class="reveal-modal msg"><div class="alt-normal"></div><div id="alt-msg" class="alt-msg"></div></div>'),e("#alt-msg").text(t),e("#pa-alert").fadeIn("0",function(){setTimeout(function(){e("#pa-alert").fadeOut("0",a).remove()},i)})}},e.paSuccess=function(t,n,a){if(t){var i=n||2e3;e("body").append('<div id="pa-succ" class="reveal-modal msg"><div class="alt-correct"></div><div id="succ-msg" class="alt-msg"></div></div>'),e("#succ-msg").text(t),e("#pa-succ").fadeIn("0",function(){setTimeout(function(){e("#pa-succ").fadeOut("0",a).remove()},i)})}},e.paWarn=function(t,n,a){if(t){var i=n||2e3;e("body").append('<div id="pa-warn" class="reveal-modal msg"><div class="msg-warning"></div><div id="wn-msg" class="alt-msg"></div></div>'),e("#wn-msg").text(t),e("#pa-warn").fadeIn("0",function(){setTimeout(function(){e("#pa-warn").fadeOut("0",a).remove()},i)})}},e.paError=function(t,n,a){if(t){var i=n||2e3;e("body").append('<div id="pa-error" class="reveal-modal msg"><div class="msg-error"></div><div id="er-msg" class="alt-msg"></div></div>'),e("#er-msg").text(t),e("#pa-error").fadeIn("0",function(){setTimeout(function(){e("#pa-error").fadeOut("0",a).remove()},i)})}},t.prototype={defaults:{mbbgColor:"rgba(255,255,255,0)",titleText:"标题",contHtml:"暂时无内容！"},init:function(t){this.options=e.extend({},this.defaults,t),this.renderPop()},renderPop:function(){var t=this,n=document.createElement("div"),a=e(n);a.addClass("css_newpopup_wrap"),t.wrapperHandle=a;var i=document.createElement("div"),s=e(i);s.addClass("css_newpopup_mb"),s.css({"background-color":t.options.mbbgColor});var o=document.createElement("div"),r=e(o);r.addClass("css_newpopup"),t.options.top&&r.css("marginTop",t.options.top+"px"),t.options.left&&r.css("marginLeft",t.options.left+"px");var l=document.createElement("div"),c=e(l);c.addClass("css_newpopup_title"),c.text(t.options.titleText);var d=document.createElement("span"),u=e(d);u.addClass("css_newpopup_close");var p=document.createElement("div"),h=e(p);h.addClass("css_newpopup_cont");var f=document.createElement("div"),m=e(f);m.addClass("css_newpopup_cont_inner"),c.append(u),r.append(c),h.append(m),r.append(h),a.append(s),a.append(r),t.wrapper.append(a),u.on("click",function(){t.close()}),t.popWrapper=r,t.cont_outer=h,t.cont_inner=m,t.setContent(t.options.contHtml)},close:function(){this.wrapperHandle.fadeOut(200)},open:function(){this.wrapperHandle.fadeIn(300)},setContent:function(e){var t=this.cont_outer,n=this.cont_inner,a=this.popWrapper,i=e;n.html(i),a.height()<n.height()?(a.css({height:"80%","max-height":""}),t.css("height","100%")):(a.css({"max-height":"80%",height:"auto"}),t.css("height","auto"))}},e.fn.extend({newPopup:function(n){return new t(n,e(this))}}),window.NewPopup=t}(jQuery),function(e){function t(e,t,n){var a=e,i=n;this._element=t,this._init(a,i)}t.prototype={options:{containerId:"my-page",pageCount:0,pageSize:9,currentPage:1,callback:null,dataKey:null,currentPageKey:null,totalPageKey:null,listType:null,pageSizeDefault:20,tableBody:null},tableOption:{tableElement:".table",sortOn:!1,ths:[],sortType:"",sortCurrTh:""},ajaxopts:{showMask:!0,method:"POST",url:"",dataType:"json",data:"",contentType:"application/json"},pageFlag:!1,_element:null,_init:function(t,n){var a=this;a.options=e.extend(!0,{},a.options,t),"card"!=a.options.listType&&(a.options.pageSize="10"==a.options.pageSizeDefault||"20"==a.options.pageSizeDefault||"50"==a.options.pageSizeDefault?a.options.pageSizeDefault:"20"),a.tableOption=e.extend(!0,{},a.tableOption,n),a.options.ajaxopts&&(a.ajaxopts=e.extend(!0,{},a.ajaxopts,a.options.ajaxopts)),"number"==typeof a.options.pageCount&&a.ajaxSearchList(),a.tableOption.sortOn&&a.renderTableTh(),e(document).on("click",function(){e(".pagination_options_panel").slideUp(200)})},renderTableTh:function(){var t=this;e(t.tableOption.tableElement).addClass("tablesort"),e(t.tableOption.tableElement).find("th").each(function(n,a){""==t.tableOption.ths[n]?e(this).addClass("nobg"):e(this).off("click").on("click",function(){var n=t.tableOption.sortCurrTh,a=e(this).index();""!=t.tableOption.ths[a]&&(n!==t.tableOption.ths[a]?(t.tableOption.sortCurrTh=t.tableOption.ths[a],t.tableOption.sortType="tablesortascending",e(this).removeClass().addClass("tablesortascending").siblings("th").removeClass("tablesortascending").removeClass("tablesortdescending")):(t.tableOption.sortType="tablesortascending"==t.tableOption.sortType?"tablesortdescending":"tablesortascending",e(this).removeClass().addClass(t.tableOption.sortType)),t.ajaxSearchList())})})},renderPageNav:function(){var t=this,n=t.options.containerId;t.options.containerId=t._element.attr("id")||n;var a=t.options.listType,i=e("#"+t.options.containerId),s=e('<div class="pagination_tips">                                    共<span class="pagination_counts"></span>条数据                                     <div class="pagination_select">                                        <span class="pagination_cell_count">10</span>                                        <span class="pagination_arrow"></span>                                        <div class="pagination_options_panel"><span class="pagination_option" value="50">50</span><span class="pagination_option" value="20">20</span><span class="pagination_option" value="10">10</span></div>                                    </div> 条/页                            </div>'),o=e("<ul class='pagination'></ul>");if(i.empty(),"card"!=a&&(s.find(".pagination_cell_count").html(t.options.pageSize),s.find(".pagination_counts").html(t.options.totalRecord),s.find(".pagination_select").on("click",function(){var t=e(this).find(".pagination_options_panel");return t.is(":hidden")?t.slideDown(200):t.slideUp(200),!1}),s.find(".pagination_option").on("click",function(){var n=e(this).attr("value");return t.options.pageSize=parseInt(n),t.options.currentPage=1,t.ajaxSearchList(),!1}),s.appendTo(i)),t.options.pageCount<2)return!1;var r=t.options.currentPage=void 0===t.options.currentPage||null===t.options.currentPage?1:t.options.currentPage,l=document.createDocumentFragment(),c=document.createDocumentFragment(),d=document.createDocumentFragment(),u=2,p=parseInt(t.options.pageCount)-1;r>4&&(c=this.createLi(-3,{text:"..."}),u=parseInt(r-2)),r<t.options.pageCount-3&&(d=this.createLi(-3,{text:"..."}),p=parseInt(r+2)),l.appendChild(t.createLi(-1,{text:"上一页",id:"prePg"})),l.appendChild(t.createLi(1)),l.appendChild(c);for(var h=u;h<=p;h++){l.appendChild(t.createLi(h))}l.appendChild(d),l.appendChild(t.createLi(t.options.pageCount)),l.appendChild(t.createLi(-2,{text:"下一页",id:"nextPg"})),o.append(l),o.appendTo(i)},createLi:function(t,n){var a=this,i=n||{},s=document.createElement("li"),o=document.createElement("a");if(o.setAttribute("href","javascript:;"),s.appendChild(o),t>0)o.innerHTML=t,s.className=i.name?i.name:"",s.setAttribute("pageno",t),a.options.currentPage==parseInt(t)&&(s.className="active"),e(s).off("click").on("click",function(){if(a.options.currentPage==t)return!1;a.options.currentPage=t,a.ajaxSearchList()});else{var r=i.id?i.id:"",l=-1==t?1:2;s.className=i.name?i.name:"",o.setAttribute("id",r),o.innerHTML=i.text?i.text:"","1"==a.options.currentPage&&-1==t&&e(s).addClass("disabled"),a.options.currentPage==a.options.pageCount&&-2==t&&e(s).addClass("disabled"),-3!=t&&e(s).off("click").on("click",function(){var e=a.preOrNextHandler(l);if(e==a.options.currentPage)return!1;a.options.currentPage=e,a.ajaxSearchList()})}return s},renderTableBody:function(t){for(var n=this,a=t.data.dataSource,i="",s=0,o=a.length;s<o;s++){var r=a[s];i+="<tr>"+function(e){for(var t="",a=0,i=n.tableOption.ths;a<i;a++){t+="<td>"+e[n.tableOption.ths[a]]+"</td>"}return t}(r)+"</tr>"}e(n.tableOption.tableElement).find("tbody").html(i)},ajaxSearchList:function(){var t=this;if(t.options.currentPageKey&&(t.options[t.options.currentPageKey]=t.options.currentPage),t.options.totalPageKey&&(t.options[t.options.totalPageKey]=t.options.pageCount),t.tableOption.sortOn&&(t.options.sortType=t.tableOption.sortType,t.options.sortCurrTh=t.tableOption.sortCurrTh),t.ajaxopts.contentType.indexOf("application/json")>-1?t.ajaxopts.data=JSON.stringify(t.options):t.ajaxopts.data=t.options,!t.ajaxopts.url||""==t.ajaxopts.url)return!(!t.options.pageCount||1===t.options.pageCount)&&(t.refreshPageNav(),!1);var n={};e.extend(!0,n,t.ajaxopts),n.data.callback&&delete n.data.callback,n.data.ajaxopts&&delete n.data.ajaxopts,t.ajaxopts=n,Utils.myAjaxHandler(t.ajaxopts).done(function(n){if(SUCCESSCODE==n.errorCode){var a={};a=t.options.dataKey?n.data[t.options.dataKey]:n.data,t.options.currentPage=a.currentPage,t.options.pageCount=a.totalPage,t.options.totalRecord=a.totalRecord,"normal"==t.options.tableBody?t.renderTableBody(n):t.options.callback(n),t.refreshPageNav()}else e.paAlert(n.errorMessage,null)}).fail(function(t){e.paAlert("请求异常",null)}).always(function(){})},preOrNextHandler:function(e){var t=this,n=t.options.currentPage;return 1==e&&n>1?n=parseInt(n)-1:2==e&&n<t.options.pageCount&&(n=parseInt(n)+1),n},refreshPageNav:function(e){this.renderPageNav()}},e.fn.extend({generatePagination:function(n,a){return new t(n,e(this),a)}})}(jQuery),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},n={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+n[this.getDay()+""]));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e};var Class_utils=function(){function e(){return arguments[0]||void 0}return{create:e}}(),Utils=Class_utils.create({timeStampToDateStr:function(e,t){if(null==e||""==e)return"";"string"==typeof e&&-1!=e.indexOf("-")&&(e=e.replace(/\-/g,"/"));var n=new Date(e).getFullYear(),a=new Date(e).getMonth()+1,i=new Date(e).getDate(),s=new Date(e).getHours(),o=new Date(e).getMinutes(),r=new Date(e).getSeconds();switch(t){case 1:return n+"-"+a+"-"+i+"   "+s+":"+o+":"+r;case 2:return n+"/"+a+"/"+i+"   "+s+":"+o+":"+r;case 3:return n+"年"+a+"月"+i+"日   "+s+o+":"+r;case 4:return n+"-"+a+"-"+i;case 5:return n+"/"+a+"/"+i;case 6:return n+"年"+a+"月"+i+"日";case 7:return a<10&&(a="0"+a),i<10&&(i="0"+i),n+"-"+a+"-"+i;case 8:return a<10&&(a="0"+a),i<10&&(i="0"+i),s<10&&(s="0"+s),o<10&&(o="0"+o),r<10&&(r="0"+r),n+"-"+a+"-"+i+"\n"+s+":"+o+":"+r;case 9:return a<10&&(a="0"+a),i<10&&(i="0"+i),s<10&&(s="0"+s),o<10&&(o="0"+o),r<10&&(r="0"+r),n+"-"+a+"-"+i+" "+s+":"+o+":"+r;case 10:return a<10&&(a="0"+a),i<10&&(i="0"+i),s<10&&(s="0"+s),o<10&&(o="0"+o),n+"-"+a+"-"+i+" "+s+":"+o}},getBrowserInfo:function(){var e={},t=navigator.userAgent.toLowerCase(),n=/(edge|msie|firefox|chrome|opera|version).*?([\d.]+)/,a=t.match(n)||["unKnow","unKnow","unKnow"];return e.browser=a[1].replace(/version/,"'safari"),e.ver=a[2],e},openWinCenter:function(e,t,n,a){var i=(window.screen.height-30-a)/2,s=(window.screen.width-10-n)/2;window.open(e,t,"height="+a+",innerHeight="+a+",width="+n+",innerWidth="+n+",top="+i+",left="+s+",toolbar=no,menubar=no,scrollbars=yes,resizeable=no,location=no,status=no")},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?decodeURIComponent(n[2]):null},myAjaxHandler:function(e){var t=e.showMask;if(t){delete e.showMask;var n=e.msgText;delete e.msgText,n=null==n||""==n||void 0==n?"":n,Utils.addLoadingMaskTo(null,n)}var a={data:{},method:"POST",dataType:"html"},i=$.extend({},a,e),s=window.currentModel,o=window.currentMenu,r=i.url;-1!=r.indexOf("?")?r+="&cookie_pawj_medical_user_id="+Utils.getCookie("cookie_pawj_medical_user_id")+"&currentModel="+s+"&currentMenu="+o+"&sysType=B":r+="?cookie_pawj_medical_user_id="+Utils.getCookie("cookie_pawj_medical_user_id")+"&currentModel="+s+"&currentMenu="+o+"&sysType=B",r+="&_timestamp="+(new Date).getTime(),i.url=r;var l=$.ajax(i);return l.done(function(e){if("E1SP0005"==e.errorCode){Utils.setCookie("cookie_pawj_medical_user_id","",-1),window.localStorage.removeItem("medical_user_data");var t=encodeURI(ContextClinc_Web);window.parent?window.parent.location.href=CAS_URL_NGINX+t:window.location.href=CAS_URL_NGINX+t}}).fail(function(e){}).always(function(){t&&Utils.removeLoadingMaskFrom()}),l},trimObj:function(e){var t="";return(e||"0"==e||0==e)&&(t=$.trim(e)),t},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},setCookie:function(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var i="expires="+a.toUTCString();document.cookie=e+"="+t+"; "+i},validatePermission:function(e){return void 0!=e&&void 0!=window.top.sessionUserPermissions[e]},accAdd:function(e,t){var n,a,i,s;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{a=t.toString().split(".")[1].length}catch(e){a=0}if(s=Math.abs(n-a),i=Math.pow(10,Math.max(n,a)),s>0){var o=Math.pow(10,s);n>a?(e=Number(e.toString().replace(".","")),t=Number(t.toString().replace(".",""))*o):(e=Number(e.toString().replace(".",""))*o,t=Number(t.toString().replace(".","")))}else e=Number(e.toString().replace(".","")),t=Number(t.toString().replace(".",""));return(e+t)/i},accSub:function(e,t){var n,a,i,s;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{a=t.toString().split(".")[1].length}catch(e){a=0}return i=Math.pow(10,Math.max(n,a)),s=n>=a?n:a,((e*i-t*i)/i).toFixed(s)},accMul:function(e,t){var n=0,a=e.toString(),i=t.toString();try{n+=a.split(".")[1].length}catch(e){}try{n+=i.split(".")[1].length}catch(e){}return Number(a.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,n)},accDiv:function(e,t){var n,a,i=0,s=0;try{i=e.toString().split(".")[1].length}catch(e){}try{s=t.toString().split(".")[1].length}catch(e){}return n=Number(e.toString().replace(".","")),a=Number(t.toString().replace(".","")),n/a*Math.pow(10,s-i)},roundFixed:function(e,t){var n=e.toString().indexOf("."),a=e.toString().length-n-1,i=e*Math.pow(10,a),s=Math.pow(10,a-t),o=Math.pow(10,t);return Math.round(i/s)/o},changePrice:function(e){return null!=e&&""!=e?(e+="",e.indexOf(".")<0&&(e+=".00"),0==e.indexOf(".")&&(e="0"+e)):e="0.00",e},disabledInput:function(e){e.each(function(){var e=$(this);if(e.addClass("wjzs-disabled"),e.find("input").addClass("wjzs-disabled"),e[0].setAttribute("readOnly","true"),e.find("input").each(function(){$(this)[0].setAttribute("readOnly","true")}),e.hasClass("drop")&&(e.removeClass("drop"),e.addClass("drop-disabled")),e.hasClass("checkboxes")&&(e[0].removeAttribute("readOnly"),e.removeClass("wjzs-disabled"),e.append("<div class='select-disabled'>&nbsp;</div>"),e.find("li").each(function(){$(this).addClass("wjzs-disabled")})),e.find("span").hasClass("radio")){e[0].removeAttribute("readOnly"),e.removeClass("wjzs-disabled");var t=e.position().top;e.append("<div class='select-disabled' style='top:"+t+"px'>&nbsp;</div>"),e.find("span").each(function(){$(this).addClass("wjzs-disabled")})}})},enableInput:function(e){e.each(function(){var e=$(this);e.removeClass("wjzs-disabled"),e.find("input").removeClass("wjzs-disabled"),e[0].removeAttribute("readOnly"),e.find("input").each(function(){$(this)[0].removeAttribute("readOnly")}),e.hasClass("drop-disabled")&&(e.removeClass("drop-disabled"),e.addClass("drop")),e.find("span").hasClass("radio")&&(e.find(".select-disabled").remove(),e.find("span").each(function(){$(this).removeClass("wjzs-disabled")})),e.hasClass("checkboxes")&&(e.find(".select-disabled").remove(),e.find("li").each(function(){$(this).removeClass("wjzs-disabled")}))})},checkIsRate:function(e){return!!/^[0-9]+.?[0-9]*$/.test(e)},compareDate:function(e,t){var n=new Array,a=new Array;if(null!=e&&null!=t){n=e.split("-");var i=new Date(n[0],parseInt(n[1]-1),n[2]);a=t.split("-");return!(i>new Date(a[0],parseInt(a[1]-1),a[2]))}},compareTime:function(e,t){if(e.length>0&&t.length>0){var n=e.split(" "),a=t.split(" "),i=n[0].split("-"),s=a[0].split("-"),o=n[1].split(":"),r=a[1].split(":"),l=new Date(i[0],i[1],i[2],o[0],o[1],o[2]),c=new Date(s[0],s[1],s[2],r[0],r[1],r[2]);return!(l.getTime()>=c.getTime())}return!1},compareDateTime:function(e,t){return-1!=e.indexOf(" ")&&-1!=t.indexOf(" ")?Utils.compareTime(e,t):Utils.compareDate(e,t)},disabledInput:function(e){e.each(function(){var e=$(this);if(e.addClass("wjzs-disabled"),e.find("input").addClass("wjzs-disabled"),e[0].setAttribute("readOnly","true"),e.find("input").each(function(){$(this)[0].setAttribute("readOnly","true")}),e.hasClass("drop")&&(e.removeClass("drop"),e.addClass("drop-disabled")),e.hasClass("checkboxes")&&(e[0].removeAttribute("readOnly"),e.removeClass("wjzs-disabled"),e.append("<div class='select-disabled'>&nbsp;</div>"),e.find("li").each(function(){$(this).addClass("wjzs-disabled")})),e.find("span").hasClass("radio")){e[0].removeAttribute("readOnly"),e.removeClass("wjzs-disabled");var t=e.position().top;e.append("<div class='select-disabled' style='top:"+t+"px'>&nbsp;</div>"),e.find("span").each(function(){$(this).addClass("wjzs-disabled")})}})},enableInput:function(e){e.each(function(){var e=$(this);e.removeClass("wjzs-disabled"),e.find("input").removeClass("wjzs-disabled"),e[0].removeAttribute("readOnly"),e.find("input").each(function(){$(this)[0].removeAttribute("readOnly")}),e.hasClass("drop-disabled")&&(e.removeClass("drop-disabled"),e.addClass("drop")),e.find("span").hasClass("radio")&&(e.find(".select-disabled").remove(),e.find("span").each(function(){$(this).removeClass("wjzs-disabled")})),e.hasClass("checkboxes")&&(e.find(".select-disabled").remove(),e.find("li").each(function(){$(this).removeClass("wjzs-disabled")}))})},calcPatientAge:function(e){function t(e){return e%4==0&&(e%100!=0||e%400==0)}function n(){var e=null;return d<=28?e=h>=d?p-c:p-c-1:29==d?e=2==p?t(u)?29==h?p-c:p-c-1:28==h?p-c:p-c-1:h>=29?p-c:p-c-1:30==d?e=2==p?t(u)?29==h?p-c:p-c-1:28==h?p-c:p-c-1:h>=30?p-c:p-c-1:31==d&&(e=2==p?t(u)?29==h?p-c:p-c-1:28==h?p-c:p-c-1:4==p||6==p||9==p||11==p?30==h?p-c:p-c-1:31==h?p-c:p-c-1),e}var a="",i="",s="";if(e&&""!=e){var o=new Date(e.replace(/-/g,"/")),r=new Date,l=o.getFullYear(),c=o.getMonth()+1,d=o.getDate(),u=r.getFullYear(),p=r.getMonth()+1,h=r.getDate();l<=u?(s=u-l-1,c<p?(s++,i=n()):c==p?2==p?t(u)?h>=d?(s++,i=0):i=11:28==h||h>=d?(s++,i=0):i=11:h>=d?(s++,i=0):i=11:i=12+n(),a=s<0?",":s+","+i):a=",",0==s&&0==i&&(i++,a=s+","+i)}else a="0,0";return a},calcPatientAge2:function(e){function t(e){return e%4==0&&(e%100!=0||e%400==0)}function n(){var e=null;return p<=28?e=m>=p?f-u:f-u-1:29==p?e=2==f?t(h)?29==m?f-u:f-u-1:28==m?f-u:f-u-1:m>=29?f-u:f-u-1:30==p?e=2==f?t(h)?29==m?f-u:f-u-1:28==m?f-u:f-u-1:m>=30?f-u:f-u-1:31==p&&(e=2==f?t(h)?29==m?f-u:f-u-1:28==m?f-u:f-u-1:4==f||6==f||9==f||11==f?30==m?f-u:f-u-1:31==m?f-u:f-u-1),e}function a(e){switch(e){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 4:case 6:case 9:case 11:return 30;case 2:return t(h)?29:28}}var i="",s="",o="",r="";if(e&&""!=e){var l=new Date(e.replace(/-/g,"/")),c=new Date,d=l.getFullYear(),u=l.getMonth()+1,p=l.getDate(),h=c.getFullYear(),f=c.getMonth()+1,m=c.getDate();s=function(){return s=m>=p?m-p:m+a(u)-p}(),d<=h?(r=h-d-1,u<f?(r++,o=n()):u==f?2==f?t(h)?m>=p?(r++,o=0):o=11:28==m||m>=p?(r++,o=0):o=11:m>=p?(r++,o=0):o=11:o=12+n(),i=r<0?",,":r+","+o+","+s):i=",,",0==r&&0==o&&(i=r+","+o+","+s)}else i="0,0,0";return i},calcPatientBirthday:function(e,t,n){
var a=this,i=12*Number(e),s=Number(i)+Number(t),o=new Date,r=new Date(o.getFullYear(),o.getMonth()-s,o.getDate()),l=r.getFullYear(),c=r.getMonth()+1,d="";if(null!=n){var u=a.getDaysInMonth(l,c);d=u<=n?u:n}else d=r.getDate();return l+"-"+(c>9?c:"0"+c)+"-"+(d>9?d:"0"+d)},getDaysInMonth:function(e,t){return t=parseInt(t,10),new Date(e,t,0).getDate()},isBlank:function(e){return null!=e&&void 0!=e&&""!=e},notBlank:function(e){return null!=e&&void 0!=e&&""!=e},addLoadingMaskTo:function(e,t){var n=e?$(e):$("body");(n.find(".loading-mask").length>0?n.find(".loading-mask"):$("<div class='loading-mask'><span class='loading-content'></span></div>").appendTo(n)).show().find(".loading-content").html(t||"")},removeLoadingMaskFrom:function(e){(e?$(e):$("body")).find(".loading-mask").hide()},getPersonAccurateAge:function(e,t,n){var a=new RegExp(/^\s*$/g);if(null==e||a.test(e))return"-";t||(t="岁"),n||(n="个月");var i=this.calcPatientAge(e),s=i.split(","),o="";return o=s[0]<2?s[0]+t+s[1]+n:s[0]+t,0==s[0]&&0==s[1]&&(o=s[0]+t),o},getPersonAccurateAge2:function(e,t,n,a){var i=new RegExp(/^\s*$/g);if(null==e||i.test(e))return"--";t||(t="岁"),n||(n="月"),a||(a="天");var s=this.calcPatientAge2(e),o=s.split(",");return o[0]<12?o[0]+t+o[1]+n+o[2]+a:o[0]+t},getFirAndLasDayOfMonth:function(e,t){var n=new Date,a=n.getYear();return e||(e=n.getMonth()+1),t&&(a=t.getYear(),e=t.getMonth()+1),new Date(a,e,0).getDate()},renderPopup:function(e){var t=e||$(".popup");if(t.length>0){var n=t,a=t.children(".popstyle");n.css("max-height","80%"),n.css("height","auto"),a.get(0).scrollHeight>n.height()?(n.css("height","80%"),n.css("max-height","none")):(n.css("max-height","80%"),n.css("height","auto"))}},insertByPosition:function(e,t){var n=document.getElementById(e);if(document.selection)n.focus(),sel=document.selection.createRange(),sel.text=t,n.focus();else if(n.selectionStart||"0"==n.selectionStart){var a=n.selectionStart,i=n.selectionEnd,s=n.scrollTop;n.value=n.value.substring(0,a)+t+n.value.substring(i,n.value.length),n.focus(),n.selectionStart=a+t.length,n.selectionEnd=a+t.length,n.scrollTop=s}else n.value+=t,n.focus()}});Stock.prototype={init:function(){this.getStockParam()},isLowStock:function(e,t,n,a,i){var s=!1;return e*t*n>i*a&&(s=!0),s},getStockParam:function(){var e=this,t={method:"POST",url:ContextClinc_Server+"mdcParameter/getParamValueByCode",data:{code:"1010"},dataType:"json",async:!1};Utils.myAjaxHandler(t).done(function(t){if(null==t||t.errorCode!=SUCCESSCODE)return void $.paError(t.errorMessage,null);e.isStockCheck=2!=t.data}).fail(function(e){$.paError("请求异常",null)}).always(function(){})}},"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,a,i,s,o,r=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,n=0;n<s;n+=1)o[n]=str(n,l)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+r+"]":"["+o.join(",")+"]",gap=r,i}if(rep&&"object"==typeof rep)for(s=rep.length,n=0;n<s;n+=1)"string"==typeof rep[n]&&(a=rep[n],(i=str(a,l))&&o.push(quote(a)+(gap?": ":":")+i));else for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(i=str(a,l))&&o.push(quote(a)+(gap?": ":":")+i);return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+r+"}":"{"+o.join(",")+"}",gap=r,i}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var a;if(gap="",indent="","number"==typeof n)for(a=0;a<n;a+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,a,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(a=walk(i,n),void 0!==a?i[n]=a:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){function t(t,n,a,i){this._inputEl=t,this._data=e.extend({},this._data,n),this._d_options=e.extend({},this._d_options,a),this._callback=i,this._init()}e.fn.extend({setInputForm:function(n,a,i){return new t(e(this),n,a,i),e(this)},getAllInputEls:function(t){var n=e(this).find("ul li input");return t&&t(n),e(this)},getInputCheckedEls:function(t){var n=e(this).find("ul li input[checked='true']");return t&&t(n),e(this)},getCheckedData:function(){var t=[];return e(this).find("ul li input").each(function(){e(this).prop("checked")&&t.push(e(this).parent().data("tempdata"))}),t},checkedAll:function(){return e(this).find("ul").hasClass("checkbox-box")&&e(this).find("ul li").each(function(){e(this).hasClass("disabled")||(e(this).find("input").prop("checked",!0),e(this).find("span").addClass("active"))}),e(this)},cancelCheckedAll:function(){return e(this).find("ul li").each(function(){e(this).hasClass("disabled")||(e(this).find("input").prop("checked",!1),e(this).find("span").removeClass("active"))}),e(this)},checkedItem:function(t){if(e(this).find("ul").hasClass("checkbox-box"))if(isNaN(t[0])){if(t[0]instanceof Object)for(var n=0;n<t.length;n++)e(this).find("ul li").each(function(){var i=!0,s=e(this).data("tempdata");for(a in t[n])if(e(this).hasClass("disabled")||s[a]!=t[n][a]){i=!1;break}i&&(e(this).find("input").prop("checked",!0),e(this).find("span").addClass("active"))})}else for(var a=0;a<t.length;a++){var i=e(this).find("ul li").eq(t[a]);i.hasClass("disabled")||(i.find("input").prop("checked",!0),i.find("span").addClass("active"))}else if(e(this).find("ul").hasClass("radio-box"))if(isNaN(t[0]))t[0]instanceof Object&&e(this).find("ul li").each(function(){var n=!0;for(a in t[0]){var i=e(this).data("tempdata");if(e(this).hasClass("disabled")||i[a]!=t[0][a]){n=!1;break}}n&&(e(this).parent().find("li input").prop("checked",!1),e(this).parent().find("li span").removeClass("active"),e(this).find("input").prop("checked",!0),e(this).find("span").addClass("active"))});else{var i=e(this).find("ul li").eq(t[0]);i.hasClass("disabled")||(e(this).find("li input").prop("checked",!1),e(this).find("li span").removeClass("active"),i.find("input").prop("checked",!0),i.find("span").addClass("active"))}return e(this)},cancelCheckedItem:function(t){if(e(this).find("ul").hasClass("checkbox-box"))if(isNaN(t[0])){if(t[0]instanceof Object)for(var n=0;n<t.length;n++)e(this).find("ul li").each(function(){var i=!0,s=e(this).data("tempdata");for(a in t[n])if(e(this).hasClass("disabled")||s[a]!=t[n][a]){i=!1;break}i&&(e(this).find("input").prop("checked",!1),e(this).find("span").removeClass("active"))})}else for(var a=0;a<t.length;a++){var i=e(this).find("ul li").eq(t[a]);i.hasClass("disabled")||(i.find("input").prop("checked",!1),i.find("span").removeClass("active"))}return e(this)},disabledAll:function(){return e(this).find("ul li").addClass("disabled"),e(this)},disabledItem:function(t){if(isNaN(t[0])){if(t[0]instanceof Object)for(var n=0;n<t.length;n++)e(this).find("ul li").each(function(){var i=!0,s=e(this).data("tempdata");for(a in t[n])if(s[a]!=t[n][a]){i=!1;break}i&&e(this).addClass("disabled")})}else for(var a=0;a<t.length;a++)e(this).find("ul li").eq(t[a]).addClass("disabled");return e(this)},cancelDisabledAll:function(){return e(this).find("ul li").removeClass("disabled"),e(this)},cancelDisabledItem:function(t){if(isNaN(t[0])){if(t[0]instanceof Object)for(var n=0;n<t.length;n++)e(this).find("ul li").each(function(){var i=!0,s=e(this).data("tempdata");for(a in t[n])if(s[a]!=t[n][a]){i=!1;break}i&&e(this).removeClass("disabled")})}else for(var a=0;a<t.length;a++)e(this).find("ul li").eq(t[a]).removeClass("disabled");return e(this)},initInputForm:function(t){var n=e(this).find("ul");n.find("li span").off("click").on("click",function(){var a=this;if(!e(this).parent().hasClass("disabled"))if(n.hasClass("radio-box")){if(e(this).prev("input").prop("checked")||(e(this).parent().parent().find("li input").prop("checked",!1),e(this).parent().parent().find("li span").removeClass("active"),e(this).prev("input").prop("checked",!0),e(this).addClass("active")),t){var i=[];n.find("li input").each(function(){if(e(this).prop("checked")&&e(this).next().hasClass("active")){var t=e(this).attr("id"),n=e(this).next().text(),a={};a.id=t,a.txt=n,i.push(a)}}),t(i,e(a).parent().get(0))}}else if(n.hasClass("checkbox-box")&&(e(this).prev("input").prop("checked")?e(this).prev("input").prop("checked",!1):e(this).prev("input").prop("checked",!0),e(this).toggleClass("active"),t)){var i=[];n.find("li input").each(function(){if(e(this).prop("checked")&&e(this).next().hasClass("active")){var t=e(this).attr("id"),n=e(this).next().text(),a={};a.id=t,a.txt=n,i.push(a)}}),t(i,e(a).parent().get(0))}})}}),t.prototype={_data:[],_d_options:{type:"radio",idKey:"id",txtKey:"txt"},_init:function(){this._initEls(),this._bindEvent()},_initEls:function(){var t=this;this._inputEl.empty().append("<ul class='clear'></ul>");var n=this._inputEl.find("ul").addClass(t._d_options.type+"-box");"radio"==this._d_options.type?e.each(this._data,function(a){var i=this[t._d_options.idKey],s=this[t._d_options.txtKey],o=this,r=e('<li class="radio-item clear"><input id='+i+' type="radio"><span title='+s+">"+s+"</span></li>");r.data("tempdata",o),n.append(r)}):"checkbox"==this._d_options.type&&e.each(this._data,function(a){var i=this[t._d_options.idKey],s=this[t._d_options.txtKey],o=this,r=e('<li class="checkbox-item clear"><input id='+i+' type="checkbox"><span title='+s+">"+s+"</span></li>");r.data("tempdata",o),n.append(r)})},_bindEvent:function(){var t=this;this._inputEl.find("ul");this._inputEl.find("ul li span").off("click").on("click",function(){var n=this;if(!e(this).parent().hasClass("disabled"))if("radio"==t._d_options.type){if(e(this).prev("input").prop("checked")||(e(this).parent().parent().find("li input").prop("checked",!1),e(this).parent().parent().find("li span").removeClass("active"),e(this).prev("input").prop("checked",!0),e(this).addClass("active")),t._callback){var a=e(n).parent().data("tempdata");t._callback(a,e(n).parent().get(0))}}else if("checkbox"==t._d_options.type&&(e(this).prev("input").prop("checked")?e(this).prev("input").prop("checked",!1):e(this).prev("input").prop("checked",!0),e(this).toggleClass("active"),t._callback)){var a=e(n).parent().data("tempdata");t._callback(a,e(n).parent().get(0))}})}}}(jQuery);